(function(e,O){typeof exports=="object"&&typeof module<"u"?module.exports=O(require("vue"),require("pinia")):typeof define=="function"&&define.amd?define(["vue","pinia"],O):(e=typeof globalThis<"u"?globalThis:e||self,e.OceanSubsidyComponents=O(e.Vue,e.Pinia))})(this,(function(e,O){"use strict";const{ajax:z}=rxjs.ajax,{map:G}=rxjs;let J="";const Y=(p,E={})=>P("Service/OFS/Culture.ashx",{method:p,param:E}),Q=({response:p,status:E})=>{if(E===200&&p.success)return p.data},P=(p,E={})=>{const c={};E.constructor!==FormData&&(c["Content-Type"]="application/json");const u={body:E,headers:c,method:"POST",url:`${J}/${p}`};return z(u).pipe(G(Q))},_=Object.assign(P,{culture:Y});function W(p){return p&&p.__esModule&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p}var j={exports:{}};/*!
 * validate.js 0.13.1
 *
 * (c) 2013-2019 Nicklas Ansman, 2013 Wrapp
 * Validate.js may be freely distributed under the MIT license.
 * For all details and documentation:
 * http://validatejs.org/
 */var K=j.exports,R;function X(){return R||(R=1,(function(p,E){(function(c,u,V){var b=function(t,l,o){o=n.extend({},n.options,o);var s=n.runValidations(t,l,o);if(s.some(function(f){return n.isPromise(f.error)}))throw new Error("Use validate.async if you want support for promises");return b.processValidationResults(s,o)},n=b;n.extend=function(t){return[].slice.call(arguments,1).forEach(function(l){for(var o in l)t[o]=l[o]}),t},n.extend(b,{version:{major:0,minor:13,patch:1,metadata:null,toString:function(){var t=n.format("%{major}.%{minor}.%{patch}",n.version);return n.isEmpty(n.version.metadata)||(t+="+"+n.version.metadata),t}},Promise:typeof Promise<"u"?Promise:null,EMPTY_STRING_REGEXP:/^\s*$/,runValidations:function(t,l,o){var s=[],f,d,g,N,y,i,r;(n.isDomElement(t)||n.isJqueryElement(t))&&(t=n.collectFormValues(t));for(f in l){g=n.getDeepObjectValue(t,f),N=n.result(l[f],g,t,f,o,l);for(d in N){if(y=n.validators[d],!y)throw r=n.format("Unknown validator %{name}",{name:d}),new Error(r);i=N[d],i=n.result(i,g,t,f,o,l),i&&s.push({attribute:f,value:g,validator:d,globalOptions:o,attributes:t,options:i,error:y.call(y,g,i,f,t,o)})}}return s},processValidationResults:function(t,l){t=n.pruneEmptyErrors(t,l),t=n.expandMultipleErrors(t,l),t=n.convertErrorMessages(t,l);var o=l.format||"grouped";if(typeof n.formatters[o]=="function")t=n.formatters[o](t);else throw new Error(n.format("Unknown format %{format}",l));return n.isEmpty(t)?void 0:t},async:function(t,l,o){o=n.extend({},n.async.options,o);var s=o.wrapErrors||function(d){return d};o.cleanAttributes!==!1&&(t=n.cleanAttributes(t,l));var f=n.runValidations(t,l,o);return new n.Promise(function(d,g){n.waitForResults(f).then(function(){var N=n.processValidationResults(f,o);N?g(new s(N,o,t,l)):d(t)},function(N){g(N)})})},single:function(t,l,o){return o=n.extend({},n.single.options,o,{format:"flat",fullMessages:!1}),n({single:t},{single:l},o)},waitForResults:function(t){return t.reduce(function(l,o){return n.isPromise(o.error)?l.then(function(){return o.error.then(function(s){o.error=s||null})}):l},new n.Promise(function(l){l()}))},result:function(t){var l=[].slice.call(arguments,1);return typeof t=="function"&&(t=t.apply(null,l)),t},isNumber:function(t){return typeof t=="number"&&!isNaN(t)},isFunction:function(t){return typeof t=="function"},isInteger:function(t){return n.isNumber(t)&&t%1===0},isBoolean:function(t){return typeof t=="boolean"},isObject:function(t){return t===Object(t)},isDate:function(t){return t instanceof Date},isDefined:function(t){return t!=null},isPromise:function(t){return!!t&&n.isFunction(t.then)},isJqueryElement:function(t){return t&&n.isString(t.jquery)},isDomElement:function(t){return!t||!t.querySelectorAll||!t.querySelector?!1:n.isObject(document)&&t===document?!0:typeof HTMLElement=="object"?t instanceof HTMLElement:t&&typeof t=="object"&&t!==null&&t.nodeType===1&&typeof t.nodeName=="string"},isEmpty:function(t){var l;if(!n.isDefined(t))return!0;if(n.isFunction(t))return!1;if(n.isString(t))return n.EMPTY_STRING_REGEXP.test(t);if(n.isArray(t))return t.length===0;if(n.isDate(t))return!1;if(n.isObject(t)){for(l in t)return!1;return!0}return!1},format:n.extend(function(t,l){return n.isString(t)?t.replace(n.format.FORMAT_REGEXP,function(o,s,f){return s==="%"?"%{"+f+"}":String(l[f])}):t},{FORMAT_REGEXP:/(%?)%\{([^\}]+)\}/g}),prettify:function(t){return n.isNumber(t)?t*100%1===0?""+t:parseFloat(Math.round(t*100)/100).toFixed(2):n.isArray(t)?t.map(function(l){return n.prettify(l)}).join(", "):n.isObject(t)?n.isDefined(t.toString)?t.toString():JSON.stringify(t):(t=""+t,t.replace(/([^\s])\.([^\s])/g,"$1 $2").replace(/\\+/g,"").replace(/[_-]/g," ").replace(/([a-z])([A-Z])/g,function(l,o,s){return""+o+" "+s.toLowerCase()}).toLowerCase())},stringifyValue:function(t,l){var o=l&&l.prettify||n.prettify;return o(t)},isString:function(t){return typeof t=="string"},isArray:function(t){return{}.toString.call(t)==="[object Array]"},isHash:function(t){return n.isObject(t)&&!n.isArray(t)&&!n.isFunction(t)},contains:function(t,l){return n.isDefined(t)?n.isArray(t)?t.indexOf(l)!==-1:l in t:!1},unique:function(t){return n.isArray(t)?t.filter(function(l,o,s){return s.indexOf(l)==o}):t},forEachKeyInKeypath:function(t,l,o){if(n.isString(l)){var s="",f,d=!1;for(f=0;f<l.length;++f)switch(l[f]){case".":d?(d=!1,s+="."):(t=o(t,s,!1),s="");break;case"\\":d?(d=!1,s+="\\"):d=!0;break;default:d=!1,s+=l[f];break}return o(t,s,!0)}},getDeepObjectValue:function(t,l){if(n.isObject(t))return n.forEachKeyInKeypath(t,l,function(o,s){if(n.isObject(o))return o[s]})},collectFormValues:function(t,l){var o={},s,f,d,g,N,y;if(n.isJqueryElement(t)&&(t=t[0]),!t)return o;for(l=l||{},g=t.querySelectorAll("input[name], textarea[name]"),s=0;s<g.length;++s)if(d=g.item(s),!n.isDefined(d.getAttribute("data-ignored"))){var i=d.name.replace(/\./g,"\\\\.");y=n.sanitizeFormValue(d.value,l),d.type==="number"?y=y?+y:null:d.type==="checkbox"?d.attributes.value?d.checked||(y=o[i]||null):y=d.checked:d.type==="radio"&&(d.checked||(y=o[i]||null)),o[i]=y}for(g=t.querySelectorAll("select[name]"),s=0;s<g.length;++s)if(d=g.item(s),!n.isDefined(d.getAttribute("data-ignored"))){if(d.multiple){y=[];for(f in d.options)N=d.options[f],N&&N.selected&&y.push(n.sanitizeFormValue(N.value,l))}else{var r=typeof d.options[d.selectedIndex]<"u"?d.options[d.selectedIndex].value:"";y=n.sanitizeFormValue(r,l)}o[d.name]=y}return o},sanitizeFormValue:function(t,l){return l.trim&&n.isString(t)&&(t=t.trim()),l.nullify!==!1&&t===""?null:t},capitalize:function(t){return n.isString(t)?t[0].toUpperCase()+t.slice(1):t},pruneEmptyErrors:function(t){return t.filter(function(l){return!n.isEmpty(l.error)})},expandMultipleErrors:function(t){var l=[];return t.forEach(function(o){n.isArray(o.error)?o.error.forEach(function(s){l.push(n.extend({},o,{error:s}))}):l.push(o)}),l},convertErrorMessages:function(t,l){l=l||{};var o=[],s=l.prettify||n.prettify;return t.forEach(function(f){var d=n.result(f.error,f.value,f.attribute,f.options,f.attributes,f.globalOptions);if(!n.isString(d)){o.push(f);return}d[0]==="^"?d=d.slice(1):l.fullMessages!==!1&&(d=n.capitalize(s(f.attribute))+" "+d),d=d.replace(/\\\^/g,"^"),d=n.format(d,{value:n.stringifyValue(f.value,l)}),o.push(n.extend({},f,{error:d}))}),o},groupErrorsByAttribute:function(t){var l={};return t.forEach(function(o){var s=l[o.attribute];s?s.push(o):l[o.attribute]=[o]}),l},flattenErrorsToArray:function(t){return t.map(function(l){return l.error}).filter(function(l,o,s){return s.indexOf(l)===o})},cleanAttributes:function(t,l){function o(d,g,N){return n.isObject(d[g])?d[g]:d[g]=N?!0:{}}function s(d){var g={},N;for(N in d)d[N]&&n.forEachKeyInKeypath(g,N,o);return g}function f(d,g){if(!n.isObject(d))return d;var N=n.extend({},d),y,i;for(i in d)y=g[i],n.isObject(y)?N[i]=f(N[i],y):y||delete N[i];return N}return!n.isObject(l)||!n.isObject(t)?{}:(l=s(l),f(t,l))},exposeModule:function(t,l,o,s,f){o?(s&&s.exports&&(o=s.exports=t),o.validate=t):(l.validate=t,t.isFunction(f)&&f.amd&&f([],function(){return t}))},warn:function(t){typeof console<"u"&&console.warn&&console.warn("[validate.js] "+t)},error:function(t){typeof console<"u"&&console.error&&console.error("[validate.js] "+t)}}),b.validators={presence:function(t,l){if(l=n.extend({},this.options,l),l.allowEmpty!==!1?!n.isDefined(t):n.isEmpty(t))return l.message||this.message||"can't be blank"},length:function(t,l,o){if(n.isDefined(t)){l=n.extend({},this.options,l);var s=l.is,f=l.maximum,d=l.minimum,g=l.tokenizer||function(r){return r},N,y=[];t=g(t);var i=t.length;if(!n.isNumber(i))return l.message||this.notValid||"has an incorrect length";if(n.isNumber(s)&&i!==s&&(N=l.wrongLength||this.wrongLength||"is the wrong length (should be %{count} characters)",y.push(n.format(N,{count:s}))),n.isNumber(d)&&i<d&&(N=l.tooShort||this.tooShort||"is too short (minimum is %{count} characters)",y.push(n.format(N,{count:d}))),n.isNumber(f)&&i>f&&(N=l.tooLong||this.tooLong||"is too long (maximum is %{count} characters)",y.push(n.format(N,{count:f}))),y.length>0)return l.message||y}},numericality:function(t,l,o,s,f){if(n.isDefined(t)){l=n.extend({},this.options,l);var d=[],g,N,y={greaterThan:function(w,C){return w>C},greaterThanOrEqualTo:function(w,C){return w>=C},equalTo:function(w,C){return w===C},lessThan:function(w,C){return w<C},lessThanOrEqualTo:function(w,C){return w<=C},divisibleBy:function(w,C){return w%C===0}},i=l.prettify||f&&f.prettify||n.prettify;if(n.isString(t)&&l.strict){var r="^-?(0|[1-9]\\d*)";if(l.onlyInteger||(r+="(\\.\\d+)?"),r+="$",!new RegExp(r).test(t))return l.message||l.notValid||this.notValid||this.message||"must be a valid number"}if(l.noStrings!==!0&&n.isString(t)&&!n.isEmpty(t)&&(t=+t),!n.isNumber(t))return l.message||l.notValid||this.notValid||this.message||"is not a number";if(l.onlyInteger&&!n.isInteger(t))return l.message||l.notInteger||this.notInteger||this.message||"must be an integer";for(g in y)if(N=l[g],n.isNumber(N)&&!y[g](t,N)){var a="not"+n.capitalize(g),h=l[a]||this[a]||this.message||"must be %{type} %{count}";d.push(n.format(h,{count:N,type:i(g)}))}if(l.odd&&t%2!==1&&d.push(l.notOdd||this.notOdd||this.message||"must be odd"),l.even&&t%2!==0&&d.push(l.notEven||this.notEven||this.message||"must be even"),d.length)return l.message||d}},datetime:n.extend(function(t,l){if(!n.isFunction(this.parse)||!n.isFunction(this.format))throw new Error("Both the parse and format functions needs to be set to use the datetime/date validator");if(n.isDefined(t)){l=n.extend({},this.options,l);var o,s=[],f=l.earliest?this.parse(l.earliest,l):NaN,d=l.latest?this.parse(l.latest,l):NaN;if(t=this.parse(t,l),isNaN(t)||l.dateOnly&&t%864e5!==0)return o=l.notValid||l.message||this.notValid||"must be a valid date",n.format(o,{value:arguments[0]});if(!isNaN(f)&&t<f&&(o=l.tooEarly||l.message||this.tooEarly||"must be no earlier than %{date}",o=n.format(o,{value:this.format(t,l),date:this.format(f,l)}),s.push(o)),!isNaN(d)&&t>d&&(o=l.tooLate||l.message||this.tooLate||"must be no later than %{date}",o=n.format(o,{date:this.format(d,l),value:this.format(t,l)}),s.push(o)),s.length)return n.unique(s)}},{parse:null,format:null}),date:function(t,l){return l=n.extend({},l,{dateOnly:!0}),n.validators.datetime.call(n.validators.datetime,t,l)},format:function(t,l){(n.isString(l)||l instanceof RegExp)&&(l={pattern:l}),l=n.extend({},this.options,l);var o=l.message||this.message||"is invalid",s=l.pattern,f;if(n.isDefined(t)&&(!n.isString(t)||(n.isString(s)&&(s=new RegExp(l.pattern,l.flags)),f=s.exec(t),!f||f[0].length!=t.length)))return o},inclusion:function(t,l){if(n.isDefined(t)&&(n.isArray(l)&&(l={within:l}),l=n.extend({},this.options,l),!n.contains(l.within,t))){var o=l.message||this.message||"^%{value} is not included in the list";return n.format(o,{value:t})}},exclusion:function(t,l){if(n.isDefined(t)&&(n.isArray(l)&&(l={within:l}),l=n.extend({},this.options,l),!!n.contains(l.within,t))){var o=l.message||this.message||"^%{value} is restricted";return n.isString(l.within[t])&&(t=l.within[t]),n.format(o,{value:t})}},email:n.extend(function(t,l){l=n.extend({},this.options,l);var o=l.message||this.message||"is not a valid email";if(n.isDefined(t)&&(!n.isString(t)||!this.PATTERN.exec(t)))return o},{PATTERN:/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i}),equality:function(t,l,o,s,f){if(n.isDefined(t)){n.isString(l)&&(l={attribute:l}),l=n.extend({},this.options,l);var d=l.message||this.message||"is not equal to %{attribute}";if(n.isEmpty(l.attribute)||!n.isString(l.attribute))throw new Error("The attribute must be a non empty string");var g=n.getDeepObjectValue(s,l.attribute),N=l.comparator||function(i,r){return i===r},y=l.prettify||f&&f.prettify||n.prettify;if(!N(t,g,l,o,s))return n.format(d,{attribute:y(l.attribute)})}},url:function(t,l){if(n.isDefined(t)){l=n.extend({},this.options,l);var o=l.message||this.message||"is not a valid url",s=l.schemes||this.schemes||["http","https"],f=l.allowLocal||this.allowLocal||!1,d=l.allowDataUrl||this.allowDataUrl||!1;if(!n.isString(t))return o;var g="^(?:(?:"+s.join("|")+")://)(?:\\S+(?::\\S*)?@)?(?:",N="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))";if(f?N+="?":g+="(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})",g+="(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+N+")(?::\\d{2,5})?(?:[/?#]\\S*)?$",d){var y="\\w+\\/[-+.\\w]+(?:;[\\w=]+)*",i="[A-Za-z0-9-_.!~\\*'();\\/?:@&=+$,%]*",r="data:(?:"+y+")?(?:;base64)?,"+i;g="(?:"+g+")|(?:^"+r+"$)"}var a=new RegExp(g,"i");if(!a.exec(t))return o}},type:n.extend(function(t,l,o,s,f){if(n.isString(l)&&(l={type:l}),!!n.isDefined(t)){var d=n.extend({},this.options,l),g=d.type;if(!n.isDefined(g))throw new Error("No type was specified");var N;if(n.isFunction(g)?N=g:N=this.types[g],!n.isFunction(N))throw new Error("validate.validators.type.types."+g+" must be a function.");if(!N(t,d,o,s,f)){var y=l.message||this.messages[g]||this.message||d.message||(n.isFunction(g)?"must be of the correct type":"must be of type %{type}");return n.isFunction(y)&&(y=y(t,l,o,s,f)),n.format(y,{attribute:n.prettify(o),type:g})}}},{types:{object:function(t){return n.isObject(t)&&!n.isArray(t)},array:n.isArray,integer:n.isInteger,number:n.isNumber,string:n.isString,date:n.isDate,boolean:n.isBoolean},messages:{}})},b.formatters={detailed:function(t){return t},flat:n.flattenErrorsToArray,grouped:function(t){var l;t=n.groupErrorsByAttribute(t);for(l in t)t[l]=n.flattenErrorsToArray(t[l]);return t},constraint:function(t){var l;t=n.groupErrorsByAttribute(t);for(l in t)t[l]=t[l].map(function(o){return o.validator}).sort();return t}},b.exposeModule(b,this,c,u,V)}).call(K,E,p,null)})(j,j.exports)),j.exports}var Z=X();const L=W(Z),U=(p,E,c="")=>{const u={};Object.keys(E).forEach(n=>{const t=E[n];L.isString(t)?u[n]={presence:{allowEmpty:!1,message:`^請輸入${t}`}}:u[n]=t});const V={},b=L(p,u);return b&&Object.keys(b).forEach(n=>V[`${c}${n}`]=b[n].join(",")),V},M=O.defineStore("progress",{state:()=>({culture:1})}),H={class:"block"},v={class:"mt-4"},ee={class:"table align-middle gray-table side-table"},te={key:0},le={key:1,class:"text-light-gray"},ne={class:"d-flex gap-2"},re={key:0,class:"invalid"},oe={key:0},ae={class:"mt-4"},se={class:"table align-middle gray-table side-table"},de={class:"row g-3"},ie={class:"col-12 col-xl-2"},ce={class:"col-12 col-xl-2"},me={class:"col-12 col-xl-3"},ue={class:"d-flex gap-2"},fe={class:"col-12 col-xl-2"},pe={class:"col-12 col-xl-3"},Ve={class:"mt-4"},Ne={class:"table align-middle gray-table side-table"},Ee={class:"mt-4"},be={class:"table align-middle gray-table side-table"},ge={key:0,class:"table-responsive sub-table mt-3 mb-0"},ye={class:"table align-middle gray-table"},ke={class:"d-flex gap-2"},he=["onClick"],xe={class:"block-bottom bg-light-teal"},$e={__name:"CultureApplication",props:{id:{type:Number}},setup(p){const E=p,c=e.ref([]),u=e.ref(),V=e.ref({}),b=e.ref(null),n=e.ref([]),t=e.computed(()=>s.value.filter(r=>!r.Deleted)),l=e.ref({}),o=e.computed(()=>n.value.filter(r=>!r.ParentCode)),s=e.ref([]),f=e.computed(()=>n.value.filter(r=>r.ParentCode===b.value)),d=e.computed({get:()=>!!t.value.length,set:r=>{r?g():s.value.forEach(a=>a.Deleted=!0)}}),g=()=>s.value.push({}),N=r=>r.Deleted=!0,y=r=>{if(r&&!i()){e.nextTick(()=>{var h;return(h=document.querySelector(".invalid"))==null?void 0:h.scrollIntoView({behavior:"smooth",block:"center"})});return}const a={Project:l.value,Contacts:u.value,ReceivedSubsidies:s.value.filter(h=>h.ID||!h.Deleted),Submit:r?"true":"false"};_.culture("saveApplication",a).subscribe(h=>{r?window.location.href=`WorkSchedule.aspx?ID=${h.ID}`:l.value.ID||(window.location.href=`Application.aspx?ID=${h.ID}`)})},i=()=>{let r={ProjectName:"計畫名稱",Field:"徵件類別",OrgName:"申請單位",OrgCategory:"申請單位類別",TaxID:"統一編號",Address:"立案聯絡地址",Target:"計畫目標",Summary:"計畫內容概要",Quantified:"預期效益(量化)",Qualitative:"預期效益(質化)"};return l.value.OrgCategory==="3"&&(r.RegisteredNum="立案登記證字號"),V.value=U(l.value,r),r={Name:"姓名",JobTitle:"職稱",MobilePhone:"手機號碼",EMail:"電子郵件"},u.value.forEach((a,h)=>Object.assign(V.value,U(a,r,`contact-${h}-`))),r={Name:"計畫名稱",Unit:"補助單位",Amount:{presence:{allowEmpty:!1,message:"^請輸入補助金額"},numericality:{greaterThan:0,message:"^補助金額不可為 0"}}},s.value.forEach((a,h)=>Object.assign(V.value,U(a,r,`received-${h}-`))),!Object.keys(V.value).length};return e.onMounted(()=>{rxjs.forkJoin([_.culture("getZgsCodes",{CodeGroup:"CULField"}),_.culture("getZgsCodes",{CodeGroup:"CULOrgCategory"})]).subscribe(r=>{n.value=r[0],c.value=r[1],E.id?_.culture("getApplication",{ID:E.id}).subscribe(a=>{var h;l.value=a.Project,u.value=a.Contacts,s.value=a.ReceivedSubsidies,b.value=((h=n.value.find(w=>w.Code===l.value.Field))==null?void 0:h.ParentCode)||null,l.value.OrgCategory=l.value.OrgCategory||null,M().culture=l.value.FormStep}):_.culture("getEmptyApplication").subscribe(a=>{b.value=null,l.value=Object.assign({Field:null,OrgCategory:null},a),u.value=[{Role:"負責人"},{Role:"聯絡人"}]})})}),e.watch(b,()=>{b.value?f.value.find(r=>l.value.Field===r.Code)||(l.value.Field=f.value[0].Code):l.value.Field=null}),(r,a)=>{const h=e.resolveComponent("input-text"),w=e.resolveComponent("input-select"),C=e.resolveComponent("input-textarea"),x=e.resolveComponent("input-boolean"),D=e.resolveComponent("input-integer");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",H,[a[40]||(a[40]=e.createElementVNode("h5",{class:"square-title"},"基本資料",-1)),e.createElementVNode("div",v,[e.createElementVNode("table",ee,[e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[a[15]||(a[15]=e.createElementVNode("th",null,"年度",-1)),e.createElementVNode("td",null,e.toDisplayString(e.unref(l).Year),1)]),e.createElementVNode("tr",null,[a[16]||(a[16]=e.createElementVNode("th",null,"計畫編號",-1)),e.createElementVNode("td",null,[e.unref(l).ProjectID?(e.openBlock(),e.createElementBlock("span",te,e.toDisplayString(e.unref(l).ProjectID),1)):(e.openBlock(),e.createElementBlock("span",le,"儲存後由系統自動產生"))])]),e.createElementVNode("tr",null,[a[17]||(a[17]=e.createElementVNode("th",null,"補助計畫類別",-1)),e.createElementVNode("td",null,e.toDisplayString(e.unref(l).SubsidyPlanType),1)]),e.createElementVNode("tr",null,[a[18]||(a[18]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 計畫名稱")],-1)),e.createElementVNode("td",null,[e.createVNode(h,{error:e.unref(V).ProjectName,modelValue:e.unref(l).ProjectName,"onUpdate:modelValue":a[0]||(a[0]=m=>e.unref(l).ProjectName=m),modelModifiers:{trim:!0}},null,8,["error","modelValue"])])]),e.createElementVNode("tr",null,[a[19]||(a[19]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 徵件類別")],-1)),e.createElementVNode("td",null,[e.createElementVNode("div",ne,[e.createVNode(w,{class:"w-auto","empty-value":null,options:e.unref(o),"text-name":"Descname","value-name":"Code",modelValue:e.unref(b),"onUpdate:modelValue":a[1]||(a[1]=m=>e.isRef(b)?b.value=m:null)},null,8,["options","modelValue"]),e.createVNode(w,{class:"w-auto","empty-value":null,disabled:!e.unref(b),options:e.unref(f),"text-name":"Descname","value-name":"Code",modelValue:e.unref(l).Field,"onUpdate:modelValue":a[2]||(a[2]=m=>e.unref(l).Field=m)},null,8,["disabled","options","modelValue"])]),e.unref(V).Field?(e.openBlock(),e.createElementBlock("div",re,e.toDisplayString(e.unref(V).Field),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("tr",null,[a[20]||(a[20]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 申請單位")],-1)),e.createElementVNode("td",null,[e.createVNode(h,{error:e.unref(V).OrgName,modelValue:e.unref(l).OrgName,"onUpdate:modelValue":a[3]||(a[3]=m=>e.unref(l).OrgName=m),modelModifiers:{trim:!0}},null,8,["error","modelValue"])])]),e.createElementVNode("tr",null,[a[21]||(a[21]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 申請單位類別")],-1)),e.createElementVNode("td",null,[e.createVNode(w,{class:"w-auto","empty-value":null,error:e.unref(V).OrgCategory,options:e.unref(c),"text-name":"Descname","value-name":"Code",modelValue:e.unref(l).OrgCategory,"onUpdate:modelValue":a[4]||(a[4]=m=>e.unref(l).OrgCategory=m)},null,8,["error","options","modelValue"])])]),e.unref(l).OrgCategory==="3"?(e.openBlock(),e.createElementBlock("tr",oe,[a[22]||(a[22]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 立案登記證字號")],-1)),e.createElementVNode("td",null,[e.createVNode(h,{error:e.unref(V).RegisteredNum,modelValue:e.unref(l).RegisteredNum,"onUpdate:modelValue":a[5]||(a[5]=m=>e.unref(l).RegisteredNum=m),modelModifiers:{trim:!0}},null,8,["error","modelValue"])])])):e.createCommentVNode("",!0),e.createElementVNode("tr",null,[a[23]||(a[23]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 統一編號"),e.createElementVNode("br"),e.createTextVNode("(稅籍)")],-1)),e.createElementVNode("td",null,[e.createVNode(h,{error:e.unref(V).TaxID,modelValue:e.unref(l).TaxID,"onUpdate:modelValue":a[6]||(a[6]=m=>e.unref(l).TaxID=m),modelModifiers:{trim:!0}},null,8,["error","modelValue"])])]),e.createElementVNode("tr",null,[a[24]||(a[24]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 立案聯絡地址")],-1)),e.createElementVNode("td",null,[e.createVNode(h,{error:e.unref(V).Address,modelValue:e.unref(l).Address,"onUpdate:modelValue":a[7]||(a[7]=m=>e.unref(l).Address=m),modelModifiers:{trim:!0}},null,8,["error","modelValue"])])])])])]),a[41]||(a[41]=e.createElementVNode("h5",{class:"square-title mt-5"},"人員聯絡資訊",-1)),e.createElementVNode("div",ae,[e.createElementVNode("table",se,[e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(u),(m,k)=>(e.openBlock(),e.createElementBlock("tr",{key:m},[e.createElementVNode("th",null,[a[25]||(a[25]=e.createElementVNode("span",{class:"text-pink"},"*",-1)),e.createTextVNode(" "+e.toDisplayString(m.Role),1)]),e.createElementVNode("td",null,[e.createElementVNode("div",de,[e.createElementVNode("div",ie,[a[26]||(a[26]=e.createElementVNode("div",{class:"mb-2"},[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 姓名 ")],-1)),e.createVNode(h,{error:e.unref(V)[`contact-${k}-Name`],modelValue:m.Name,"onUpdate:modelValue":B=>m.Name=B,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("div",ce,[a[27]||(a[27]=e.createElementVNode("div",{class:"mb-2"},[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 職稱 ")],-1)),e.createVNode(h,{error:e.unref(V)[`contact-${k}-JobTitle`],modelValue:m.JobTitle,"onUpdate:modelValue":B=>m.JobTitle=B,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("div",me,[a[28]||(a[28]=e.createElementVNode("div",{class:"mb-2"}," 電話(分機) ",-1)),e.createElementVNode("div",ue,[e.createVNode(h,{modelValue:m.Phone,"onUpdate:modelValue":B=>m.Phone=B,modelModifiers:{trim:!0}},null,8,["modelValue","onUpdate:modelValue"]),e.createVNode(h,{class:"w-auto",placeholder:"分機",size:"4",modelValue:m.PhoneExt,"onUpdate:modelValue":B=>m.PhoneExt=B,modelModifiers:{trim:!0}},null,8,["modelValue","onUpdate:modelValue"])])]),e.createElementVNode("div",fe,[a[29]||(a[29]=e.createElementVNode("div",{class:"mb-2"},[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 手機號碼 ")],-1)),e.createVNode(h,{error:e.unref(V)[`contact-${k}-MobilePhone`],modelValue:m.MobilePhone,"onUpdate:modelValue":B=>m.MobilePhone=B,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("div",pe,[a[30]||(a[30]=e.createElementVNode("div",{class:"mb-2"},[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 電子郵件 ")],-1)),e.createVNode(h,{error:e.unref(V)[`contact-${k}-EMail`],modelValue:m.EMail,"onUpdate:modelValue":B=>m.EMail=B,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])])])])]))),128))])])]),a[42]||(a[42]=e.createElementVNode("h5",{class:"square-title mt-5"},"計畫內容",-1)),e.createElementVNode("div",Ve,[e.createElementVNode("table",Ne,[e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[a[32]||(a[32]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 計畫目標"),e.createElementVNode("br"),e.createTextVNode("(條列式)")],-1)),e.createElementVNode("td",null,[a[31]||(a[31]=e.createElementVNode("div",{class:"fs-14 mb-2"},"對海洋文化發展、推廣或傳承之期待，包含落實海洋基本法、2020國家海洋政策白皮書與臺灣永續發展目標",-1)),e.createVNode(C,{error:e.unref(V).Target,"max-length":500,rows:"4",modelValue:e.unref(l).Target,"onUpdate:modelValue":a[8]||(a[8]=m=>e.unref(l).Target=m),modelModifiers:{trim:!0}},null,8,["error","modelValue"])])]),e.createElementVNode("tr",null,[a[33]||(a[33]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 計畫內容概要"),e.createElementVNode("br"),e.createTextVNode("(條列式)")],-1)),e.createElementVNode("td",null,[e.createVNode(C,{error:e.unref(V).Summary,"max-length":500,rows:"4",modelValue:e.unref(l).Summary,"onUpdate:modelValue":a[9]||(a[9]=m=>e.unref(l).Summary=m),modelModifiers:{trim:!0}},null,8,["error","modelValue"])])]),e.createElementVNode("tr",null,[a[34]||(a[34]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 預期效益"),e.createElementVNode("br"),e.createTextVNode("(量化)(條列式)")],-1)),e.createElementVNode("td",null,[e.createVNode(C,{error:e.unref(V).Quantified,"max-length":250,rows:"4",modelValue:e.unref(l).Quantified,"onUpdate:modelValue":a[10]||(a[10]=m=>e.unref(l).Quantified=m),modelModifiers:{trim:!0}},null,8,["error","modelValue"])])]),e.createElementVNode("tr",null,[a[35]||(a[35]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 預期效益"),e.createElementVNode("br"),e.createTextVNode("(質化)(條列式)")],-1)),e.createElementVNode("td",null,[e.createVNode(C,{error:e.unref(V).Qualitative,"max-length":250,rows:"4",modelValue:e.unref(l).Qualitative,"onUpdate:modelValue":a[11]||(a[11]=m=>e.unref(l).Qualitative=m),modelModifiers:{trim:!0}},null,8,["error","modelValue"])])])])])]),e.createElementVNode("div",Ee,[e.createElementVNode("table",be,[e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[a[39]||(a[39]=e.createElementVNode("th",null,"最近三年曾獲本會及所屬補助／合作計畫及經費",-1)),e.createElementVNode("td",null,[e.createVNode(x,{modelValue:e.unref(d),"onUpdate:modelValue":a[12]||(a[12]=m=>e.isRef(d)?d.value=m:null)},null,8,["modelValue"]),e.unref(d)?(e.openBlock(),e.createElementBlock("div",ge,[e.createElementVNode("table",ye,[a[38]||(a[38]=e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[e.createElementVNode("th",null,"計畫名稱"),e.createElementVNode("th",null,"補助單位"),e.createElementVNode("th",null,"補助金額"),e.createElementVNode("th",null,"操作")])],-1)),e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(t),(m,k)=>(e.openBlock(),e.createElementBlock("tr",{key:m},[e.createElementVNode("td",null,[e.createVNode(h,{error:e.unref(V)[`received-${k}-Name`],modelValue:m.Name,"onUpdate:modelValue":B=>m.Name=B,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("td",null,[e.createVNode(h,{error:e.unref(V)[`received-${k}-Unit`],modelValue:m.Unit,"onUpdate:modelValue":B=>m.Unit=B,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("td",null,[e.createVNode(D,{error:e.unref(V)[`received-${k}-Amount`],modelValue:m.Amount,"onUpdate:modelValue":B=>m.Amount=B},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("td",null,[e.createElementVNode("div",ke,[e.unref(t).length>1?(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-sm btn-teal-dark m-0",onClick:B=>N(m),type:"button"},a[36]||(a[36]=[e.createElementVNode("i",{class:"fas fa-trash-alt"},null,-1)]),8,he)):e.createCommentVNode("",!0),k+1===e.unref(t).length?(e.openBlock(),e.createElementBlock("button",{key:1,class:"btn btn-sm btn-teal-dark m-0",onClick:g,type:"button"},a[37]||(a[37]=[e.createElementVNode("i",{class:"fas fa-plus"},null,-1)]))):e.createCommentVNode("",!0)])])]))),128))])])])):e.createCommentVNode("",!0)])])])])])]),e.createElementVNode("div",xe,[e.createElementVNode("button",{class:"btn btn-outline-teal me-3",onClick:a[13]||(a[13]=m=>y()),type:"button"},"暫存"),e.createElementVNode("button",{class:"btn btn-teal",onClick:a[14]||(a[14]=m=>y(!0)),type:"button"},a[43]||(a[43]=[e.createElementVNode("i",{class:"fas fa-check"},null,-1),e.createTextVNode("完成本頁，下一步",-1)]))])],64)}}},Se={class:"block-bottom bg-light-teal"},De={__name:"CultureAttachment",props:{id:{type:Number}},setup(p){const E=p,c=e.ref({}),u=b=>{if(b&&!V()){e.nextTick(()=>{var n;return(n=document.querySelector(".invalid"))==null?void 0:n.scrollIntoView({behavior:"smooth",block:"center"})});return}},V=()=>!Object.keys(c.value).length;return e.onMounted(()=>{rxjs.forkJoin([_.culture("getAttachment",{ID:E.id})]).subscribe(b=>{const n=b[0];M().culture=n.Project.FormStep})}),(b,n)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[n[3]||(n[3]=e.createStaticVNode('<div class="block"><h5 class="square-title">請下載範本填寫用印並上傳</h5><p class="text-pink lh-base mt-4"> 請下載附件範本，填寫資料及公文用印後上傳（僅支援PDF格式上傳，每個檔案10MB以內）<br> 計畫書請自行留存送審版電子檔，待決審核定經費後請提交修正計畫書以供核定。 </p><div class="mt-4"><table class="table align-middle gray-table"><thead class="text-center"><tr><th width="60">附件編號</th><th>附件名稱</th><th width="180">狀態</th><th width="350">上傳附件</th></tr></thead><tbody><tr><td class="text-center">1</td><td><a href="#" class="link-teal">海洋委員會海洋科技專案補助作業要點</a></td><td></td><td></td></tr><tr><td class="text-center">2</td><td><div><span class="text-pink">*</span> 海洋科技科專案計畫書 </div><button class="btn btn-sm btn-teal-dark rounded-pill mt-2" type="button"><i class="fas fa-file-download me-1"></i> 範本下載 </button></td><td class="text-center"><span class="text-pink">尚未上傳</span></td><td><button class="btn btn-teal-dark" type="button"><i class="fas fa-file-upload me-1"></i> 上傳 </button></td></tr><tr><td class="text-center">3</td><td><div><span class="text-pink">*</span> 建議迴避之審查委員清單 </div><button class="btn btn-sm btn-teal-dark rounded-pill mt-2" type="button"><i class="fas fa-file-download me-1"></i> 範本下載 </button></td><td class="text-center"><span>已上傳</span></td><td><button class="btn btn-teal-dark" type="button"><i class="fas fa-file-upload me-1"></i> 上傳 </button><div class="tag-group mt-2 gap-1"><span class="tag tag-green-light"><a class="tag-link" href="#" target="_blank">1140001_海洋科技科專案計畫書.pdf</a><button type="button" class="tag-btn"><i class="fa-solid fa-circle-xmark"></i></button></span></div></td></tr><tr><td class="text-center">4</td><td><div><span class="text-pink">*</span> 未違反公職人員利益衝突迴避法切結書 </div><button class="btn btn-sm btn-teal-dark rounded-pill mt-2" type="button"><i class="fas fa-file-download me-1"></i> 範本下載 </button></td><td class="text-center"><span>已上傳</span></td><td><button class="btn btn-teal-dark" type="button"><i class="fas fa-file-upload me-1"></i> 上傳 </button><div class="tag-group mt-2 gap-1"><span class="tag tag-green-light"><a class="tag-link" href="#" target="_blank">1140001_海洋科技科專案計畫書111111111.pdf</a><button type="button" class="tag-btn"><i class="fa-solid fa-circle-xmark"></i></button></span></div></td></tr><tr><td class="text-center">5</td><td><div><span class="text-pink">*</span> 蒐集個人資料告知事項暨個人資料提供同意書 </div><button class="btn btn-sm btn-teal-dark rounded-pill mt-2" type="button"><i class="fas fa-file-download me-1"></i> 範本下載 </button></td><td class="text-center"><span class="text-pink">尚未上傳</span></td><td><button class="btn btn-teal-dark" type="button"><i class="fas fa-file-upload me-1"></i> 上傳 </button></td></tr><tr><td class="text-center">6</td><td><div><span class="text-pink">*</span> 共同執行單位基本資料表 </div><button class="btn btn-sm btn-teal-dark rounded-pill mt-2" type="button"><i class="fas fa-file-download me-1"></i> 範本下載 </button></td><td class="text-center"><span class="text-pink">尚未上傳</span></td><td><button class="btn btn-teal-dark" type="button"><i class="fas fa-file-upload me-1"></i> 上傳 </button></td></tr><tr><td class="text-center">7</td><td><div><span class="text-pink">*</span> 申請人自我檢查表 </div><button class="btn btn-sm btn-teal-dark rounded-pill mt-2" type="button"><i class="fas fa-file-download me-1"></i> 範本下載 </button></td><td class="text-center"><span class="text-pink">尚未上傳</span></td><td><button class="btn btn-teal-dark" type="button"><i class="fas fa-file-upload me-1"></i> 上傳 </button></td></tr><tr><td class="text-center">8</td><td><a href="#" class="link-teal">簽約注意事項</a></td><td></td><td></td></tr><tr><td class="text-center">9</td><td><div><span class="text-pink">*</span> 海洋委員會補助科技專案計畫契約書 </div><button class="btn btn-sm btn-teal-dark rounded-pill mt-2" type="button"><i class="fas fa-file-download me-1"></i> 範本下載 </button></td><td class="text-center"><span class="text-pink">尚未上傳</span></td><td><button class="btn btn-teal-dark" type="button"><i class="fas fa-file-upload me-1"></i> 上傳 </button></td></tr><tr><td class="text-center">10</td><td><a href="#" class="link-teal">海洋科技專案計畫會計科目編列與執行原則</a></td><td></td><td></td></tr><tr><td class="text-center">11</td><td><div><span class="text-pink">*</span> 海洋科技專案成效追蹤自評表 </div><button class="btn btn-sm btn-teal-dark rounded-pill mt-2" type="button"><i class="fas fa-file-download me-1"></i> 範本下載 </button></td><td class="text-center"><span class="text-pink">尚未上傳</span></td><td><button class="btn btn-teal-dark" type="button"><i class="fas fa-file-upload me-1"></i> 上傳 </button></td></tr><tr><td class="text-center">12</td><td><a href="#" class="link-teal">研究紀錄簿使用原則</a></td><td></td><td></td></tr><tr><td class="text-center">13</td><td><a href="#" class="link-teal">計畫書書脊（側邊）格式</a></td><td></td><td></td></tr></tbody></table></div></div>',1)),e.createElementVNode("div",Se,[e.createElementVNode("button",{class:"btn btn-outline-teal me-3",onClick:n[0]||(n[0]=t=>u()),type:"button"},"暫存"),e.createElementVNode("button",{class:"btn btn-teal",onClick:n[1]||(n[1]=t=>u(!0)),type:"button"},n[2]||(n[2]=[e.createElementVNode("i",{class:"fas fa-check"},null,-1),e.createTextVNode("全部完成，提送申請",-1)]))])],64))}};let Be=Date.now();const Te=()=>`id--${Be++}`,I=p=>parseInt(p)||0,Ce={class:"block"},we={class:"mt-4"},Ue={class:"table-responsive mt-3 mb-0"},_e={class:"table align-middle gray-table"},Ae={class:"text-end"},Me={class:"text-end"},Ie={class:"table align-middle gray-table side-table"},Oe={class:"table-responsive sub-table mb-0"},je={class:"table align-middle gray-table"},Fe={class:"d-flex gap-2"},Pe=["onClick"],Re={class:"mt-4"},Le={class:"table-responsive mt-3 mb-0"},qe={class:"table align-middle gray-table"},ze={class:"text-end"},Ge={class:"d-flex gap-2"},Je=["onClick"],Ye={class:"block-bottom bg-light-teal"},Qe={__name:"CultureFunding",props:{id:{type:Number}},setup(p){const E=p,c=e.ref({}),u=e.ref({}),V=e.ref([]),b=e.ref([]),n=e.ref([]),t=e.ref(0),l=e.computed(()=>b.value.filter(i=>!i.Deleted)),o=e.computed(()=>n.value.filter(i=>!i.Deleted)),s=()=>b.value.push({}),f=()=>n.value.push({ItemID:0}),d=i=>i.Deleted=!0,g=i=>i.Deleted=!0,N=i=>{if(i&&!y()){e.nextTick(()=>{var a;return(a=document.querySelector(".invalid"))==null?void 0:a.scrollIntoView({behavior:"smooth",block:"center"})});return}const r={Project:u.value,OtherSubsidies:b.value,BudgetPlans:n.value,Submit:i?"true":"false"};_.culture("saveFunding",r).subscribe(()=>{i&&(window.location.href=`Other.aspx?ID=${E.id}`)})},y=()=>{let i={ApplyAmount:{presence:{allowEmpty:!1,message:"^請輸入申請金額"},numericality:{greaterThan:0,message:"^申請金額不可為 0"}},SelfAmount:"自籌款"};return c.value=U(u.value,i),i={Unit:"單位名稱",Amount:{presence:{allowEmpty:!1,message:"^請輸入申請金額"},numericality:{greaterThan:0,message:"^申請金額不可為 0"}}},b.value.forEach((r,a)=>Object.assign(c.value,U(r,i,`other-${a}-`))),i={ItemID:{numericality:{greaterThan:0,message:"^請選擇工作項目"}},Title:"預算項目",Amount:"海委會經費",OtherAmount:"其他經費",Description:"計算方式及說明"},n.value.forEach((r,a)=>Object.assign(c.value,U(r,i,`plan-${a}-`))),!Object.keys(c.value).length};return e.onMounted(()=>{rxjs.forkJoin([_.culture("getFunding",{ID:E.id})]).subscribe(i=>{const r=i[0];u.value=r.Project,b.value=r.OtherSubsidies,n.value=r.BudgetPlans,V.value=r.Items,b.value.length||s(),n.value.length||f(),M().culture=u.value.FormStep})}),e.watchEffect(()=>{u.value.OtherAmount=b.value.reduce((i,r)=>i+(r.Deleted?0:I(r.Amount)),0),t.value=I(u.value.ApplyAmount)+I(u.value.SelfAmount)+I(u.value.OtherAmount),n.value.forEach(i=>i.sum=I(i.Amount)+I(i.OtherAmount))}),(i,r)=>{var C;const a=e.resolveComponent("input-integer"),h=e.resolveComponent("input-text"),w=e.resolveComponent("input-select");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",Ce,[r[14]||(r[14]=e.createElementVNode("h5",{class:"square-title"},"申請經費",-1)),e.createElementVNode("div",we,[e.createElementVNode("div",Ue,[e.createElementVNode("table",_e,[r[4]||(r[4]=e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[e.createElementVNode("th",null,"申請海委會補助／合作金額 (A)"),e.createElementVNode("th",null,"申請單位自籌款 (B)"),e.createElementVNode("th",null,"其他機關補助／合作總金額 (C)"),e.createElementVNode("th",null,"計畫總經費 (A+B+C)")])],-1)),e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[e.createElementVNode("td",null,[e.createVNode(a,{error:e.unref(c).ApplyAmount,modelValue:e.unref(u).ApplyAmount,"onUpdate:modelValue":r[0]||(r[0]=x=>e.unref(u).ApplyAmount=x)},null,8,["error","modelValue"])]),e.createElementVNode("td",null,[e.createVNode(a,{error:e.unref(c).SelfAmount,modelValue:e.unref(u).SelfAmount,"onUpdate:modelValue":r[1]||(r[1]=x=>e.unref(u).SelfAmount=x)},null,8,["error","modelValue"])]),e.createElementVNode("td",Ae,e.toDisplayString((C=e.unref(u).OtherAmount)==null?void 0:C.toLocaleString()),1),e.createElementVNode("td",Me,e.toDisplayString(e.unref(t).toLocaleString()),1)])])])]),r[9]||(r[9]=e.createElementVNode("ul",{class:"list-unstyled lh-base mb-3"},[e.createElementVNode("li",null,"補助申請單位為民間團體或學校者，配合款比例應為計畫總經費之 5％以上；"),e.createElementVNode("li",null,"合作申請單位之分攤比例應為計畫總經費之 20％以上。")],-1)),e.createElementVNode("table",Ie,[e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[r[8]||(r[8]=e.createElementVNode("th",null,"其他機關補助／合作金額 (C)",-1)),e.createElementVNode("td",null,[e.createElementVNode("div",Oe,[e.createElementVNode("table",je,[r[7]||(r[7]=e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[e.createElementVNode("th",{width:"1"}),e.createElementVNode("th",null,"單位名稱"),e.createElementVNode("th",null,[e.createTextVNode("申請／分攤補助金額"),e.createElementVNode("br"),e.createTextVNode("（含尚未核定者）")]),e.createElementVNode("th",{width:"1"})])],-1)),e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(l),(x,D)=>(e.openBlock(),e.createElementBlock("tr",{key:x},[e.createElementVNode("td",null,e.toDisplayString(D+1),1),e.createElementVNode("td",null,[e.createVNode(h,{error:e.unref(c)[`other-${D}-Unit`],modelValue:x.Unit,"onUpdate:modelValue":m=>x.Unit=m,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("td",null,[e.createVNode(a,{error:e.unref(c)[`other-${D}-Amount`],modelValue:x.Amount,"onUpdate:modelValue":m=>x.Amount=m},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("td",null,[e.createElementVNode("div",Fe,[e.unref(l).length>1?(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-sm btn-teal-dark m-0",onClick:m=>d(x),type:"button"},r[5]||(r[5]=[e.createElementVNode("i",{class:"fas fa-trash-alt"},null,-1)]),8,Pe)):e.createCommentVNode("",!0),D+1===e.unref(l).length?(e.openBlock(),e.createElementBlock("button",{key:1,class:"btn btn-sm btn-teal-dark m-0",onClick:s,type:"button"},r[6]||(r[6]=[e.createElementVNode("i",{class:"fas fa-plus"},null,-1)]))):e.createCommentVNode("",!0)])])]))),128))])])])])])])])]),r[15]||(r[15]=e.createElementVNode("h5",{class:"square-title"},"經費預算規劃",-1)),e.createElementVNode("div",Re,[e.createElementVNode("div",Le,[e.createElementVNode("table",qe,[r[12]||(r[12]=e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[e.createElementVNode("th",null,"重要工作項目"),e.createElementVNode("th",null,"預算項目"),e.createElementVNode("th",null,[e.createTextVNode("預算金額"),e.createElementVNode("br"),e.createTextVNode("海洋委員會經費")]),e.createElementVNode("th",null,[e.createTextVNode("預算金額"),e.createElementVNode("br"),e.createTextVNode("其他配合經費")]),e.createElementVNode("th",null,[e.createTextVNode("預算金額"),e.createElementVNode("br"),e.createTextVNode("小計")]),e.createElementVNode("th",null,"計算方式及說明"),e.createElementVNode("th",{width:"1"})])],-1)),e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(o),(x,D)=>(e.openBlock(),e.createElementBlock("tr",{key:x},[e.createElementVNode("td",null,[e.createVNode(w,{"empty-value":0,error:e.unref(c)[`plan-${D}-ItemID`],options:e.unref(V),"text-name":"Title","value-name":"ID",modelValue:x.ItemID,"onUpdate:modelValue":m=>x.ItemID=m},null,8,["error","options","modelValue","onUpdate:modelValue"])]),e.createElementVNode("td",null,[e.createVNode(h,{error:e.unref(c)[`plan-${D}-Title`],modelValue:x.Title,"onUpdate:modelValue":m=>x.Title=m,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("td",null,[e.createVNode(a,{error:e.unref(c)[`plan-${D}-Amount`],modelValue:x.Amount,"onUpdate:modelValue":m=>x.Amount=m},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("td",null,[e.createVNode(a,{error:e.unref(c)[`plan-${D}-OtherAmount`],modelValue:x.OtherAmount,"onUpdate:modelValue":m=>x.OtherAmount=m},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("td",ze,e.toDisplayString(x.sum.toLocaleString()),1),e.createElementVNode("td",null,[e.createVNode(h,{error:e.unref(c)[`plan-${D}-Description`],modelValue:x.Description,"onUpdate:modelValue":m=>x.Description=m,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("td",null,[e.createElementVNode("div",Ge,[e.unref(o).length>1?(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-sm btn-teal-dark m-0",onClick:m=>g(x),type:"button"},r[10]||(r[10]=[e.createElementVNode("i",{class:"fas fa-trash-alt"},null,-1)]),8,Je)):e.createCommentVNode("",!0),D+1===e.unref(o).length?(e.openBlock(),e.createElementBlock("button",{key:1,class:"btn btn-sm btn-teal-dark m-0",onClick:f,type:"button"},r[11]||(r[11]=[e.createElementVNode("i",{class:"fas fa-plus"},null,-1)]))):e.createCommentVNode("",!0)])])]))),128))])])]),r[13]||(r[13]=e.createElementVNode("div",{class:"fs-14 text-gray text-end"},"【計算方式及說明－範例】口訪工作人員之交通費：2,980（高雄─臺北）×2人=5,960元。",-1))])]),e.createElementVNode("div",Ye,[e.createElementVNode("button",{class:"btn btn-outline-teal me-3",onClick:r[2]||(r[2]=x=>N()),type:"button"},"暫存"),e.createElementVNode("button",{class:"btn btn-teal",onClick:r[3]||(r[3]=x=>N(!0)),type:"button"},r[16]||(r[16]=[e.createElementVNode("i",{class:"fas fa-check"},null,-1),e.createTextVNode("完成本頁，下一步",-1)]))])],64)}}},We={class:"block"},Ke={class:"border"},Xe={class:"bg-light-teal p-3 text-gray d-flex align-items-center gap-3"},Ze={class:"d-flex gap-2 align-items-center flex-grow-1"},He={class:"flex-grow-1"},ve={class:"d-flex gap-2"},et=["onClick"],tt={class:"collapse show",id:"workItem2"},lt={class:"table align-middle gray-table side-table mb-0"},nt={class:"block-bottom bg-light-teal"},rt={__name:"CultureOther",props:{id:{type:Number}},setup(p){const E=p,c=e.ref({}),u=e.ref([]),V=e.computed(()=>u.value.filter(o=>!o.Deleted)),b=()=>u.value.push({}),n=o=>o.Deleted=!0,t=o=>{if(o&&!l()){e.nextTick(()=>{var f;return(f=document.querySelector(".invalid"))==null?void 0:f.scrollIntoView({behavior:"smooth",block:"center"})});return}const s={ID:E.id,Projects:u.value,Submit:o?"true":"false"};_.culture("saveRelatedProject",s).subscribe(()=>{o&&(window.location.href=`Attachment.aspx?ID=${E.id}`)})},l=()=>{c.value={};const o={Title:"相關計畫名稱",Year:"執行年度",OrgName:"執行單位",Amount:{presence:{allowEmpty:!1,message:"^請輸入計畫經費"},numericality:{greaterThan:0,message:"^計畫經費不可為 0"}},Description:"內容摘述",Benefit:"執行效益"};return u.value.forEach((s,f)=>Object.assign(c.value,U(s,o,`project-${f}-`))),!Object.keys(c.value).length};return e.onMounted(()=>{rxjs.forkJoin([_.culture("getRelatedProject",{ID:E.id})]).subscribe(o=>{const s=o[0];u.value=s.Projects,M().culture=s.Project.FormStep})}),(o,s)=>{const f=e.resolveComponent("input-text"),d=e.resolveComponent("input-integer"),g=e.resolveComponent("input-textarea");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",We,[e.createElementVNode("h5",{class:"square-title"},[s[3]||(s[3]=e.createTextVNode(" 提案單位近三年執行相關計畫之成效及與本計畫之關聯性與差異性 ",-1)),e.createElementVNode("button",{class:"btn btn-teal-dark ms-3",onClick:b,type:"button"},s[2]||(s[2]=[e.createElementVNode("i",{class:"fas fa-plus"},null,-1),e.createTextVNode("新增計畫目標",-1)]))]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(V),(N,y)=>(e.openBlock(),e.createElementBlock("div",{class:"mt-4",key:N},[e.createElementVNode("div",Ke,[e.createElementVNode("div",Xe,[e.createElementVNode("div",Ze,[s[4]||(s[4]=e.createElementVNode("label",{class:"text-nowrap"},[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode("相關計畫名稱")],-1)),e.createElementVNode("div",He,[e.createVNode(f,{error:e.unref(c)[`project-${y}-Title`],modelValue:N.Title,"onUpdate:modelValue":i=>N.Title=i,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])])]),e.createElementVNode("div",ve,[e.createElementVNode("a",{class:"link-teal",onClick:e.withModifiers(i=>n(N),["prevent"]),href:"#"},"刪除",8,et),s[5]||(s[5]=e.createElementVNode("a",{"aria-expanded":"true",class:"link-teal","data-bs-toggle":"collapse",href:"#workItem2",role:"button"},"收合",-1))])]),e.createElementVNode("div",tt,[e.createElementVNode("table",lt,[e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[s[6]||(s[6]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 執行年度")],-1)),e.createElementVNode("td",null,[e.createVNode(d,{error:e.unref(c)[`project-${y}-Year`],class:"w-auto",modelValue:N.Year,"onUpdate:modelValue":i=>N.Year=i},null,8,["error","modelValue","onUpdate:modelValue"])])]),e.createElementVNode("tr",null,[s[7]||(s[7]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 執行單位")],-1)),e.createElementVNode("td",null,[e.createVNode(f,{error:e.unref(c)[`project-${y}-OrgName`],modelValue:N.OrgName,"onUpdate:modelValue":i=>N.OrgName=i,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])])]),e.createElementVNode("tr",null,[s[8]||(s[8]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 計畫經費(元)")],-1)),e.createElementVNode("td",null,[e.createVNode(d,{error:e.unref(c)[`project-${y}-Amount`],class:"w-auto",modelValue:N.Amount,"onUpdate:modelValue":i=>N.Amount=i},null,8,["error","modelValue","onUpdate:modelValue"])])]),e.createElementVNode("tr",null,[s[9]||(s[9]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 內容摘述")],-1)),e.createElementVNode("td",null,[e.createVNode(g,{error:e.unref(c)[`project-${y}-Description`],rows:"4",modelValue:N.Description,"onUpdate:modelValue":i=>N.Description=i,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])])]),e.createElementVNode("tr",null,[s[10]||(s[10]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 執行效益")],-1)),e.createElementVNode("td",null,[e.createVNode(g,{error:e.unref(c)[`project-${y}-Benefit`],rows:"4",modelValue:N.Benefit,"onUpdate:modelValue":i=>N.Benefit=i,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])])])])])])])]))),128))]),e.createElementVNode("div",nt,[e.createElementVNode("button",{class:"btn btn-outline-teal me-3",onClick:s[0]||(s[0]=N=>t()),type:"button"},"暫存"),e.createElementVNode("button",{class:"btn btn-teal",onClick:s[1]||(s[1]=N=>t(!0)),type:"button"},s[11]||(s[11]=[e.createElementVNode("i",{class:"fas fa-check"},null,-1),e.createTextVNode("完成本頁，下一步",-1)]))])],64)}}},ot={class:"application-step"},at=["onClick"],st={class:"step-content"},dt={class:"step-label"},it={key:0,class:"step-status edit"},ct={key:1,class:"step-status"},mt={__name:"CultureProgressBar",props:{id:{type:Number},review:{default:!1,type:Boolean},step:{required:!0,type:Number}},emits:["click"],setup(p,{emit:E}){const c=M(),u=p,V=[{step:1,title:"申請表／計畫書",url:"Application"},{step:2,title:"期程／工作項目／查核",url:"WorkSchedule"},{step:3,title:"經費",url:"Funding"},{step:4,title:"其他",url:"Other"},{step:5,title:"上傳附件／提送申請",url:"Attachment"}],b=t=>{u.review?n("click",t.step):t.step<=c.culture&&(location.href=`${t.url}.aspx?ID=${u.id}`)},n=E;return(t,l)=>(e.openBlock(),e.createElementBlock("div",ot,[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(V,o=>e.createElementVNode("div",{class:e.normalizeClass(["step-item",{active:o.step<=e.unref(c).culture}]),onClick:s=>b(o),key:o,role:"button"},[e.createElementVNode("div",st,[e.createElementVNode("div",dt,e.toDisplayString(o.title),1),o.step===p.step?(e.openBlock(),e.createElementBlock("div",it,"編輯中")):o.step<e.unref(c).culture?(e.openBlock(),e.createElementBlock("div",ct,"已完成")):e.createCommentVNode("",!0)])],10,at)),64))]))}},ut=(p,E)=>{const c=p.__vccOpts||p;for(const[u,V]of E)c[u]=V;return c},ft={class:"block"},pt={class:"mt-4"},Vt={class:"table align-middle gray-table side-table"},Nt={class:"d-flex align-items-center gap-2"},Et={class:"input-group w-auto"},bt={key:0,class:"invalid"},gt={class:"mt-4"},yt=["onClick"],kt={class:"d-flex flex-column gap-2"},ht={class:"mt-4 d-flex flex-column gap-2"},xt={class:"d-flex flex-column gap-3 mt-4"},$t={class:"bg-light-teal p-3 text-gray d-flex align-items-center gap-3"},St={class:"d-flex gap-2 align-items-center flex-grow-1"},Dt={class:"flex-grow-1"},Bt={class:"d-flex gap-2"},Tt=["onClick"],Ct={class:"collapse show",id:"workItem"},wt={class:"table align-middle gray-table side-table mb-0"},Ut={class:"item-list"},_t={class:"input-group"},At={key:0,class:"invalid"},Mt={class:"d-flex gap-2"},It=["onClick"],Ot=["onClick"],jt={class:"item-list"},Ft={class:"col-2"},Pt={class:"col-8"},Rt=["value"],Lt={class:"col-2 d-flex gap-2"},qt=["onClick"],zt=["onClick"],Gt={class:"col-2"},Jt={class:"col-8"},Yt=["value"],Qt={class:"col-2 d-flex gap-2"},Wt=["onClick"],Kt=["onClick"],Xt=["onClick"],Zt={class:"block-bottom bg-light-teal"},Ht=ut({__name:"CultureWorkSchedule",props:{id:{type:Number}},setup(p){const E=p,c=e.ref({}),u=e.ref({}),V=e.ref([]),b=e.computed(()=>V.value.filter(i=>!i.Deleted)),n=()=>{const i={Items:[]};t(i),V.value.push(i)},t=i=>{const r={Steps:[],Schedules:[]};o(r),o(r),o(r),l(r,1),l(r,2),i.Items.push(r)},l=(i,r)=>i.Schedules.push({Type:r,Month:0,StepID:0}),o=i=>i.Steps.push({Begin:0,End:0}),s=i=>i.Deleted=!0,f=i=>i.Deleted=!0,d=i=>i.Deleted=!0,g=i=>i.Deleted=!0,N=i=>{if(i&&!y()){e.nextTick(()=>{var a;return(a=document.querySelector(".invalid"))==null?void 0:a.scrollIntoView({behavior:"smooth",block:"center"})});return}const r={Project:u.value,Goals:V.value,Submit:i?"true":"false"};_.culture("saveWorkSchedule",r).subscribe(()=>{i&&(window.location.href=`Funding.aspx?ID=${E.id}`)})},y=()=>{const i={StartTime:"計畫期程",EndTime:"計畫期程"};c.value=U(u.value,i);const r={Title:"計畫目標",Content:"預期效益"},a={Title:"重要工作項目",Indicator:"績效指標"},h={Title:"實施步驟",Begin:{numericality:{greaterThan:0,message:"^請選擇起迄月份"}},End:{numericality:{greaterThan:0,message:"^請選擇起迄月份"}}},w={Month:{numericality:{greaterThan:0,message:"^請選擇月份"}},StepID:{numericality:{greaterThan:0,message:"^請選擇實施步驟"}}};return V.value.filter(C=>!C.Deleted).forEach((C,x)=>{Object.assign(c.value,U(C,r,`goal-${x}-`)),C.Items.filter(D=>!D.Deleted).forEach((D,m)=>{Object.assign(c.value,U(D,a,`item-${x}-${m}-`)),D.Steps.filter(k=>!k.Deleted).forEach((k,B)=>Object.assign(c.value,U(k,h,`step-${x}-${m}-${B}-`))),D.Schedules.filter(k=>k.Type===1&&!k.Deleted).forEach((k,B)=>Object.assign(c.value,U(k,w,`schedule-${x}-${m}-1-${B}-`))),D.Schedules.filter(k=>k.Type===2&&!k.Deleted).forEach((k,B)=>Object.assign(c.value,U(k,w,`schedule-${x}-${m}-2-${B}-`)))})}),!Object.keys(c.value).length};return e.onMounted(()=>{rxjs.forkJoin([_.culture("getWorkSchedule",{ID:E.id})]).subscribe(i=>{const r=i[0];u.value=r.Project,V.value=r.Goals,V.value.length||n(),M().culture=u.value.FormStep})}),(i,r)=>{const a=e.resolveComponent("input-tw-date"),h=e.resolveComponent("input-text"),w=e.resolveComponent("input-textarea"),C=e.resolveComponent("input-month"),x=e.resolveComponent("input-select");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",ft,[r[25]||(r[25]=e.createElementVNode("h5",{class:"square-title"},"期程",-1)),e.createElementVNode("div",pt,[e.createElementVNode("table",Vt,[e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[r[6]||(r[6]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 計畫期程")],-1)),e.createElementVNode("td",null,[e.createElementVNode("div",Nt,[e.createElementVNode("div",Et,[e.createVNode(a,{class:"w-auto",modelValue:e.unref(u).StartTime,"onUpdate:modelValue":r[0]||(r[0]=D=>e.unref(u).StartTime=D)},null,8,["modelValue"]),r[4]||(r[4]=e.createElementVNode("span",{class:"input-group-text"},"至",-1)),e.createVNode(a,{class:"w-auto",modelValue:e.unref(u).EndTime,"onUpdate:modelValue":r[1]||(r[1]=D=>e.unref(u).EndTime=D)},null,8,["modelValue"])]),r[5]||(r[5]=e.createElementVNode("span",{class:"text-teal-dark"},"(期程不可超過 115/04/30)",-1))]),e.unref(c).StartTime||e.unref(c).EndTime?(e.openBlock(),e.createElementBlock("div",bt,e.toDisplayString(e.unref(c).StartTime||e.unref(c).EndTime),1)):e.createCommentVNode("",!0)])])])])]),e.createElementVNode("h5",{class:"square-title"},[r[8]||(r[8]=e.createTextVNode(" 計畫目標／工作項目與步驟／工作進度與應檢核工作 ",-1)),e.createElementVNode("button",{class:"btn btn-teal-dark ms-3",onClick:n,type:"button"},r[7]||(r[7]=[e.createElementVNode("i",{class:"fas fa-plus"},null,-1),e.createTextVNode("新增計畫目標",-1)]))]),e.createElementVNode("div",gt,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(b),(D,m)=>(e.openBlock(),e.createElementBlock("div",{class:"block-form mt-3",key:D},[e.unref(b).length>1?(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-teal del",onClick:k=>s(D),type:"button"},"刪除",8,yt)):e.createCommentVNode("",!0),e.createElementVNode("div",kt,[r[9]||(r[9]=e.createElementVNode("label",{class:"text-teal-dark"},"計畫目標",-1)),e.createElementVNode("div",null,[e.createVNode(h,{error:e.unref(c)[`goal-${m}-Title`],placeholder:"例:挖掘消失的水路航道",modelValue:D.Title,"onUpdate:modelValue":k=>D.Title=k,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])])]),e.createElementVNode("div",ht,[r[10]||(r[10]=e.createElementVNode("label",{class:"text-teal-dark"},"預期效益（含量化或質化說明）",-1)),e.createElementVNode("div",null,[e.createVNode(w,{error:e.unref(c)[`goal-${m}-Content`],rows:"4",modelValue:D.Content,"onUpdate:modelValue":k=>D.Content=k,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])])]),e.createElementVNode("div",xt,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(D.Items.filter(k=>!k.Deleted),(k,B)=>(e.openBlock(),e.createElementBlock("div",{class:"border",key:k},[e.createElementVNode("div",$t,[e.createElementVNode("div",St,[r[11]||(r[11]=e.createElementVNode("label",{class:"text-nowrap"},[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 重要工作項目")],-1)),e.createElementVNode("div",Dt,[e.createVNode(h,{error:e.unref(c)[`item-${m}-${B}-Title`],placeholder:"例:調查研究",modelValue:k.Title,"onUpdate:modelValue":S=>k.Title=S,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])])]),e.createElementVNode("div",Bt,[D.Items.filter(S=>!S.Deleted).length>1?(e.openBlock(),e.createElementBlock("a",{key:0,class:"link-teal",onClick:e.withModifiers(S=>f(k),["prevent"]),href:"#"},"刪除",8,Tt)):e.createCommentVNode("",!0),r[12]||(r[12]=e.createElementVNode("a",{"aria-expanded":"true",class:"link-teal","data-bs-toggle":"collapse",href:"#workItem",role:"button"},"收合",-1))])]),e.createElementVNode("div",Ct,[e.createElementVNode("table",wt,[e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[r[16]||(r[16]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 實施步驟及起迄月份")],-1)),e.createElementVNode("td",null,[e.createElementVNode("ul",Ut,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(k.Steps.filter(S=>!S.Deleted),(S,A)=>(e.openBlock(),e.createElementBlock("li",{class:"step-item section-wrapper",key:S},[e.createElementVNode("div",null,e.toDisplayString(String.fromCharCode(65+A)),1),e.createElementVNode("div",null,[e.createVNode(h,{error:e.unref(c)[`step-${m}-${B}-${A}-Title`],placeholder:"例:進行口訪紀錄",modelValue:S.Title,"onUpdate:modelValue":T=>S.Title=T,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("div",null,[e.createElementVNode("div",_t,[e.createVNode(C,{"empty-value":0,modelValue:S.Begin,"onUpdate:modelValue":T=>S.Begin=T},null,8,["modelValue","onUpdate:modelValue"]),r[13]||(r[13]=e.createElementVNode("span",{class:"input-group-text"},"至",-1)),e.createVNode(C,{"empty-value":0,modelValue:S.End,"onUpdate:modelValue":T=>S.End=T},null,8,["modelValue","onUpdate:modelValue"])]),e.unref(c)[`step-${m}-${B}-${A}-Begin`]||e.unref(c)[`step-${m}-${B}-${A}-End`]?(e.openBlock(),e.createElementBlock("div",At,e.toDisplayString(e.unref(c)[`step-${m}-${B}-${A}-Begin`]||e.unref(c)[`step-${m}-${B}-${A}-End`]),1)):e.createCommentVNode("",!0)]),e.createElementVNode("div",Mt,[k.Steps.filter(T=>!T.Deleted).length>1?(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-sm btn-teal-dark m-0",onClick:T=>g(S),type:"button"},r[14]||(r[14]=[e.createElementVNode("i",{class:"fas fa-trash-alt"},null,-1)]),8,It)):e.createCommentVNode("",!0),e.createElementVNode("button",{class:"btn btn-sm btn-teal-dark m-0 add-btn",onClick:T=>o(k),type:"button"},r[15]||(r[15]=[e.createElementVNode("i",{class:"fas fa-plus"},null,-1)]),8,Ot)])]))),128))])])]),e.createElementVNode("tr",null,[r[17]||(r[17]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 績效指標")],-1)),e.createElementVNode("td",null,[e.createVNode(h,{error:e.unref(c)[`item-${m}-${B}-Indicator`],placeholder:"例:完成口訪資料1篇",modelValue:k.Indicator,"onUpdate:modelValue":S=>k.Indicator=S,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])])]),e.createElementVNode("tr",null,[r[24]||(r[24]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 工作進度")],-1)),e.createElementVNode("td",null,[e.createElementVNode("ul",jt,[e.createElementVNode("li",null,[e.createElementVNode("div",null,[r[20]||(r[20]=e.createElementVNode("div",{class:"fs-16 text-gray"},"工作進度達 50% 應檢核工作",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(k.Schedules.filter(S=>S.Type===1&&!S.Deleted),(S,A)=>(e.openBlock(),e.createElementBlock("div",{class:"row g-2 align-items-center mt-2 section-wrapper",key:S},[e.createElementVNode("div",Ft,[e.createVNode(C,{error:e.unref(c)[`schedule-${m}-${B}-1-${A}-Month`],"empty-value":0,modelValue:S.Month,"onUpdate:modelValue":T=>S.Month=T},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("div",Pt,[e.createVNode(x,{"empty-value":0,error:e.unref(c)[`schedule-${m}-${B}-2-${A}-StepID`],options:k.Steps.filter(T=>!T.Deleted),modelValue:S.StepID,"onUpdate:modelValue":T=>S.StepID=T},{default:e.withCtx(({index:T,option:F})=>[e.createElementVNode("option",{value:F.ID},e.toDisplayString(String.fromCharCode(65+T))+"."+e.toDisplayString(F.Title),9,Rt)]),_:2},1032,["error","options","modelValue","onUpdate:modelValue"])]),e.createElementVNode("div",Lt,[k.Schedules.filter(T=>T.Type===1&&!T.Deleted).length>1?(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-sm btn-teal-dark m-0",onClick:T=>d(S),type:"button"},r[18]||(r[18]=[e.createElementVNode("i",{class:"fas fa-trash-alt"},null,-1)]),8,qt)):e.createCommentVNode("",!0),e.createElementVNode("button",{class:"btn btn-sm btn-teal-dark m-0 add-btn",onClick:T=>l(k,1),type:"button"},r[19]||(r[19]=[e.createElementVNode("i",{class:"fas fa-plus"},null,-1)]),8,zt)])]))),128))])]),e.createElementVNode("li",null,[e.createElementVNode("div",null,[r[23]||(r[23]=e.createElementVNode("div",{class:"fs-16 text-gray"},"工作進度達 100% 應檢核工作",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(k.Schedules.filter(S=>S.Type===2&&!S.Deleted),(S,A)=>(e.openBlock(),e.createElementBlock("div",{class:"row g-2 align-items-center mt-2 section-wrapper",key:S},[e.createElementVNode("div",Gt,[e.createVNode(C,{error:e.unref(c)[`schedule-${m}-${B}-2-${A}-Month`],"empty-value":0,modelValue:S.Month,"onUpdate:modelValue":T=>S.Month=T},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("div",Jt,[e.createVNode(x,{"empty-value":0,error:e.unref(c)[`schedule-${m}-${B}-2-${A}-StepID`],options:k.Steps.filter(T=>!T.Deleted),modelValue:S.StepID,"onUpdate:modelValue":T=>S.StepID=T},{default:e.withCtx(({index:T,option:F})=>[e.createElementVNode("option",{value:F.ID},e.toDisplayString(String.fromCharCode(65+T))+"."+e.toDisplayString(F.Title),9,Yt)]),_:2},1032,["error","options","modelValue","onUpdate:modelValue"])]),e.createElementVNode("div",Qt,[k.Schedules.filter(T=>T.Type===2&&!T.Deleted).length>1?(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-sm btn-teal-dark m-0",onClick:T=>d(S),type:"button"},r[21]||(r[21]=[e.createElementVNode("i",{class:"fas fa-trash-alt"},null,-1)]),8,Wt)):e.createCommentVNode("",!0),e.createElementVNode("button",{class:"btn btn-sm btn-teal-dark m-0 add-btn",onClick:T=>l(k,2),type:"button"},r[22]||(r[22]=[e.createElementVNode("i",{class:"fas fa-plus"},null,-1)]),8,Kt)])]))),128))])])])])])])])])]))),128))]),e.createElementVNode("button",{class:"btn btn-teal mt-3",onClick:k=>t(D),type:"button"},"新增工作項目",8,Xt)]))),128))])]),e.createElementVNode("div",Zt,[e.createElementVNode("button",{class:"btn btn-outline-teal me-3",onClick:r[2]||(r[2]=D=>N()),type:"button"},"暫存"),e.createElementVNode("button",{class:"btn btn-teal",onClick:r[3]||(r[3]=D=>N(!0)),type:"button"},r[26]||(r[26]=[e.createElementVNode("i",{class:"fas fa-check"},null,-1),e.createTextVNode("完成本頁，下一步",-1)]))])],64)}}},[["__scopeId","data-v-c5f2faa1"]]),vt={__name:"InputBoolean",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(p){const E=e.useModel(p,"modelValue"),c=[{value:!0,text:"是"},{value:!1,text:"否"}];return(u,V)=>{const b=e.resolveComponent("input-radio-group");return e.openBlock(),e.createBlock(b,{options:c,modelValue:E.value,"onUpdate:modelValue":V[0]||(V[0]=n=>E.value=n)},null,8,["modelValue"])}}},el=["type"],tl={key:0,class:"invalid"},ll=Object.assign({inheritAttrs:!1},{__name:"InputInteger",props:e.mergeModels({error:{type:String},type:{default:"text",type:String}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(p){const E=e.useModel(p,"modelValue");return e.watch(E,c=>{if(c){const u=(parseInt(c)||0).toString();c.toString()!==u&&(E.value=u)}}),(c,u)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.withDirectives(e.createElementVNode("input",e.mergeProps({class:"form-control text-end",type:p.type},c.$attrs,{"onUpdate:modelValue":u[0]||(u[0]=V=>E.value=V)}),null,16,el),[[e.vModelDynamic,E.value]]),p.error?(e.openBlock(),e.createElementBlock("div",tl,e.toDisplayString(p.error),1)):e.createCommentVNode("",!0)],64))}}),nl={__name:"InputMonth",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(p){const E=e.useModel(p,"modelValue"),c=[];for(let u=1;u<=12;u++)c.push({value:u,text:`${u}月`});return(u,V)=>{const b=e.resolveComponent("input-select");return e.openBlock(),e.createBlock(b,{options:c,modelValue:E.value,"onUpdate:modelValue":V[0]||(V[0]=n=>E.value=n)},null,8,["modelValue"])}}},rl=["onChange","checked","id","value"],ol=["for"],al={__name:"InputRadioGroup",props:e.mergeModels({id:{default:()=>Te(),type:String},options:{default:[],type:Array},textName:{default:"text",type:String},valueName:{default:"value",type:String}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(p){const E=e.useModel(p,"modelValue"),c=u=>{E.value=u};return(u,V)=>(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.options,b=>(e.openBlock(),e.createElementBlock("div",{class:"form-check form-check-inline",key:b},[e.createElementVNode("input",{onChange:n=>c(b[p.valueName]),checked:b[p.valueName]===E.value,class:"form-check-input",id:`${p.id}-${b[p.valueName]}`,type:"radio",value:b[p.valueName]},null,40,rl),e.createElementVNode("label",{class:"form-check-label",for:`${p.id}-${b[p.valueName]}`},e.toDisplayString(b[p.textName]),9,ol)]))),128))}},sl=["value"],dl=["value"],il={key:0,class:"invalid"},cl=Object.assign({inheritAttrs:!1},{__name:"InputSelect",props:e.mergeModels({emptyValue:{type:[Number,String]},error:{type:String},options:{default:[],type:Array},placeholder:{default:"請選擇",type:String},textName:{default:"text",type:String},valueName:{default:"value",type:String}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(p){const E=e.useModel(p,"modelValue");return(c,u)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.withDirectives(e.createElementVNode("select",e.mergeProps({class:"form-select"},c.$attrs,{"onUpdate:modelValue":u[0]||(u[0]=V=>E.value=V)}),[E.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("option",{key:0,value:p.emptyValue},e.toDisplayString(p.placeholder),9,sl)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.options,(V,b)=>e.renderSlot(c.$slots,"default",{key:V,index:b,option:V},()=>[e.createElementVNode("option",{value:V[p.valueName]},e.toDisplayString(V[p.textName]),9,dl)])),128))],16),[[e.vModelSelect,E.value]]),p.error?(e.openBlock(),e.createElementBlock("div",il,e.toDisplayString(p.error),1)):e.createCommentVNode("",!0)],64))}}),ml=["type"],ul={key:0,class:"invalid"},fl=Object.assign({inheritAttrs:!1},{__name:"InputText",props:e.mergeModels({error:{type:String},type:{default:"text",type:String}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(p){const E=e.useModel(p,"modelValue");return(c,u)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.withDirectives(e.createElementVNode("input",e.mergeProps({class:"form-control",type:p.type},c.$attrs,{"onUpdate:modelValue":u[0]||(u[0]=V=>E.value=V)}),null,16,ml),[[e.vModelDynamic,E.value]]),p.error?(e.openBlock(),e.createElementBlock("div",ul,e.toDisplayString(p.error),1)):e.createCommentVNode("",!0)],64))}}),pl={key:0,class:"fs-14 text-gray mt-2"},Vl={class:"text-pink"},Nl={key:1,class:"invalid"},El=Object.assign({inheritAttrs:!1},{__name:"InputTextarea",props:e.mergeModels({error:{type:String},maxLength:{type:Number}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(p){const E=e.useModel(p,"modelValue"),c=p;return c.maxLength&&e.watch(E,()=>{var u;((u=E.value)==null?void 0:u.length)>c.maxLength&&(E.value=E.value.substring(0,c.maxLength))}),(u,V)=>{var b;return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.withDirectives(e.createElementVNode("textarea",e.mergeProps({class:"form-control"},u.$attrs,{"onUpdate:modelValue":V[0]||(V[0]=n=>E.value=n)}),null,16),[[e.vModelText,E.value]]),p.maxLength?(e.openBlock(),e.createElementBlock("div",pl,[V[1]||(V[1]=e.createTextVNode(" 已輸入 ",-1)),e.createElementVNode("span",Vl,e.toDisplayString((b=E.value)==null?void 0:b.length),1),e.createTextVNode(" 個字數(限"+e.toDisplayString(p.maxLength)+"字數) ",1)])):e.createCommentVNode("",!0),p.error?(e.openBlock(),e.createElementBlock("div",Nl,e.toDisplayString(p.error),1)):e.createCommentVNode("",!0)],64)}}}),bl={key:0,class:"invalid"},q={CultureApplication:$e,CultureAttachment:De,CultureFunding:Qe,CultureOther:rt,CultureProgressBar:mt,CultureWorkSchedule:Ht,InputBoolean:vt,InputInteger:ll,InputMonth:nl,InputRadioGroup:al,InputSelect:cl,InputText:fl,InputTextarea:El,InputTwDate:Object.assign({inheritAttrs:!1},{__name:"InputTwDate",props:{displayFormat:{default:"tYY/MM/DD",type:String},error:{type:String},format:{default:"YYYY-MM-DD",type:String},modelValue:{default:"",type:String},noFuture:{default:!1,type:Boolean}},emits:["update:modelValue"],setup(p,{emit:E}){let c;const u=p,V=e.ref(),b=e.ref(),n=E,t=l=>{!l&&u.modelValue&&(l=moment(new Date(u.modelValue))),l?(V.value=l.format(u.displayFormat),n("update:modelValue",l.format(u.format))):(V.value="",n("update:modelValue","")),c.setStartDate(V.value||void 0)};return e.onMounted(()=>{const l=$(b.value);l.daterangepicker({autoApply:!0,autoUpdateInput:!1,locale:{format:u.displayFormat},maxDate:u.noFuture?new Date:null,showDropdowns:!0,singleDatePicker:!0}).on("apply.daterangepicker",(o,s)=>t(s.startDate)),c=l.data("daterangepicker"),t()}),e.onUnmounted(()=>c.remove()),e.watch(()=>u.modelValue,()=>t()),(l,o)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.withDirectives(e.createElementVNode("input",e.mergeProps({class:"form-control datepicker",ref_key:"element",ref:b,type:"text"},l.$attrs,{"onUpdate:modelValue":o[0]||(o[0]=s=>e.isRef(V)?V.value=s:null)}),null,16),[[e.vModelText,e.unref(V)]]),p.error?(e.openBlock(),e.createElementBlock("div",bl,e.toDisplayString(p.error),1)):e.createCommentVNode("",!0)],64))}})};return{install:p=>{for(const E in q)p.component(E,q[E])}}}));
//# sourceMappingURL=ocean-subsidy-components.umd.js.map
