(function(e,O){typeof exports=="object"&&typeof module<"u"?module.exports=O(require("vue"),require("pinia")):typeof define=="function"&&define.amd?define(["vue","pinia"],O):(e=typeof globalThis<"u"?globalThis:e||self,e.OceanSubsidyComponents=O(e.Vue,e.Pinia))})(this,(function(e,O){"use strict";const{ajax:G}=rxjs.ajax,{map:J}=rxjs;let R="";const Y=(f,E={})=>P("Service/OFS/Culture.ashx",{method:f,param:E}),Q=f=>`${R}/Service/OFS/Download.ashx?path=${f}`,W=({response:f,status:E})=>{if(E===200&&f.success)return f.data},P=(f,E={})=>{const d={};E.constructor!==FormData&&(d["Content-Type"]="application/json");const u={body:E,headers:d,method:"POST",url:`${R}/${f}`};return G(u).pipe(J(W))},_=Object.assign(P,{culture:Y,download:Q,upload:f=>{const E=new FormData;return E.append("file",f),P("Service/OFS/Upload.ashx",E)}});function K(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var I={exports:{}};/*!
 * validate.js 0.13.1
 *
 * (c) 2013-2019 Nicklas Ansman, 2013 Wrapp
 * Validate.js may be freely distributed under the MIT license.
 * For all details and documentation:
 * http://validatejs.org/
 */var X=I.exports,L;function Z(){return L||(L=1,(function(f,E){(function(d,u,V){var b=function(l,t,r){r=n.extend({},n.options,r);var a=n.runValidations(l,t,r);if(a.some(function(i){return n.isPromise(i.error)}))throw new Error("Use validate.async if you want support for promises");return b.processValidationResults(a,r)},n=b;n.extend=function(l){return[].slice.call(arguments,1).forEach(function(t){for(var r in t)l[r]=t[r]}),l},n.extend(b,{version:{major:0,minor:13,patch:1,metadata:null,toString:function(){var l=n.format("%{major}.%{minor}.%{patch}",n.version);return n.isEmpty(n.version.metadata)||(l+="+"+n.version.metadata),l}},Promise:typeof Promise<"u"?Promise:null,EMPTY_STRING_REGEXP:/^\s*$/,runValidations:function(l,t,r){var a=[],i,c,g,N,y,m,o;(n.isDomElement(l)||n.isJqueryElement(l))&&(l=n.collectFormValues(l));for(i in t){g=n.getDeepObjectValue(l,i),N=n.result(t[i],g,l,i,r,t);for(c in N){if(y=n.validators[c],!y)throw o=n.format("Unknown validator %{name}",{name:c}),new Error(o);m=N[c],m=n.result(m,g,l,i,r,t),m&&a.push({attribute:i,value:g,validator:c,globalOptions:r,attributes:l,options:m,error:y.call(y,g,m,i,l,r)})}}return a},processValidationResults:function(l,t){l=n.pruneEmptyErrors(l,t),l=n.expandMultipleErrors(l,t),l=n.convertErrorMessages(l,t);var r=t.format||"grouped";if(typeof n.formatters[r]=="function")l=n.formatters[r](l);else throw new Error(n.format("Unknown format %{format}",t));return n.isEmpty(l)?void 0:l},async:function(l,t,r){r=n.extend({},n.async.options,r);var a=r.wrapErrors||function(c){return c};r.cleanAttributes!==!1&&(l=n.cleanAttributes(l,t));var i=n.runValidations(l,t,r);return new n.Promise(function(c,g){n.waitForResults(i).then(function(){var N=n.processValidationResults(i,r);N?g(new a(N,r,l,t)):c(l)},function(N){g(N)})})},single:function(l,t,r){return r=n.extend({},n.single.options,r,{format:"flat",fullMessages:!1}),n({single:l},{single:t},r)},waitForResults:function(l){return l.reduce(function(t,r){return n.isPromise(r.error)?t.then(function(){return r.error.then(function(a){r.error=a||null})}):t},new n.Promise(function(t){t()}))},result:function(l){var t=[].slice.call(arguments,1);return typeof l=="function"&&(l=l.apply(null,t)),l},isNumber:function(l){return typeof l=="number"&&!isNaN(l)},isFunction:function(l){return typeof l=="function"},isInteger:function(l){return n.isNumber(l)&&l%1===0},isBoolean:function(l){return typeof l=="boolean"},isObject:function(l){return l===Object(l)},isDate:function(l){return l instanceof Date},isDefined:function(l){return l!=null},isPromise:function(l){return!!l&&n.isFunction(l.then)},isJqueryElement:function(l){return l&&n.isString(l.jquery)},isDomElement:function(l){return!l||!l.querySelectorAll||!l.querySelector?!1:n.isObject(document)&&l===document?!0:typeof HTMLElement=="object"?l instanceof HTMLElement:l&&typeof l=="object"&&l!==null&&l.nodeType===1&&typeof l.nodeName=="string"},isEmpty:function(l){var t;if(!n.isDefined(l))return!0;if(n.isFunction(l))return!1;if(n.isString(l))return n.EMPTY_STRING_REGEXP.test(l);if(n.isArray(l))return l.length===0;if(n.isDate(l))return!1;if(n.isObject(l)){for(t in l)return!1;return!0}return!1},format:n.extend(function(l,t){return n.isString(l)?l.replace(n.format.FORMAT_REGEXP,function(r,a,i){return a==="%"?"%{"+i+"}":String(t[i])}):l},{FORMAT_REGEXP:/(%?)%\{([^\}]+)\}/g}),prettify:function(l){return n.isNumber(l)?l*100%1===0?""+l:parseFloat(Math.round(l*100)/100).toFixed(2):n.isArray(l)?l.map(function(t){return n.prettify(t)}).join(", "):n.isObject(l)?n.isDefined(l.toString)?l.toString():JSON.stringify(l):(l=""+l,l.replace(/([^\s])\.([^\s])/g,"$1 $2").replace(/\\+/g,"").replace(/[_-]/g," ").replace(/([a-z])([A-Z])/g,function(t,r,a){return""+r+" "+a.toLowerCase()}).toLowerCase())},stringifyValue:function(l,t){var r=t&&t.prettify||n.prettify;return r(l)},isString:function(l){return typeof l=="string"},isArray:function(l){return{}.toString.call(l)==="[object Array]"},isHash:function(l){return n.isObject(l)&&!n.isArray(l)&&!n.isFunction(l)},contains:function(l,t){return n.isDefined(l)?n.isArray(l)?l.indexOf(t)!==-1:t in l:!1},unique:function(l){return n.isArray(l)?l.filter(function(t,r,a){return a.indexOf(t)==r}):l},forEachKeyInKeypath:function(l,t,r){if(n.isString(t)){var a="",i,c=!1;for(i=0;i<t.length;++i)switch(t[i]){case".":c?(c=!1,a+="."):(l=r(l,a,!1),a="");break;case"\\":c?(c=!1,a+="\\"):c=!0;break;default:c=!1,a+=t[i];break}return r(l,a,!0)}},getDeepObjectValue:function(l,t){if(n.isObject(l))return n.forEachKeyInKeypath(l,t,function(r,a){if(n.isObject(r))return r[a]})},collectFormValues:function(l,t){var r={},a,i,c,g,N,y;if(n.isJqueryElement(l)&&(l=l[0]),!l)return r;for(t=t||{},g=l.querySelectorAll("input[name], textarea[name]"),a=0;a<g.length;++a)if(c=g.item(a),!n.isDefined(c.getAttribute("data-ignored"))){var m=c.name.replace(/\./g,"\\\\.");y=n.sanitizeFormValue(c.value,t),c.type==="number"?y=y?+y:null:c.type==="checkbox"?c.attributes.value?c.checked||(y=r[m]||null):y=c.checked:c.type==="radio"&&(c.checked||(y=r[m]||null)),r[m]=y}for(g=l.querySelectorAll("select[name]"),a=0;a<g.length;++a)if(c=g.item(a),!n.isDefined(c.getAttribute("data-ignored"))){if(c.multiple){y=[];for(i in c.options)N=c.options[i],N&&N.selected&&y.push(n.sanitizeFormValue(N.value,t))}else{var o=typeof c.options[c.selectedIndex]<"u"?c.options[c.selectedIndex].value:"";y=n.sanitizeFormValue(o,t)}r[c.name]=y}return r},sanitizeFormValue:function(l,t){return t.trim&&n.isString(l)&&(l=l.trim()),t.nullify!==!1&&l===""?null:l},capitalize:function(l){return n.isString(l)?l[0].toUpperCase()+l.slice(1):l},pruneEmptyErrors:function(l){return l.filter(function(t){return!n.isEmpty(t.error)})},expandMultipleErrors:function(l){var t=[];return l.forEach(function(r){n.isArray(r.error)?r.error.forEach(function(a){t.push(n.extend({},r,{error:a}))}):t.push(r)}),t},convertErrorMessages:function(l,t){t=t||{};var r=[],a=t.prettify||n.prettify;return l.forEach(function(i){var c=n.result(i.error,i.value,i.attribute,i.options,i.attributes,i.globalOptions);if(!n.isString(c)){r.push(i);return}c[0]==="^"?c=c.slice(1):t.fullMessages!==!1&&(c=n.capitalize(a(i.attribute))+" "+c),c=c.replace(/\\\^/g,"^"),c=n.format(c,{value:n.stringifyValue(i.value,t)}),r.push(n.extend({},i,{error:c}))}),r},groupErrorsByAttribute:function(l){var t={};return l.forEach(function(r){var a=t[r.attribute];a?a.push(r):t[r.attribute]=[r]}),t},flattenErrorsToArray:function(l){return l.map(function(t){return t.error}).filter(function(t,r,a){return a.indexOf(t)===r})},cleanAttributes:function(l,t){function r(c,g,N){return n.isObject(c[g])?c[g]:c[g]=N?!0:{}}function a(c){var g={},N;for(N in c)c[N]&&n.forEachKeyInKeypath(g,N,r);return g}function i(c,g){if(!n.isObject(c))return c;var N=n.extend({},c),y,m;for(m in c)y=g[m],n.isObject(y)?N[m]=i(N[m],y):y||delete N[m];return N}return!n.isObject(t)||!n.isObject(l)?{}:(t=a(t),i(l,t))},exposeModule:function(l,t,r,a,i){r?(a&&a.exports&&(r=a.exports=l),r.validate=l):(t.validate=l,l.isFunction(i)&&i.amd&&i([],function(){return l}))},warn:function(l){typeof console<"u"&&console.warn&&console.warn("[validate.js] "+l)},error:function(l){typeof console<"u"&&console.error&&console.error("[validate.js] "+l)}}),b.validators={presence:function(l,t){if(t=n.extend({},this.options,t),t.allowEmpty!==!1?!n.isDefined(l):n.isEmpty(l))return t.message||this.message||"can't be blank"},length:function(l,t,r){if(n.isDefined(l)){t=n.extend({},this.options,t);var a=t.is,i=t.maximum,c=t.minimum,g=t.tokenizer||function(o){return o},N,y=[];l=g(l);var m=l.length;if(!n.isNumber(m))return t.message||this.notValid||"has an incorrect length";if(n.isNumber(a)&&m!==a&&(N=t.wrongLength||this.wrongLength||"is the wrong length (should be %{count} characters)",y.push(n.format(N,{count:a}))),n.isNumber(c)&&m<c&&(N=t.tooShort||this.tooShort||"is too short (minimum is %{count} characters)",y.push(n.format(N,{count:c}))),n.isNumber(i)&&m>i&&(N=t.tooLong||this.tooLong||"is too long (maximum is %{count} characters)",y.push(n.format(N,{count:i}))),y.length>0)return t.message||y}},numericality:function(l,t,r,a,i){if(n.isDefined(l)){t=n.extend({},this.options,t);var c=[],g,N,y={greaterThan:function(w,C){return w>C},greaterThanOrEqualTo:function(w,C){return w>=C},equalTo:function(w,C){return w===C},lessThan:function(w,C){return w<C},lessThanOrEqualTo:function(w,C){return w<=C},divisibleBy:function(w,C){return w%C===0}},m=t.prettify||i&&i.prettify||n.prettify;if(n.isString(l)&&t.strict){var o="^-?(0|[1-9]\\d*)";if(t.onlyInteger||(o+="(\\.\\d+)?"),o+="$",!new RegExp(o).test(l))return t.message||t.notValid||this.notValid||this.message||"must be a valid number"}if(t.noStrings!==!0&&n.isString(l)&&!n.isEmpty(l)&&(l=+l),!n.isNumber(l))return t.message||t.notValid||this.notValid||this.message||"is not a number";if(t.onlyInteger&&!n.isInteger(l))return t.message||t.notInteger||this.notInteger||this.message||"must be an integer";for(g in y)if(N=t[g],n.isNumber(N)&&!y[g](l,N)){var s="not"+n.capitalize(g),h=t[s]||this[s]||this.message||"must be %{type} %{count}";c.push(n.format(h,{count:N,type:m(g)}))}if(t.odd&&l%2!==1&&c.push(t.notOdd||this.notOdd||this.message||"must be odd"),t.even&&l%2!==0&&c.push(t.notEven||this.notEven||this.message||"must be even"),c.length)return t.message||c}},datetime:n.extend(function(l,t){if(!n.isFunction(this.parse)||!n.isFunction(this.format))throw new Error("Both the parse and format functions needs to be set to use the datetime/date validator");if(n.isDefined(l)){t=n.extend({},this.options,t);var r,a=[],i=t.earliest?this.parse(t.earliest,t):NaN,c=t.latest?this.parse(t.latest,t):NaN;if(l=this.parse(l,t),isNaN(l)||t.dateOnly&&l%864e5!==0)return r=t.notValid||t.message||this.notValid||"must be a valid date",n.format(r,{value:arguments[0]});if(!isNaN(i)&&l<i&&(r=t.tooEarly||t.message||this.tooEarly||"must be no earlier than %{date}",r=n.format(r,{value:this.format(l,t),date:this.format(i,t)}),a.push(r)),!isNaN(c)&&l>c&&(r=t.tooLate||t.message||this.tooLate||"must be no later than %{date}",r=n.format(r,{date:this.format(c,t),value:this.format(l,t)}),a.push(r)),a.length)return n.unique(a)}},{parse:null,format:null}),date:function(l,t){return t=n.extend({},t,{dateOnly:!0}),n.validators.datetime.call(n.validators.datetime,l,t)},format:function(l,t){(n.isString(t)||t instanceof RegExp)&&(t={pattern:t}),t=n.extend({},this.options,t);var r=t.message||this.message||"is invalid",a=t.pattern,i;if(n.isDefined(l)&&(!n.isString(l)||(n.isString(a)&&(a=new RegExp(t.pattern,t.flags)),i=a.exec(l),!i||i[0].length!=l.length)))return r},inclusion:function(l,t){if(n.isDefined(l)&&(n.isArray(t)&&(t={within:t}),t=n.extend({},this.options,t),!n.contains(t.within,l))){var r=t.message||this.message||"^%{value} is not included in the list";return n.format(r,{value:l})}},exclusion:function(l,t){if(n.isDefined(l)&&(n.isArray(t)&&(t={within:t}),t=n.extend({},this.options,t),!!n.contains(t.within,l))){var r=t.message||this.message||"^%{value} is restricted";return n.isString(t.within[l])&&(l=t.within[l]),n.format(r,{value:l})}},email:n.extend(function(l,t){t=n.extend({},this.options,t);var r=t.message||this.message||"is not a valid email";if(n.isDefined(l)&&(!n.isString(l)||!this.PATTERN.exec(l)))return r},{PATTERN:/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i}),equality:function(l,t,r,a,i){if(n.isDefined(l)){n.isString(t)&&(t={attribute:t}),t=n.extend({},this.options,t);var c=t.message||this.message||"is not equal to %{attribute}";if(n.isEmpty(t.attribute)||!n.isString(t.attribute))throw new Error("The attribute must be a non empty string");var g=n.getDeepObjectValue(a,t.attribute),N=t.comparator||function(m,o){return m===o},y=t.prettify||i&&i.prettify||n.prettify;if(!N(l,g,t,r,a))return n.format(c,{attribute:y(t.attribute)})}},url:function(l,t){if(n.isDefined(l)){t=n.extend({},this.options,t);var r=t.message||this.message||"is not a valid url",a=t.schemes||this.schemes||["http","https"],i=t.allowLocal||this.allowLocal||!1,c=t.allowDataUrl||this.allowDataUrl||!1;if(!n.isString(l))return r;var g="^(?:(?:"+a.join("|")+")://)(?:\\S+(?::\\S*)?@)?(?:",N="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))";if(i?N+="?":g+="(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})",g+="(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+N+")(?::\\d{2,5})?(?:[/?#]\\S*)?$",c){var y="\\w+\\/[-+.\\w]+(?:;[\\w=]+)*",m="[A-Za-z0-9-_.!~\\*'();\\/?:@&=+$,%]*",o="data:(?:"+y+")?(?:;base64)?,"+m;g="(?:"+g+")|(?:^"+o+"$)"}var s=new RegExp(g,"i");if(!s.exec(l))return r}},type:n.extend(function(l,t,r,a,i){if(n.isString(t)&&(t={type:t}),!!n.isDefined(l)){var c=n.extend({},this.options,t),g=c.type;if(!n.isDefined(g))throw new Error("No type was specified");var N;if(n.isFunction(g)?N=g:N=this.types[g],!n.isFunction(N))throw new Error("validate.validators.type.types."+g+" must be a function.");if(!N(l,c,r,a,i)){var y=t.message||this.messages[g]||this.message||c.message||(n.isFunction(g)?"must be of the correct type":"must be of type %{type}");return n.isFunction(y)&&(y=y(l,t,r,a,i)),n.format(y,{attribute:n.prettify(r),type:g})}}},{types:{object:function(l){return n.isObject(l)&&!n.isArray(l)},array:n.isArray,integer:n.isInteger,number:n.isNumber,string:n.isString,date:n.isDate,boolean:n.isBoolean},messages:{}})},b.formatters={detailed:function(l){return l},flat:n.flattenErrorsToArray,grouped:function(l){var t;l=n.groupErrorsByAttribute(l);for(t in l)l[t]=n.flattenErrorsToArray(l[t]);return l},constraint:function(l){var t;l=n.groupErrorsByAttribute(l);for(t in l)l[t]=l[t].map(function(r){return r.validator}).sort();return l}},b.exposeModule(b,this,d,u,V)}).call(X,E,f,null)})(I,I.exports)),I.exports}var H=Z();const q=K(H),U=(f,E,d="")=>{const u={};Object.keys(E).forEach(n=>{const l=E[n];q.isString(l)?u[n]={presence:{allowEmpty:!1,message:`^請輸入${l}`}}:u[n]=l});const V={},b=q(f,u);return b&&Object.keys(b).forEach(n=>V[`${d}${n}`]=b[n].join(",")),V},M=O.defineStore("progress",{state:()=>({culture:1})}),v={class:"block"},ee={class:"mt-4"},te={class:"table align-middle gray-table side-table"},le={key:0},ne={key:1,class:"text-light-gray"},re={class:"d-flex gap-2"},oe={key:0,class:"invalid"},ae={key:0},se={class:"mt-4"},de={class:"table align-middle gray-table side-table"},ie={class:"row g-3"},ce={class:"col-12 col-xl-2"},me={class:"col-12 col-xl-2"},ue={class:"col-12 col-xl-3"},fe={class:"d-flex gap-2"},pe={class:"col-12 col-xl-2"},Ve={class:"col-12 col-xl-3"},Ne={class:"mt-4"},Ee={class:"table align-middle gray-table side-table"},ge={class:"mt-4"},be={class:"table align-middle gray-table side-table"},ye={key:0,class:"table-responsive sub-table mt-3 mb-0"},ke={class:"table align-middle gray-table"},he={class:"d-flex gap-2"},xe=["onClick"],$e={class:"block-bottom bg-light-teal"},Te={__name:"CultureApplication",props:{id:{type:Number}},setup(f){const E=f,d=e.ref([]),u=e.ref(),V=e.ref({}),b=e.ref(null),n=e.ref([]),l=e.computed(()=>a.value.filter(o=>!o.Deleted)),t=e.ref({}),r=e.computed(()=>n.value.filter(o=>!o.ParentCode)),a=e.ref([]),i=e.computed(()=>n.value.filter(o=>o.ParentCode===b.value)),c=e.computed({get:()=>!!l.value.length,set:o=>{o?g():a.value.forEach(s=>s.Deleted=!0)}}),g=()=>a.value.push({}),N=o=>o.Deleted=!0,y=o=>{if(o&&!m()){e.nextTick(()=>{var h;return(h=document.querySelector(".invalid"))==null?void 0:h.scrollIntoView({behavior:"smooth",block:"center"})});return}const s={Project:t.value,Contacts:u.value,ReceivedSubsidies:a.value.filter(h=>h.ID||!h.Deleted),Submit:o?"true":"false"};_.culture("saveApplication",s).subscribe(h=>{o?window.location.href=`WorkSchedule.aspx?ID=${h.ID}`:t.value.ID||(window.location.href=`Application.aspx?ID=${h.ID}`)})},m=()=>{let o={ProjectName:"計畫名稱",Field:"徵件類別",OrgName:"申請單位",OrgCategory:"申請單位類別",TaxID:"統一編號",Address:"立案聯絡地址",Target:"計畫目標",Summary:"計畫內容概要",Quantified:"預期效益(量化)",Qualitative:"預期效益(質化)"};return t.value.OrgCategory==="3"&&(o.RegisteredNum="立案登記證字號"),V.value=U(t.value,o),o={Name:"姓名",JobTitle:"職稱",MobilePhone:"手機號碼",EMail:"電子郵件"},u.value.forEach((s,h)=>Object.assign(V.value,U(s,o,`contact-${h}-`))),o={Name:"計畫名稱",Unit:"補助單位",Amount:{presence:{allowEmpty:!1,message:"^請輸入補助金額"},numericality:{greaterThan:0,message:"^補助金額不可為 0"}}},a.value.forEach((s,h)=>Object.assign(V.value,U(s,o,`received-${h}-`))),!Object.keys(V.value).length};return e.onMounted(()=>{rxjs.forkJoin([_.culture("getZgsCodes",{CodeGroup:"CULField"}),_.culture("getZgsCodes",{CodeGroup:"CULOrgCategory"})]).subscribe(o=>{n.value=o[0],d.value=o[1],E.id?_.culture("getApplication",{ID:E.id}).subscribe(s=>{var h;t.value=s.Project,u.value=s.Contacts,a.value=s.ReceivedSubsidies,b.value=((h=n.value.find(w=>w.Code===t.value.Field))==null?void 0:h.ParentCode)||null,t.value.OrgCategory=t.value.OrgCategory||null,M().culture=t.value.FormStep}):_.culture("getEmptyApplication").subscribe(s=>{b.value=null,t.value=Object.assign({Field:null,OrgCategory:null},s),u.value=[{Role:"負責人"},{Role:"聯絡人"}]})})}),e.watch(b,()=>{b.value?i.value.find(o=>t.value.Field===o.Code)||(t.value.Field=i.value[0].Code):t.value.Field=null}),(o,s)=>{const h=e.resolveComponent("input-text"),w=e.resolveComponent("input-select"),C=e.resolveComponent("input-textarea"),T=e.resolveComponent("input-boolean"),S=e.resolveComponent("input-integer");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",v,[s[40]||(s[40]=e.createElementVNode("h5",{class:"square-title"},"基本資料",-1)),e.createElementVNode("div",ee,[e.createElementVNode("table",te,[e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[s[15]||(s[15]=e.createElementVNode("th",null,"年度",-1)),e.createElementVNode("td",null,e.toDisplayString(e.unref(t).Year),1)]),e.createElementVNode("tr",null,[s[16]||(s[16]=e.createElementVNode("th",null,"計畫編號",-1)),e.createElementVNode("td",null,[e.unref(t).ProjectID?(e.openBlock(),e.createElementBlock("span",le,e.toDisplayString(e.unref(t).ProjectID),1)):(e.openBlock(),e.createElementBlock("span",ne,"儲存後由系統自動產生"))])]),e.createElementVNode("tr",null,[s[17]||(s[17]=e.createElementVNode("th",null,"補助計畫類別",-1)),e.createElementVNode("td",null,e.toDisplayString(e.unref(t).SubsidyPlanType),1)]),e.createElementVNode("tr",null,[s[18]||(s[18]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 計畫名稱")],-1)),e.createElementVNode("td",null,[e.createVNode(h,{error:e.unref(V).ProjectName,modelValue:e.unref(t).ProjectName,"onUpdate:modelValue":s[0]||(s[0]=p=>e.unref(t).ProjectName=p),modelModifiers:{trim:!0}},null,8,["error","modelValue"])])]),e.createElementVNode("tr",null,[s[19]||(s[19]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 徵件類別")],-1)),e.createElementVNode("td",null,[e.createElementVNode("div",re,[e.createVNode(w,{class:"w-auto","empty-value":null,options:e.unref(r),"text-name":"Descname","value-name":"Code",modelValue:e.unref(b),"onUpdate:modelValue":s[1]||(s[1]=p=>e.isRef(b)?b.value=p:null)},null,8,["options","modelValue"]),e.createVNode(w,{class:"w-auto","empty-value":null,disabled:!e.unref(b),options:e.unref(i),"text-name":"Descname","value-name":"Code",modelValue:e.unref(t).Field,"onUpdate:modelValue":s[2]||(s[2]=p=>e.unref(t).Field=p)},null,8,["disabled","options","modelValue"])]),e.unref(V).Field?(e.openBlock(),e.createElementBlock("div",oe,e.toDisplayString(e.unref(V).Field),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("tr",null,[s[20]||(s[20]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 申請單位")],-1)),e.createElementVNode("td",null,[e.createVNode(h,{error:e.unref(V).OrgName,modelValue:e.unref(t).OrgName,"onUpdate:modelValue":s[3]||(s[3]=p=>e.unref(t).OrgName=p),modelModifiers:{trim:!0}},null,8,["error","modelValue"])])]),e.createElementVNode("tr",null,[s[21]||(s[21]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 申請單位類別")],-1)),e.createElementVNode("td",null,[e.createVNode(w,{class:"w-auto","empty-value":null,error:e.unref(V).OrgCategory,options:e.unref(d),"text-name":"Descname","value-name":"Code",modelValue:e.unref(t).OrgCategory,"onUpdate:modelValue":s[4]||(s[4]=p=>e.unref(t).OrgCategory=p)},null,8,["error","options","modelValue"])])]),e.unref(t).OrgCategory==="3"?(e.openBlock(),e.createElementBlock("tr",ae,[s[22]||(s[22]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 立案登記證字號")],-1)),e.createElementVNode("td",null,[e.createVNode(h,{error:e.unref(V).RegisteredNum,modelValue:e.unref(t).RegisteredNum,"onUpdate:modelValue":s[5]||(s[5]=p=>e.unref(t).RegisteredNum=p),modelModifiers:{trim:!0}},null,8,["error","modelValue"])])])):e.createCommentVNode("",!0),e.createElementVNode("tr",null,[s[23]||(s[23]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 統一編號"),e.createElementVNode("br"),e.createTextVNode("(稅籍)")],-1)),e.createElementVNode("td",null,[e.createVNode(h,{error:e.unref(V).TaxID,modelValue:e.unref(t).TaxID,"onUpdate:modelValue":s[6]||(s[6]=p=>e.unref(t).TaxID=p),modelModifiers:{trim:!0}},null,8,["error","modelValue"])])]),e.createElementVNode("tr",null,[s[24]||(s[24]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 立案聯絡地址")],-1)),e.createElementVNode("td",null,[e.createVNode(h,{error:e.unref(V).Address,modelValue:e.unref(t).Address,"onUpdate:modelValue":s[7]||(s[7]=p=>e.unref(t).Address=p),modelModifiers:{trim:!0}},null,8,["error","modelValue"])])])])])]),s[41]||(s[41]=e.createElementVNode("h5",{class:"square-title mt-5"},"人員聯絡資訊",-1)),e.createElementVNode("div",se,[e.createElementVNode("table",de,[e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(u),(p,k)=>(e.openBlock(),e.createElementBlock("tr",{key:p},[e.createElementVNode("th",null,[s[25]||(s[25]=e.createElementVNode("span",{class:"text-pink"},"*",-1)),e.createTextVNode(" "+e.toDisplayString(p.Role),1)]),e.createElementVNode("td",null,[e.createElementVNode("div",ie,[e.createElementVNode("div",ce,[s[26]||(s[26]=e.createElementVNode("div",{class:"mb-2"},[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 姓名 ")],-1)),e.createVNode(h,{error:e.unref(V)[`contact-${k}-Name`],modelValue:p.Name,"onUpdate:modelValue":x=>p.Name=x,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("div",me,[s[27]||(s[27]=e.createElementVNode("div",{class:"mb-2"},[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 職稱 ")],-1)),e.createVNode(h,{error:e.unref(V)[`contact-${k}-JobTitle`],modelValue:p.JobTitle,"onUpdate:modelValue":x=>p.JobTitle=x,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("div",ue,[s[28]||(s[28]=e.createElementVNode("div",{class:"mb-2"}," 電話(分機) ",-1)),e.createElementVNode("div",fe,[e.createVNode(h,{modelValue:p.Phone,"onUpdate:modelValue":x=>p.Phone=x,modelModifiers:{trim:!0}},null,8,["modelValue","onUpdate:modelValue"]),e.createVNode(h,{class:"w-auto",placeholder:"分機",size:"4",modelValue:p.PhoneExt,"onUpdate:modelValue":x=>p.PhoneExt=x,modelModifiers:{trim:!0}},null,8,["modelValue","onUpdate:modelValue"])])]),e.createElementVNode("div",pe,[s[29]||(s[29]=e.createElementVNode("div",{class:"mb-2"},[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 手機號碼 ")],-1)),e.createVNode(h,{error:e.unref(V)[`contact-${k}-MobilePhone`],modelValue:p.MobilePhone,"onUpdate:modelValue":x=>p.MobilePhone=x,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("div",Ve,[s[30]||(s[30]=e.createElementVNode("div",{class:"mb-2"},[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 電子郵件 ")],-1)),e.createVNode(h,{error:e.unref(V)[`contact-${k}-EMail`],modelValue:p.EMail,"onUpdate:modelValue":x=>p.EMail=x,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])])])])]))),128))])])]),s[42]||(s[42]=e.createElementVNode("h5",{class:"square-title mt-5"},"計畫內容",-1)),e.createElementVNode("div",Ne,[e.createElementVNode("table",Ee,[e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[s[32]||(s[32]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 計畫目標"),e.createElementVNode("br"),e.createTextVNode("(條列式)")],-1)),e.createElementVNode("td",null,[s[31]||(s[31]=e.createElementVNode("div",{class:"fs-14 mb-2"},"對海洋文化發展、推廣或傳承之期待，包含落實海洋基本法、2020國家海洋政策白皮書與臺灣永續發展目標",-1)),e.createVNode(C,{error:e.unref(V).Target,"max-length":500,rows:"4",modelValue:e.unref(t).Target,"onUpdate:modelValue":s[8]||(s[8]=p=>e.unref(t).Target=p),modelModifiers:{trim:!0}},null,8,["error","modelValue"])])]),e.createElementVNode("tr",null,[s[33]||(s[33]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 計畫內容概要"),e.createElementVNode("br"),e.createTextVNode("(條列式)")],-1)),e.createElementVNode("td",null,[e.createVNode(C,{error:e.unref(V).Summary,"max-length":500,rows:"4",modelValue:e.unref(t).Summary,"onUpdate:modelValue":s[9]||(s[9]=p=>e.unref(t).Summary=p),modelModifiers:{trim:!0}},null,8,["error","modelValue"])])]),e.createElementVNode("tr",null,[s[34]||(s[34]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 預期效益"),e.createElementVNode("br"),e.createTextVNode("(量化)(條列式)")],-1)),e.createElementVNode("td",null,[e.createVNode(C,{error:e.unref(V).Quantified,"max-length":250,rows:"4",modelValue:e.unref(t).Quantified,"onUpdate:modelValue":s[10]||(s[10]=p=>e.unref(t).Quantified=p),modelModifiers:{trim:!0}},null,8,["error","modelValue"])])]),e.createElementVNode("tr",null,[s[35]||(s[35]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 預期效益"),e.createElementVNode("br"),e.createTextVNode("(質化)(條列式)")],-1)),e.createElementVNode("td",null,[e.createVNode(C,{error:e.unref(V).Qualitative,"max-length":250,rows:"4",modelValue:e.unref(t).Qualitative,"onUpdate:modelValue":s[11]||(s[11]=p=>e.unref(t).Qualitative=p),modelModifiers:{trim:!0}},null,8,["error","modelValue"])])])])])]),e.createElementVNode("div",ge,[e.createElementVNode("table",be,[e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[s[39]||(s[39]=e.createElementVNode("th",null,"最近三年曾獲本會及所屬補助／合作計畫及經費",-1)),e.createElementVNode("td",null,[e.createVNode(T,{modelValue:e.unref(c),"onUpdate:modelValue":s[12]||(s[12]=p=>e.isRef(c)?c.value=p:null)},null,8,["modelValue"]),e.unref(c)?(e.openBlock(),e.createElementBlock("div",ye,[e.createElementVNode("table",ke,[s[38]||(s[38]=e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[e.createElementVNode("th",null,"計畫名稱"),e.createElementVNode("th",null,"補助單位"),e.createElementVNode("th",null,"補助金額"),e.createElementVNode("th",null,"操作")])],-1)),e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(l),(p,k)=>(e.openBlock(),e.createElementBlock("tr",{key:p},[e.createElementVNode("td",null,[e.createVNode(h,{error:e.unref(V)[`received-${k}-Name`],modelValue:p.Name,"onUpdate:modelValue":x=>p.Name=x,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("td",null,[e.createVNode(h,{error:e.unref(V)[`received-${k}-Unit`],modelValue:p.Unit,"onUpdate:modelValue":x=>p.Unit=x,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("td",null,[e.createVNode(S,{error:e.unref(V)[`received-${k}-Amount`],modelValue:p.Amount,"onUpdate:modelValue":x=>p.Amount=x},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("td",null,[e.createElementVNode("div",he,[e.unref(l).length>1?(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-sm btn-teal-dark m-0",onClick:x=>N(p),type:"button"},s[36]||(s[36]=[e.createElementVNode("i",{class:"fas fa-trash-alt"},null,-1)]),8,xe)):e.createCommentVNode("",!0),k+1===e.unref(l).length?(e.openBlock(),e.createElementBlock("button",{key:1,class:"btn btn-sm btn-teal-dark m-0",onClick:g,type:"button"},s[37]||(s[37]=[e.createElementVNode("i",{class:"fas fa-plus"},null,-1)]))):e.createCommentVNode("",!0)])])]))),128))])])])):e.createCommentVNode("",!0)])])])])])]),e.createElementVNode("div",$e,[e.createElementVNode("button",{class:"btn btn-outline-teal me-3",onClick:s[13]||(s[13]=p=>y()),type:"button"},"暫存"),e.createElementVNode("button",{class:"btn btn-teal",onClick:s[14]||(s[14]=p=>y(!0)),type:"button"},s[43]||(s[43]=[e.createElementVNode("i",{class:"fas fa-check"},null,-1),e.createTextVNode("完成本頁，下一步",-1)]))])],64)}}},Be={class:"block"},Se={class:"mt-4"},De={class:"table align-middle gray-table"},Ce={class:"text-center"},we={key:0,class:"btn btn-sm btn-teal-dark rounded-pill mt-2",type:"button"},_e={class:"text-center"},Ue={key:0},Ae={key:1,class:"text-pink"},Me={key:1,class:"tag-group mt-2 gap-1"},Fe={key:0,class:"tag tag-green-light"},Oe=["download","href"],Ie=["onClick"],je={class:"block-bottom bg-light-teal"},Pe=["disabled"],Re={__name:"CultureAttachment",props:{id:{type:Number}},setup(f){const E=f,d=e.ref([{Type:1,Title:"申請表",Template:!0,Files:[]},{Type:2,Title:"申請捐（補）助計畫書",Template:!0,Files:[]},{Type:3,Title:"執行承諾書",Template:!0,Files:[],Excludes:["1"]},{Type:4,Title:"未違反公職人員利益衝突迴避法切結書及事前揭露表",Comment:"(與本計畫相關之補充資料、如立案證明、配合提案計畫邀集相關合作單位召開討論之會議紀錄等；若有合作對象，請附合作對象同意書)",Template:!0,Files:[]},{Type:5,Title:"附錄",Files:[],Multiple:!0}]),u=e.ref({}),V=e.computed(()=>d.value.some(t=>!t.Files.filter(r=>!r.Deleted).length)),b=(t,r)=>{r.Type==="application/pdf"&&t.Files.push({Type:t.Type,Path:r.Path,Name:u.value.ProjectID+"_"+(t.Multiple?r.Name:`${t.Title}.pdf`)})},n=_.download,l=t=>{const r={ID:E.id,Attachments:d.value.reduce((a,i)=>a.concat(i.Files),[]),Submit:t?"true":"false"};_.culture("saveAttachment",r).subscribe(()=>{})};return e.onMounted(()=>{rxjs.forkJoin([_.culture("getAttachment",{ID:E.id})]).subscribe(t=>{const r=t[0];u.value=r.Project,d.value=d.value.filter(a=>{var i;return!((i=a.Excludes)!=null&&i.includes(u.value.OrgCategory))}),d.value.forEach(a=>{a.Files=r.Attachments.filter(i=>i.Type===a.Type),a.Uploaded=e.computed(()=>a.Files.filter(i=>!i.Deleted).length)}),M().culture=r.Project.FormStep})}),(t,r)=>{const a=e.resolveComponent("input-file");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",Be,[r[6]||(r[6]=e.createElementVNode("h5",{class:"square-title"},"請下載範本填寫用印並上傳",-1)),r[7]||(r[7]=e.createElementVNode("p",{class:"text-pink lh-base mt-4"},[e.createTextVNode(" 請下載附件範本，填寫資料及公文用印後上傳（僅支援PDF格式上傳，每個檔案10MB以內）"),e.createElementVNode("br"),e.createTextVNode(" 計畫書請自行留存送審版電子檔，待決審核定經費後請提交修正計畫書以供核定。 ")],-1)),e.createElementVNode("div",Se,[e.createElementVNode("table",De,[r[5]||(r[5]=e.createElementVNode("thead",{class:"text-center"},[e.createElementVNode("tr",null,[e.createElementVNode("th",{width:"60"},"附件編號"),e.createElementVNode("th",null,"附件名稱"),e.createElementVNode("th",{width:"180"},"狀態"),e.createElementVNode("th",{width:"350"},"上傳附件")])],-1)),e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(d),(i,c)=>(e.openBlock(),e.createElementBlock("tr",{key:i},[e.createElementVNode("td",Ce,e.toDisplayString(c+1),1),e.createElementVNode("td",null,[e.createElementVNode("div",null,[r[2]||(r[2]=e.createElementVNode("span",{class:"text-pink"},"*",-1)),e.createTextVNode(" "+e.toDisplayString(i.Title),1)]),i.Template?(e.openBlock(),e.createElementBlock("button",we,r[3]||(r[3]=[e.createElementVNode("i",{class:"fas fa-file-download me-1"},null,-1),e.createTextVNode("範本下載 ",-1)]))):e.createCommentVNode("",!0)]),e.createElementVNode("td",_e,[i.Uploaded?(e.openBlock(),e.createElementBlock("span",Ue,"已上傳")):(e.openBlock(),e.createElementBlock("span",Ae,"尚未上傳"))]),e.createElementVNode("td",null,[i.Multiple||!i.Uploaded?(e.openBlock(),e.createBlock(a,{key:0,accept:".pdf",onFile:g=>b(i,g)},null,8,["onFile"])):e.createCommentVNode("",!0),i.Uploaded?(e.openBlock(),e.createElementBlock("div",Me,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.Files,g=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:g},[g.Deleted?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("span",Fe,[e.createElementVNode("a",{class:"tag-link",download:g.Name,href:e.unref(n)(g.Path)},e.toDisplayString(g.Name),9,Oe),e.createElementVNode("button",{class:"tag-btn",onClick:N=>g.Deleted=!0,type:"button"},r[4]||(r[4]=[e.createElementVNode("i",{class:"fa-solid fa-circle-xmark"},null,-1)]),8,Ie)]))],64))),128))])):e.createCommentVNode("",!0)])]))),128))])])])]),e.createElementVNode("div",je,[e.createElementVNode("button",{class:"btn btn-outline-teal me-3",onClick:r[0]||(r[0]=i=>l()),type:"button"},"暫存"),e.createElementVNode("button",{class:"btn btn-teal",onClick:r[1]||(r[1]=i=>l(!0)),disabled:e.unref(V),type:"button"},r[8]||(r[8]=[e.createElementVNode("i",{class:"fas fa-check"},null,-1),e.createTextVNode("全部完成，提送申請",-1)]),8,Pe)])],64)}}};let Le=Date.now();const qe=()=>`id--${Le++}`,F=f=>parseInt(f)||0,ze={class:"block"},Ge={class:"mt-4"},Je={class:"table-responsive mt-3 mb-0"},Ye={class:"table align-middle gray-table"},Qe={class:"text-end"},We={class:"text-end"},Ke={class:"table align-middle gray-table side-table"},Xe={class:"table-responsive sub-table mb-0"},Ze={class:"table align-middle gray-table"},He={class:"d-flex gap-2"},ve=["onClick"],et={class:"mt-4"},tt={class:"table-responsive mt-3 mb-0"},lt={class:"table align-middle gray-table"},nt={class:"text-end"},rt={class:"d-flex gap-2"},ot=["onClick"],at={class:"block-bottom bg-light-teal"},st={__name:"CultureFunding",props:{id:{type:Number}},setup(f){const E=f,d=e.ref({}),u=e.ref({}),V=e.ref([]),b=e.ref([]),n=e.ref([]),l=e.ref(0),t=e.computed(()=>b.value.filter(m=>!m.Deleted)),r=e.computed(()=>n.value.filter(m=>!m.Deleted)),a=()=>b.value.push({}),i=()=>n.value.push({ItemID:0}),c=m=>m.Deleted=!0,g=m=>m.Deleted=!0,N=m=>{if(m&&!y()){e.nextTick(()=>{var s;return(s=document.querySelector(".invalid"))==null?void 0:s.scrollIntoView({behavior:"smooth",block:"center"})});return}const o={Project:u.value,OtherSubsidies:b.value,BudgetPlans:n.value,Submit:m?"true":"false"};_.culture("saveFunding",o).subscribe(()=>{m&&(window.location.href=`Other.aspx?ID=${E.id}`)})},y=()=>{let m={ApplyAmount:{presence:{allowEmpty:!1,message:"^請輸入申請金額"},numericality:{greaterThan:0,message:"^申請金額不可為 0"}},SelfAmount:"自籌款"};return d.value=U(u.value,m),m={Unit:"單位名稱",Amount:{presence:{allowEmpty:!1,message:"^請輸入申請金額"},numericality:{greaterThan:0,message:"^申請金額不可為 0"}}},b.value.forEach((o,s)=>Object.assign(d.value,U(o,m,`other-${s}-`))),m={ItemID:{numericality:{greaterThan:0,message:"^請選擇工作項目"}},Title:"預算項目",Amount:"海委會經費",OtherAmount:"其他經費",Description:"計算方式及說明"},n.value.forEach((o,s)=>Object.assign(d.value,U(o,m,`plan-${s}-`))),!Object.keys(d.value).length};return e.onMounted(()=>{rxjs.forkJoin([_.culture("getFunding",{ID:E.id})]).subscribe(m=>{const o=m[0];u.value=o.Project,b.value=o.OtherSubsidies,n.value=o.BudgetPlans,V.value=o.Items,b.value.length||a(),n.value.length||i(),M().culture=u.value.FormStep})}),e.watchEffect(()=>{u.value.OtherAmount=b.value.reduce((m,o)=>m+(o.Deleted?0:F(o.Amount)),0),l.value=F(u.value.ApplyAmount)+F(u.value.SelfAmount)+F(u.value.OtherAmount),n.value.forEach(m=>m.sum=F(m.Amount)+F(m.OtherAmount))}),(m,o)=>{var C;const s=e.resolveComponent("input-integer"),h=e.resolveComponent("input-text"),w=e.resolveComponent("input-select");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",ze,[o[14]||(o[14]=e.createElementVNode("h5",{class:"square-title"},"申請經費",-1)),e.createElementVNode("div",Ge,[e.createElementVNode("div",Je,[e.createElementVNode("table",Ye,[o[4]||(o[4]=e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[e.createElementVNode("th",null,"申請海委會補助／合作金額 (A)"),e.createElementVNode("th",null,"申請單位自籌款 (B)"),e.createElementVNode("th",null,"其他機關補助／合作總金額 (C)"),e.createElementVNode("th",null,"計畫總經費 (A+B+C)")])],-1)),e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[e.createElementVNode("td",null,[e.createVNode(s,{error:e.unref(d).ApplyAmount,modelValue:e.unref(u).ApplyAmount,"onUpdate:modelValue":o[0]||(o[0]=T=>e.unref(u).ApplyAmount=T)},null,8,["error","modelValue"])]),e.createElementVNode("td",null,[e.createVNode(s,{error:e.unref(d).SelfAmount,modelValue:e.unref(u).SelfAmount,"onUpdate:modelValue":o[1]||(o[1]=T=>e.unref(u).SelfAmount=T)},null,8,["error","modelValue"])]),e.createElementVNode("td",Qe,e.toDisplayString((C=e.unref(u).OtherAmount)==null?void 0:C.toLocaleString()),1),e.createElementVNode("td",We,e.toDisplayString(e.unref(l).toLocaleString()),1)])])])]),o[9]||(o[9]=e.createElementVNode("ul",{class:"list-unstyled lh-base mb-3"},[e.createElementVNode("li",null,"補助申請單位為民間團體或學校者，配合款比例應為計畫總經費之 5％以上；"),e.createElementVNode("li",null,"合作申請單位之分攤比例應為計畫總經費之 20％以上。")],-1)),e.createElementVNode("table",Ke,[e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[o[8]||(o[8]=e.createElementVNode("th",null,"其他機關補助／合作金額 (C)",-1)),e.createElementVNode("td",null,[e.createElementVNode("div",Xe,[e.createElementVNode("table",Ze,[o[7]||(o[7]=e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[e.createElementVNode("th",{width:"1"}),e.createElementVNode("th",null,"單位名稱"),e.createElementVNode("th",null,[e.createTextVNode("申請／分攤補助金額"),e.createElementVNode("br"),e.createTextVNode("（含尚未核定者）")]),e.createElementVNode("th",{width:"1"})])],-1)),e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(t),(T,S)=>(e.openBlock(),e.createElementBlock("tr",{key:T},[e.createElementVNode("td",null,e.toDisplayString(S+1),1),e.createElementVNode("td",null,[e.createVNode(h,{error:e.unref(d)[`other-${S}-Unit`],modelValue:T.Unit,"onUpdate:modelValue":p=>T.Unit=p,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("td",null,[e.createVNode(s,{error:e.unref(d)[`other-${S}-Amount`],modelValue:T.Amount,"onUpdate:modelValue":p=>T.Amount=p},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("td",null,[e.createElementVNode("div",He,[e.unref(t).length>1?(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-sm btn-teal-dark m-0",onClick:p=>c(T),type:"button"},o[5]||(o[5]=[e.createElementVNode("i",{class:"fas fa-trash-alt"},null,-1)]),8,ve)):e.createCommentVNode("",!0),S+1===e.unref(t).length?(e.openBlock(),e.createElementBlock("button",{key:1,class:"btn btn-sm btn-teal-dark m-0",onClick:a,type:"button"},o[6]||(o[6]=[e.createElementVNode("i",{class:"fas fa-plus"},null,-1)]))):e.createCommentVNode("",!0)])])]))),128))])])])])])])])]),o[15]||(o[15]=e.createElementVNode("h5",{class:"square-title"},"經費預算規劃",-1)),e.createElementVNode("div",et,[e.createElementVNode("div",tt,[e.createElementVNode("table",lt,[o[12]||(o[12]=e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[e.createElementVNode("th",null,"重要工作項目"),e.createElementVNode("th",null,"預算項目"),e.createElementVNode("th",null,[e.createTextVNode("預算金額"),e.createElementVNode("br"),e.createTextVNode("海洋委員會經費")]),e.createElementVNode("th",null,[e.createTextVNode("預算金額"),e.createElementVNode("br"),e.createTextVNode("其他配合經費")]),e.createElementVNode("th",null,[e.createTextVNode("預算金額"),e.createElementVNode("br"),e.createTextVNode("小計")]),e.createElementVNode("th",null,"計算方式及說明"),e.createElementVNode("th",{width:"1"})])],-1)),e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(r),(T,S)=>(e.openBlock(),e.createElementBlock("tr",{key:T},[e.createElementVNode("td",null,[e.createVNode(w,{"empty-value":0,error:e.unref(d)[`plan-${S}-ItemID`],options:e.unref(V),"text-name":"Title","value-name":"ID",modelValue:T.ItemID,"onUpdate:modelValue":p=>T.ItemID=p},null,8,["error","options","modelValue","onUpdate:modelValue"])]),e.createElementVNode("td",null,[e.createVNode(h,{error:e.unref(d)[`plan-${S}-Title`],modelValue:T.Title,"onUpdate:modelValue":p=>T.Title=p,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("td",null,[e.createVNode(s,{error:e.unref(d)[`plan-${S}-Amount`],modelValue:T.Amount,"onUpdate:modelValue":p=>T.Amount=p},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("td",null,[e.createVNode(s,{error:e.unref(d)[`plan-${S}-OtherAmount`],modelValue:T.OtherAmount,"onUpdate:modelValue":p=>T.OtherAmount=p},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("td",nt,e.toDisplayString(T.sum.toLocaleString()),1),e.createElementVNode("td",null,[e.createVNode(h,{error:e.unref(d)[`plan-${S}-Description`],modelValue:T.Description,"onUpdate:modelValue":p=>T.Description=p,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("td",null,[e.createElementVNode("div",rt,[e.unref(r).length>1?(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-sm btn-teal-dark m-0",onClick:p=>g(T),type:"button"},o[10]||(o[10]=[e.createElementVNode("i",{class:"fas fa-trash-alt"},null,-1)]),8,ot)):e.createCommentVNode("",!0),S+1===e.unref(r).length?(e.openBlock(),e.createElementBlock("button",{key:1,class:"btn btn-sm btn-teal-dark m-0",onClick:i,type:"button"},o[11]||(o[11]=[e.createElementVNode("i",{class:"fas fa-plus"},null,-1)]))):e.createCommentVNode("",!0)])])]))),128))])])]),o[13]||(o[13]=e.createElementVNode("div",{class:"fs-14 text-gray text-end"},"【計算方式及說明－範例】口訪工作人員之交通費：2,980（高雄─臺北）×2人=5,960元。",-1))])]),e.createElementVNode("div",at,[e.createElementVNode("button",{class:"btn btn-outline-teal me-3",onClick:o[2]||(o[2]=T=>N()),type:"button"},"暫存"),e.createElementVNode("button",{class:"btn btn-teal",onClick:o[3]||(o[3]=T=>N(!0)),type:"button"},o[16]||(o[16]=[e.createElementVNode("i",{class:"fas fa-check"},null,-1),e.createTextVNode("完成本頁，下一步",-1)]))])],64)}}},dt={class:"block"},it={class:"border"},ct={class:"bg-light-teal p-3 text-gray d-flex align-items-center gap-3"},mt={class:"d-flex gap-2 align-items-center flex-grow-1"},ut={class:"flex-grow-1"},ft={class:"d-flex gap-2"},pt=["onClick"],Vt=["href"],Nt=["id"],Et={class:"table align-middle gray-table side-table mb-0"},gt={class:"block-bottom bg-light-teal"},bt={__name:"CultureOther",props:{id:{type:Number}},setup(f){const E=f,d=e.ref({}),u=e.ref([]),V=e.computed(()=>u.value.filter(r=>!r.Deleted)),b=()=>u.value.push({}),n=r=>r.Deleted=!0,l=r=>{if(r&&!t()){e.nextTick(()=>{var i;return(i=document.querySelector(".invalid"))==null?void 0:i.scrollIntoView({behavior:"smooth",block:"center"})});return}const a={ID:E.id,Projects:u.value,Submit:r?"true":"false"};_.culture("saveRelatedProject",a).subscribe(()=>{r&&(window.location.href=`Attachment.aspx?ID=${E.id}`)})},t=()=>{d.value={};const r={Title:"相關計畫名稱",Year:"執行年度",OrgName:"執行單位",Amount:{presence:{allowEmpty:!1,message:"^請輸入計畫經費"},numericality:{greaterThan:0,message:"^計畫經費不可為 0"}},Description:"內容摘述",Benefit:"執行效益"};return u.value.forEach((a,i)=>Object.assign(d.value,U(a,r,`project-${i}-`))),!Object.keys(d.value).length};return e.onMounted(()=>{rxjs.forkJoin([_.culture("getRelatedProject",{ID:E.id})]).subscribe(r=>{const a=r[0];u.value=a.Projects,M().culture=a.Project.FormStep})}),(r,a)=>{const i=e.resolveComponent("input-text"),c=e.resolveComponent("input-integer"),g=e.resolveComponent("input-textarea");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",dt,[e.createElementVNode("h5",{class:"square-title"},[a[3]||(a[3]=e.createTextVNode(" 提案單位近三年執行相關計畫之成效及與本計畫之關聯性與差異性 ",-1)),e.createElementVNode("button",{class:"btn btn-teal-dark ms-3",onClick:b,type:"button"},a[2]||(a[2]=[e.createElementVNode("i",{class:"fas fa-plus"},null,-1),e.createTextVNode("新增計畫目標",-1)]))]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(V),(N,y)=>(e.openBlock(),e.createElementBlock("div",{class:"mt-4",key:N},[e.createElementVNode("div",it,[e.createElementVNode("div",ct,[e.createElementVNode("div",mt,[a[4]||(a[4]=e.createElementVNode("label",{class:"text-nowrap"},[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode("相關計畫名稱")],-1)),e.createElementVNode("div",ut,[e.createVNode(i,{error:e.unref(d)[`project-${y}-Title`],modelValue:N.Title,"onUpdate:modelValue":m=>N.Title=m,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])])]),e.createElementVNode("div",ft,[e.createElementVNode("a",{class:"link-teal",onClick:e.withModifiers(m=>n(N),["prevent"]),href:"#"},"刪除",8,pt),e.createElementVNode("a",{"aria-expanded":"true",class:"link-teal","data-bs-toggle":"collapse",href:`#collapse-${y}`,role:"button"},"收合",8,Vt)])]),e.createElementVNode("div",{class:"collapse show",id:`collapse-${y}`},[e.createElementVNode("table",Et,[e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[a[5]||(a[5]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 執行年度")],-1)),e.createElementVNode("td",null,[e.createVNode(c,{error:e.unref(d)[`project-${y}-Year`],class:"w-auto",modelValue:N.Year,"onUpdate:modelValue":m=>N.Year=m},null,8,["error","modelValue","onUpdate:modelValue"])])]),e.createElementVNode("tr",null,[a[6]||(a[6]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 執行單位")],-1)),e.createElementVNode("td",null,[e.createVNode(i,{error:e.unref(d)[`project-${y}-OrgName`],modelValue:N.OrgName,"onUpdate:modelValue":m=>N.OrgName=m,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])])]),e.createElementVNode("tr",null,[a[7]||(a[7]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 計畫經費(元)")],-1)),e.createElementVNode("td",null,[e.createVNode(c,{error:e.unref(d)[`project-${y}-Amount`],class:"w-auto",modelValue:N.Amount,"onUpdate:modelValue":m=>N.Amount=m},null,8,["error","modelValue","onUpdate:modelValue"])])]),e.createElementVNode("tr",null,[a[8]||(a[8]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 內容摘述")],-1)),e.createElementVNode("td",null,[e.createVNode(g,{error:e.unref(d)[`project-${y}-Description`],rows:"4",modelValue:N.Description,"onUpdate:modelValue":m=>N.Description=m,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])])]),e.createElementVNode("tr",null,[a[9]||(a[9]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 執行效益")],-1)),e.createElementVNode("td",null,[e.createVNode(g,{error:e.unref(d)[`project-${y}-Benefit`],rows:"4",modelValue:N.Benefit,"onUpdate:modelValue":m=>N.Benefit=m,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])])])])])],8,Nt)])]))),128))]),e.createElementVNode("div",gt,[e.createElementVNode("button",{class:"btn btn-outline-teal me-3",onClick:a[0]||(a[0]=N=>l()),type:"button"},"暫存"),e.createElementVNode("button",{class:"btn btn-teal",onClick:a[1]||(a[1]=N=>l(!0)),type:"button"},a[10]||(a[10]=[e.createElementVNode("i",{class:"fas fa-check"},null,-1),e.createTextVNode("完成本頁，下一步",-1)]))])],64)}}},yt={class:"application-step"},kt=["onClick"],ht={class:"step-content"},xt={class:"step-label"},$t={key:0,class:"step-status edit"},Tt={key:1,class:"step-status"},Bt={__name:"CultureProgressBar",props:{id:{type:Number},review:{default:!1,type:Boolean},step:{required:!0,type:Number}},emits:["click"],setup(f,{emit:E}){const d=M(),u=f,V=[{step:1,title:"申請表／計畫書",url:"Application"},{step:2,title:"期程／工作項目／查核",url:"WorkSchedule"},{step:3,title:"經費",url:"Funding"},{step:4,title:"其他",url:"Other"},{step:5,title:"上傳附件／提送申請",url:"Attachment"}],b=l=>{u.review?n("click",l.step):l.step<=d.culture&&(location.href=`${l.url}.aspx?ID=${u.id}`)},n=E;return(l,t)=>(e.openBlock(),e.createElementBlock("div",yt,[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(V,r=>e.createElementVNode("div",{class:e.normalizeClass(["step-item",{active:r.step<=e.unref(d).culture}]),onClick:a=>b(r),key:r,role:"button"},[e.createElementVNode("div",ht,[e.createElementVNode("div",xt,e.toDisplayString(r.title),1),r.step===f.step?(e.openBlock(),e.createElementBlock("div",$t,"編輯中")):r.step<e.unref(d).culture?(e.openBlock(),e.createElementBlock("div",Tt,"已完成")):e.createCommentVNode("",!0)])],10,kt)),64))]))}},St=(f,E)=>{const d=f.__vccOpts||f;for(const[u,V]of E)d[u]=V;return d},Dt={class:"block"},Ct={class:"mt-4"},wt={class:"table align-middle gray-table side-table"},_t={class:"d-flex align-items-center gap-2"},Ut={class:"input-group w-auto"},At={key:0,class:"invalid"},Mt={class:"mt-4"},Ft=["onClick"],Ot={class:"d-flex flex-column gap-2"},It={class:"mt-4 d-flex flex-column gap-2"},jt={class:"d-flex flex-column gap-3 mt-4"},Pt={class:"bg-light-teal p-3 text-gray d-flex align-items-center gap-3"},Rt={class:"d-flex gap-2 align-items-center flex-grow-1"},Lt={class:"flex-grow-1"},qt={class:"d-flex gap-2"},zt=["onClick"],Gt=["href"],Jt=["id"],Yt={class:"table align-middle gray-table side-table mb-0"},Qt={class:"item-list"},Wt={class:"input-group"},Kt={key:0,class:"invalid"},Xt={class:"d-flex gap-2"},Zt=["onClick"],Ht=["onClick"],vt={class:"item-list"},el={class:"col-2"},tl={class:"col-8"},ll=["value"],nl={class:"col-2 d-flex gap-2"},rl=["onClick"],ol=["onClick"],al={class:"col-2"},sl={class:"col-8"},dl=["value"],il={class:"col-2 d-flex gap-2"},cl=["onClick"],ml=["onClick"],ul=["onClick"],fl={class:"block-bottom bg-light-teal"},pl=St({__name:"CultureWorkSchedule",props:{id:{type:Number}},setup(f){const E=f,d=e.ref({}),u=e.ref({}),V=e.ref([]),b=e.computed(()=>V.value.filter(m=>!m.Deleted)),n=()=>{const m={Items:[]};l(m),V.value.push(m)},l=m=>{const o={Steps:[],Schedules:[]};r(o),r(o),r(o),t(o,1),t(o,2),m.Items.push(o)},t=(m,o)=>m.Schedules.push({Type:o,Month:0,StepID:0}),r=m=>m.Steps.push({Begin:0,End:0}),a=m=>m.Deleted=!0,i=m=>m.Deleted=!0,c=m=>m.Deleted=!0,g=m=>m.Deleted=!0,N=m=>{if(m&&!y()){e.nextTick(()=>{var s;return(s=document.querySelector(".invalid"))==null?void 0:s.scrollIntoView({behavior:"smooth",block:"center"})});return}const o={Project:u.value,Goals:V.value,Submit:m?"true":"false"};_.culture("saveWorkSchedule",o).subscribe(()=>{m&&(window.location.href=`Funding.aspx?ID=${E.id}`)})},y=()=>{const m={StartTime:"計畫期程",EndTime:"計畫期程"};d.value=U(u.value,m);const o={Title:"計畫目標",Content:"預期效益"},s={Title:"重要工作項目",Indicator:"績效指標"},h={Title:"實施步驟",Begin:{numericality:{greaterThan:0,message:"^請選擇起迄月份"}},End:{numericality:{greaterThan:0,message:"^請選擇起迄月份"}}},w={Month:{numericality:{greaterThan:0,message:"^請選擇月份"}},StepID:{numericality:{greaterThan:0,message:"^請選擇實施步驟"}}};return V.value.filter(C=>!C.Deleted).forEach((C,T)=>{Object.assign(d.value,U(C,o,`goal-${T}-`)),C.Items.filter(S=>!S.Deleted).forEach((S,p)=>{Object.assign(d.value,U(S,s,`item-${T}-${p}-`)),S.Steps.filter(k=>!k.Deleted).forEach((k,x)=>Object.assign(d.value,U(k,h,`step-${T}-${p}-${x}-`))),S.Schedules.filter(k=>k.Type===1&&!k.Deleted).forEach((k,x)=>Object.assign(d.value,U(k,w,`schedule-${T}-${p}-1-${x}-`))),S.Schedules.filter(k=>k.Type===2&&!k.Deleted).forEach((k,x)=>Object.assign(d.value,U(k,w,`schedule-${T}-${p}-2-${x}-`)))})}),!Object.keys(d.value).length};return e.onMounted(()=>{rxjs.forkJoin([_.culture("getWorkSchedule",{ID:E.id})]).subscribe(m=>{const o=m[0];u.value=o.Project,V.value=o.Goals,V.value.length||n(),M().culture=u.value.FormStep})}),(m,o)=>{const s=e.resolveComponent("input-tw-date"),h=e.resolveComponent("input-text"),w=e.resolveComponent("input-textarea"),C=e.resolveComponent("input-month"),T=e.resolveComponent("input-select");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",Dt,[o[24]||(o[24]=e.createElementVNode("h5",{class:"square-title"},"期程",-1)),e.createElementVNode("div",Ct,[e.createElementVNode("table",wt,[e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[o[6]||(o[6]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 計畫期程")],-1)),e.createElementVNode("td",null,[e.createElementVNode("div",_t,[e.createElementVNode("div",Ut,[e.createVNode(s,{class:"w-auto",modelValue:e.unref(u).StartTime,"onUpdate:modelValue":o[0]||(o[0]=S=>e.unref(u).StartTime=S)},null,8,["modelValue"]),o[4]||(o[4]=e.createElementVNode("span",{class:"input-group-text"},"至",-1)),e.createVNode(s,{class:"w-auto",modelValue:e.unref(u).EndTime,"onUpdate:modelValue":o[1]||(o[1]=S=>e.unref(u).EndTime=S)},null,8,["modelValue"])]),o[5]||(o[5]=e.createElementVNode("span",{class:"text-teal-dark"},"(期程不可超過 115/04/30)",-1))]),e.unref(d).StartTime||e.unref(d).EndTime?(e.openBlock(),e.createElementBlock("div",At,e.toDisplayString(e.unref(d).StartTime||e.unref(d).EndTime),1)):e.createCommentVNode("",!0)])])])])]),e.createElementVNode("h5",{class:"square-title"},[o[8]||(o[8]=e.createTextVNode(" 計畫目標／工作項目與步驟／工作進度與應檢核工作 ",-1)),e.createElementVNode("button",{class:"btn btn-teal-dark ms-3",onClick:n,type:"button"},o[7]||(o[7]=[e.createElementVNode("i",{class:"fas fa-plus"},null,-1),e.createTextVNode("新增計畫目標",-1)]))]),e.createElementVNode("div",Mt,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(b),(S,p)=>(e.openBlock(),e.createElementBlock("div",{class:"block-form mt-3",key:S},[e.unref(b).length>1?(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-teal del",onClick:k=>a(S),type:"button"},"刪除",8,Ft)):e.createCommentVNode("",!0),e.createElementVNode("div",Ot,[o[9]||(o[9]=e.createElementVNode("label",{class:"text-teal-dark"},"計畫目標",-1)),e.createElementVNode("div",null,[e.createVNode(h,{error:e.unref(d)[`goal-${p}-Title`],placeholder:"例:挖掘消失的水路航道",modelValue:S.Title,"onUpdate:modelValue":k=>S.Title=k,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])])]),e.createElementVNode("div",It,[o[10]||(o[10]=e.createElementVNode("label",{class:"text-teal-dark"},"預期效益（含量化或質化說明）",-1)),e.createElementVNode("div",null,[e.createVNode(w,{error:e.unref(d)[`goal-${p}-Content`],rows:"4",modelValue:S.Content,"onUpdate:modelValue":k=>S.Content=k,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])])]),e.createElementVNode("div",jt,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(S.Items.filter(k=>!k.Deleted),(k,x)=>(e.openBlock(),e.createElementBlock("div",{class:"border",key:k},[e.createElementVNode("div",Pt,[e.createElementVNode("div",Rt,[o[11]||(o[11]=e.createElementVNode("label",{class:"text-nowrap"},[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 重要工作項目")],-1)),e.createElementVNode("div",Lt,[e.createVNode(h,{error:e.unref(d)[`item-${p}-${x}-Title`],placeholder:"例:調查研究",modelValue:k.Title,"onUpdate:modelValue":B=>k.Title=B,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])])]),e.createElementVNode("div",qt,[S.Items.filter(B=>!B.Deleted).length>1?(e.openBlock(),e.createElementBlock("a",{key:0,class:"link-teal",onClick:e.withModifiers(B=>i(k),["prevent"]),href:"#"},"刪除",8,zt)):e.createCommentVNode("",!0),e.createElementVNode("a",{"aria-expanded":"true",class:"link-teal","data-bs-toggle":"collapse",href:`#collapse-${x}`,role:"button"},"收合",8,Gt)])]),e.createElementVNode("div",{class:"collapse show",id:`collapse-${x}`},[e.createElementVNode("table",Yt,[e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[o[15]||(o[15]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 實施步驟及起迄月份")],-1)),e.createElementVNode("td",null,[e.createElementVNode("ul",Qt,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(k.Steps.filter(B=>!B.Deleted),(B,A)=>(e.openBlock(),e.createElementBlock("li",{class:"step-item section-wrapper",key:B},[e.createElementVNode("div",null,e.toDisplayString(String.fromCharCode(65+A)),1),e.createElementVNode("div",null,[e.createVNode(h,{error:e.unref(d)[`step-${p}-${x}-${A}-Title`],placeholder:"例:進行口訪紀錄",modelValue:B.Title,"onUpdate:modelValue":D=>B.Title=D,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("div",null,[e.createElementVNode("div",Wt,[e.createVNode(C,{"empty-value":0,modelValue:B.Begin,"onUpdate:modelValue":D=>B.Begin=D},null,8,["modelValue","onUpdate:modelValue"]),o[12]||(o[12]=e.createElementVNode("span",{class:"input-group-text"},"至",-1)),e.createVNode(C,{"empty-value":0,modelValue:B.End,"onUpdate:modelValue":D=>B.End=D},null,8,["modelValue","onUpdate:modelValue"])]),e.unref(d)[`step-${p}-${x}-${A}-Begin`]||e.unref(d)[`step-${p}-${x}-${A}-End`]?(e.openBlock(),e.createElementBlock("div",Kt,e.toDisplayString(e.unref(d)[`step-${p}-${x}-${A}-Begin`]||e.unref(d)[`step-${p}-${x}-${A}-End`]),1)):e.createCommentVNode("",!0)]),e.createElementVNode("div",Xt,[k.Steps.filter(D=>!D.Deleted).length>1?(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-sm btn-teal-dark m-0",onClick:D=>g(B),type:"button"},o[13]||(o[13]=[e.createElementVNode("i",{class:"fas fa-trash-alt"},null,-1)]),8,Zt)):e.createCommentVNode("",!0),e.createElementVNode("button",{class:"btn btn-sm btn-teal-dark m-0 add-btn",onClick:D=>r(k),type:"button"},o[14]||(o[14]=[e.createElementVNode("i",{class:"fas fa-plus"},null,-1)]),8,Ht)])]))),128))])])]),e.createElementVNode("tr",null,[o[16]||(o[16]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 績效指標")],-1)),e.createElementVNode("td",null,[e.createVNode(h,{error:e.unref(d)[`item-${p}-${x}-Indicator`],placeholder:"例:完成口訪資料1篇",modelValue:k.Indicator,"onUpdate:modelValue":B=>k.Indicator=B,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])])]),e.createElementVNode("tr",null,[o[23]||(o[23]=e.createElementVNode("th",null,[e.createElementVNode("span",{class:"text-pink"},"*"),e.createTextVNode(" 工作進度")],-1)),e.createElementVNode("td",null,[e.createElementVNode("ul",vt,[e.createElementVNode("li",null,[e.createElementVNode("div",null,[o[19]||(o[19]=e.createElementVNode("div",{class:"fs-16 text-gray"},"工作進度達 50% 應檢核工作",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(k.Schedules.filter(B=>B.Type===1&&!B.Deleted),(B,A)=>(e.openBlock(),e.createElementBlock("div",{class:"row g-2 align-items-center mt-2 section-wrapper",key:B},[e.createElementVNode("div",el,[e.createVNode(C,{error:e.unref(d)[`schedule-${p}-${x}-1-${A}-Month`],"empty-value":0,modelValue:B.Month,"onUpdate:modelValue":D=>B.Month=D},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("div",tl,[e.createVNode(T,{"empty-value":0,error:e.unref(d)[`schedule-${p}-${x}-2-${A}-StepID`],options:k.Steps.filter(D=>!D.Deleted),modelValue:B.StepID,"onUpdate:modelValue":D=>B.StepID=D},{default:e.withCtx(({index:D,option:j})=>[e.createElementVNode("option",{value:j.ID},e.toDisplayString(String.fromCharCode(65+D))+"."+e.toDisplayString(j.Title),9,ll)]),_:2},1032,["error","options","modelValue","onUpdate:modelValue"])]),e.createElementVNode("div",nl,[k.Schedules.filter(D=>D.Type===1&&!D.Deleted).length>1?(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-sm btn-teal-dark m-0",onClick:D=>c(B),type:"button"},o[17]||(o[17]=[e.createElementVNode("i",{class:"fas fa-trash-alt"},null,-1)]),8,rl)):e.createCommentVNode("",!0),e.createElementVNode("button",{class:"btn btn-sm btn-teal-dark m-0 add-btn",onClick:D=>t(k,1),type:"button"},o[18]||(o[18]=[e.createElementVNode("i",{class:"fas fa-plus"},null,-1)]),8,ol)])]))),128))])]),e.createElementVNode("li",null,[e.createElementVNode("div",null,[o[22]||(o[22]=e.createElementVNode("div",{class:"fs-16 text-gray"},"工作進度達 100% 應檢核工作",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(k.Schedules.filter(B=>B.Type===2&&!B.Deleted),(B,A)=>(e.openBlock(),e.createElementBlock("div",{class:"row g-2 align-items-center mt-2 section-wrapper",key:B},[e.createElementVNode("div",al,[e.createVNode(C,{error:e.unref(d)[`schedule-${p}-${x}-2-${A}-Month`],"empty-value":0,modelValue:B.Month,"onUpdate:modelValue":D=>B.Month=D},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("div",sl,[e.createVNode(T,{"empty-value":0,error:e.unref(d)[`schedule-${p}-${x}-2-${A}-StepID`],options:k.Steps.filter(D=>!D.Deleted),modelValue:B.StepID,"onUpdate:modelValue":D=>B.StepID=D},{default:e.withCtx(({index:D,option:j})=>[e.createElementVNode("option",{value:j.ID},e.toDisplayString(String.fromCharCode(65+D))+"."+e.toDisplayString(j.Title),9,dl)]),_:2},1032,["error","options","modelValue","onUpdate:modelValue"])]),e.createElementVNode("div",il,[k.Schedules.filter(D=>D.Type===2&&!D.Deleted).length>1?(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-sm btn-teal-dark m-0",onClick:D=>c(B),type:"button"},o[20]||(o[20]=[e.createElementVNode("i",{class:"fas fa-trash-alt"},null,-1)]),8,cl)):e.createCommentVNode("",!0),e.createElementVNode("button",{class:"btn btn-sm btn-teal-dark m-0 add-btn",onClick:D=>t(k,2),type:"button"},o[21]||(o[21]=[e.createElementVNode("i",{class:"fas fa-plus"},null,-1)]),8,ml)])]))),128))])])])])])])])],8,Jt)]))),128))]),e.createElementVNode("button",{class:"btn btn-teal mt-3",onClick:k=>l(S),type:"button"},"新增工作項目",8,ul)]))),128))])]),e.createElementVNode("div",fl,[e.createElementVNode("button",{class:"btn btn-outline-teal me-3",onClick:o[2]||(o[2]=S=>N()),type:"button"},"暫存"),e.createElementVNode("button",{class:"btn btn-teal",onClick:o[3]||(o[3]=S=>N(!0)),type:"button"},o[25]||(o[25]=[e.createElementVNode("i",{class:"fas fa-check"},null,-1),e.createTextVNode("完成本頁，下一步",-1)]))])],64)}}},[["__scopeId","data-v-acf58fd6"]]),Vl={__name:"InputBoolean",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(f){const E=e.useModel(f,"modelValue"),d=[{value:!0,text:"是"},{value:!1,text:"否"}];return(u,V)=>{const b=e.resolveComponent("input-radio-group");return e.openBlock(),e.createBlock(b,{options:d,modelValue:E.value,"onUpdate:modelValue":V[0]||(V[0]=n=>E.value=n)},null,8,["modelValue"])}}},Nl=Object.assign({inheritAttrs:!1},{__name:"InputFile",emits:["file"],setup(f,{emit:E}){const d=e.ref(),u=()=>{Array.from(d.value.files).forEach(b=>_.upload(b).subscribe(n=>V("file",n))),d.value.value=""},V=E;return(b,n)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("button",{class:"btn btn-teal-dark",onClick:n[0]||(n[0]=l=>e.unref(d).click()),type:"button"},n[1]||(n[1]=[e.createElementVNode("i",{class:"fas fa-file-upload me-1"},null,-1),e.createTextVNode("上傳",-1)])),e.createElementVNode("input",e.mergeProps({onChange:u,class:"d-none",ref_key:"input",ref:d,type:"file"},b.$attrs),null,16)],64))}}),El=["type"],gl={key:0,class:"invalid"},bl=Object.assign({inheritAttrs:!1},{__name:"InputInteger",props:e.mergeModels({error:{type:String},type:{default:"text",type:String}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(f){const E=e.useModel(f,"modelValue");return e.watch(E,d=>{if(d){const u=(parseInt(d)||0).toString();d.toString()!==u&&(E.value=u)}}),(d,u)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.withDirectives(e.createElementVNode("input",e.mergeProps({class:"form-control text-end",type:f.type},d.$attrs,{"onUpdate:modelValue":u[0]||(u[0]=V=>E.value=V)}),null,16,El),[[e.vModelDynamic,E.value]]),f.error?(e.openBlock(),e.createElementBlock("div",gl,e.toDisplayString(f.error),1)):e.createCommentVNode("",!0)],64))}}),yl={__name:"InputMonth",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(f){const E=e.useModel(f,"modelValue"),d=[];for(let u=1;u<=12;u++)d.push({value:u,text:`${u}月`});return(u,V)=>{const b=e.resolveComponent("input-select");return e.openBlock(),e.createBlock(b,{options:d,modelValue:E.value,"onUpdate:modelValue":V[0]||(V[0]=n=>E.value=n)},null,8,["modelValue"])}}},kl=["onChange","checked","id","value"],hl=["for"],xl={__name:"InputRadioGroup",props:e.mergeModels({id:{default:()=>qe(),type:String},options:{default:[],type:Array},textName:{default:"text",type:String},valueName:{default:"value",type:String}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(f){const E=e.useModel(f,"modelValue"),d=u=>{E.value=u};return(u,V)=>(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.options,b=>(e.openBlock(),e.createElementBlock("div",{class:"form-check form-check-inline",key:b},[e.createElementVNode("input",{onChange:n=>d(b[f.valueName]),checked:b[f.valueName]===E.value,class:"form-check-input",id:`${f.id}-${b[f.valueName]}`,type:"radio",value:b[f.valueName]},null,40,kl),e.createElementVNode("label",{class:"form-check-label",for:`${f.id}-${b[f.valueName]}`},e.toDisplayString(b[f.textName]),9,hl)]))),128))}},$l=["value"],Tl=["value"],Bl={key:0,class:"invalid"},Sl=Object.assign({inheritAttrs:!1},{__name:"InputSelect",props:e.mergeModels({emptyValue:{type:[Number,String]},error:{type:String},options:{default:[],type:Array},placeholder:{default:"請選擇",type:String},textName:{default:"text",type:String},valueName:{default:"value",type:String}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(f){const E=e.useModel(f,"modelValue");return(d,u)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.withDirectives(e.createElementVNode("select",e.mergeProps({class:"form-select"},d.$attrs,{"onUpdate:modelValue":u[0]||(u[0]=V=>E.value=V)}),[E.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("option",{key:0,value:f.emptyValue},e.toDisplayString(f.placeholder),9,$l)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.options,(V,b)=>e.renderSlot(d.$slots,"default",{key:V,index:b,option:V},()=>[e.createElementVNode("option",{value:V[f.valueName]},e.toDisplayString(V[f.textName]),9,Tl)])),128))],16),[[e.vModelSelect,E.value]]),f.error?(e.openBlock(),e.createElementBlock("div",Bl,e.toDisplayString(f.error),1)):e.createCommentVNode("",!0)],64))}}),Dl=["type"],Cl={key:0,class:"invalid"},wl=Object.assign({inheritAttrs:!1},{__name:"InputText",props:e.mergeModels({error:{type:String},type:{default:"text",type:String}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(f){const E=e.useModel(f,"modelValue");return(d,u)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.withDirectives(e.createElementVNode("input",e.mergeProps({class:"form-control",type:f.type},d.$attrs,{"onUpdate:modelValue":u[0]||(u[0]=V=>E.value=V)}),null,16,Dl),[[e.vModelDynamic,E.value]]),f.error?(e.openBlock(),e.createElementBlock("div",Cl,e.toDisplayString(f.error),1)):e.createCommentVNode("",!0)],64))}}),_l={key:0,class:"fs-14 text-gray mt-2"},Ul={class:"text-pink"},Al={key:1,class:"invalid"},Ml=Object.assign({inheritAttrs:!1},{__name:"InputTextarea",props:e.mergeModels({error:{type:String},maxLength:{type:Number}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(f){const E=e.useModel(f,"modelValue"),d=f;return d.maxLength&&e.watch(E,()=>{var u;((u=E.value)==null?void 0:u.length)>d.maxLength&&(E.value=E.value.substring(0,d.maxLength))}),(u,V)=>{var b;return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.withDirectives(e.createElementVNode("textarea",e.mergeProps({class:"form-control"},u.$attrs,{"onUpdate:modelValue":V[0]||(V[0]=n=>E.value=n)}),null,16),[[e.vModelText,E.value]]),f.maxLength?(e.openBlock(),e.createElementBlock("div",_l,[V[1]||(V[1]=e.createTextVNode(" 已輸入 ",-1)),e.createElementVNode("span",Ul,e.toDisplayString((b=E.value)==null?void 0:b.length),1),e.createTextVNode(" 個字數(限"+e.toDisplayString(f.maxLength)+"字數) ",1)])):e.createCommentVNode("",!0),f.error?(e.openBlock(),e.createElementBlock("div",Al,e.toDisplayString(f.error),1)):e.createCommentVNode("",!0)],64)}}}),Fl={key:0,class:"invalid"},z={CultureApplication:Te,CultureAttachment:Re,CultureFunding:st,CultureOther:bt,CultureProgressBar:Bt,CultureWorkSchedule:pl,InputBoolean:Vl,InputFile:Nl,InputInteger:bl,InputMonth:yl,InputRadioGroup:xl,InputSelect:Sl,InputText:wl,InputTextarea:Ml,InputTwDate:Object.assign({inheritAttrs:!1},{__name:"InputTwDate",props:{displayFormat:{default:"tYY/MM/DD",type:String},error:{type:String},format:{default:"YYYY-MM-DD",type:String},modelValue:{default:"",type:String},noFuture:{default:!1,type:Boolean}},emits:["update:modelValue"],setup(f,{emit:E}){let d;const u=f,V=e.ref(),b=e.ref(),n=E,l=t=>{!t&&u.modelValue&&(t=moment(new Date(u.modelValue))),t?(V.value=t.format(u.displayFormat),n("update:modelValue",t.format(u.format))):(V.value="",n("update:modelValue","")),d.setStartDate(V.value||void 0)};return e.onMounted(()=>{const t=$(b.value);t.daterangepicker({autoApply:!0,autoUpdateInput:!1,locale:{format:u.displayFormat},maxDate:u.noFuture?new Date:void 0,showDropdowns:!0,singleDatePicker:!0}).on("apply.daterangepicker",(r,a)=>l(a.startDate)),d=t.data("daterangepicker"),l()}),e.onUnmounted(()=>d.remove()),e.watch(()=>u.modelValue,()=>l()),(t,r)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.withDirectives(e.createElementVNode("input",e.mergeProps({class:"form-control datepicker",ref_key:"element",ref:b,type:"text"},t.$attrs,{"onUpdate:modelValue":r[0]||(r[0]=a=>e.isRef(V)?V.value=a:null)}),null,16),[[e.vModelText,e.unref(V)]]),f.error?(e.openBlock(),e.createElementBlock("div",Fl,e.toDisplayString(f.error),1)):e.createCommentVNode("",!0)],64))}})};return{install:f=>{for(const E in z)f.component(E,z[E])}}}));
//# sourceMappingURL=ocean-subsidy-components.umd.js.map
