(function(e,O){typeof exports=="object"&&typeof module<"u"?module.exports=O(require("vue"),require("pinia")):typeof define=="function"&&define.amd?define(["vue","pinia"],O):(e=typeof globalThis<"u"?globalThis:e||self,e.OceanSubsidyComponents=O(e.Vue,e.Pinia))})(this,(function(e,O){"use strict";let Q=Date.now();const I=(m,E)=>m===1,W=()=>`id--${Q++}`,j=m=>parseInt(m)||0,q=O.defineStore("message",{state:()=>({error:null})}),{ajax:K}=rxjs.ajax,{map:X}=rxjs;let z="";const Z=(m,E={})=>L("Service/OFS/Culture.ashx",{method:m,param:E}),H=m=>`${z}/Service/OFS/Download.ashx?path=${m}`,v=({response:m,status:E})=>{if(E===200){if(m.success)return m.data;q().error=m.message}},L=(m,E={})=>{const f={};E.constructor!==FormData&&(f["Content-Type"]="application/json");const i={body:E,headers:f,method:"POST",url:`${z}/${m}`};return K(i).pipe(X(v))},U=Object.assign(L,{culture:Z,download:H,upload:m=>{const E=new FormData;return E.append("file",m),L("Service/OFS/Upload.ashx",E)}});function ee(m){return m&&m.__esModule&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m}var P={exports:{}};/*!
 * validate.js 0.13.1
 *
 * (c) 2013-2019 Nicklas Ansman, 2013 Wrapp
 * Validate.js may be freely distributed under the MIT license.
 * For all details and documentation:
 * http://validatejs.org/
 */var te=P.exports,G;function le(){return G||(G=1,(function(m,E){(function(f,i,p){var u=function(t,l,o){o=n.extend({},n.options,o);var d=n.runValidations(t,l,o);if(d.some(function(c){return n.isPromise(c.error)}))throw new Error("Use validate.async if you want support for promises");return u.processValidationResults(d,o)},n=u;n.extend=function(t){return[].slice.call(arguments,1).forEach(function(l){for(var o in l)t[o]=l[o]}),t},n.extend(u,{version:{major:0,minor:13,patch:1,metadata:null,toString:function(){var t=n.format("%{major}.%{minor}.%{patch}",n.version);return n.isEmpty(n.version.metadata)||(t+="+"+n.version.metadata),t}},Promise:typeof Promise<"u"?Promise:null,EMPTY_STRING_REGEXP:/^\s*$/,runValidations:function(t,l,o){var d=[],c,s,k,g,y,h,N;(n.isDomElement(t)||n.isJqueryElement(t))&&(t=n.collectFormValues(t));for(c in l){k=n.getDeepObjectValue(t,c),g=n.result(l[c],k,t,c,o,l);for(s in g){if(y=n.validators[s],!y)throw N=n.format("Unknown validator %{name}",{name:s}),new Error(N);h=g[s],h=n.result(h,k,t,c,o,l),h&&d.push({attribute:c,value:k,validator:s,globalOptions:o,attributes:t,options:h,error:y.call(y,k,h,c,t,o)})}}return d},processValidationResults:function(t,l){t=n.pruneEmptyErrors(t,l),t=n.expandMultipleErrors(t,l),t=n.convertErrorMessages(t,l);var o=l.format||"grouped";if(typeof n.formatters[o]=="function")t=n.formatters[o](t);else throw new Error(n.format("Unknown format %{format}",l));return n.isEmpty(t)?void 0:t},async:function(t,l,o){o=n.extend({},n.async.options,o);var d=o.wrapErrors||function(s){return s};o.cleanAttributes!==!1&&(t=n.cleanAttributes(t,l));var c=n.runValidations(t,l,o);return new n.Promise(function(s,k){n.waitForResults(c).then(function(){var g=n.processValidationResults(c,o);g?k(new d(g,o,t,l)):s(t)},function(g){k(g)})})},single:function(t,l,o){return o=n.extend({},n.single.options,o,{format:"flat",fullMessages:!1}),n({single:t},{single:l},o)},waitForResults:function(t){return t.reduce(function(l,o){return n.isPromise(o.error)?l.then(function(){return o.error.then(function(d){o.error=d||null})}):l},new n.Promise(function(l){l()}))},result:function(t){var l=[].slice.call(arguments,1);return typeof t=="function"&&(t=t.apply(null,l)),t},isNumber:function(t){return typeof t=="number"&&!isNaN(t)},isFunction:function(t){return typeof t=="function"},isInteger:function(t){return n.isNumber(t)&&t%1===0},isBoolean:function(t){return typeof t=="boolean"},isObject:function(t){return t===Object(t)},isDate:function(t){return t instanceof Date},isDefined:function(t){return t!=null},isPromise:function(t){return!!t&&n.isFunction(t.then)},isJqueryElement:function(t){return t&&n.isString(t.jquery)},isDomElement:function(t){return!t||!t.querySelectorAll||!t.querySelector?!1:n.isObject(document)&&t===document?!0:typeof HTMLElement=="object"?t instanceof HTMLElement:t&&typeof t=="object"&&t!==null&&t.nodeType===1&&typeof t.nodeName=="string"},isEmpty:function(t){var l;if(!n.isDefined(t))return!0;if(n.isFunction(t))return!1;if(n.isString(t))return n.EMPTY_STRING_REGEXP.test(t);if(n.isArray(t))return t.length===0;if(n.isDate(t))return!1;if(n.isObject(t)){for(l in t)return!1;return!0}return!1},format:n.extend(function(t,l){return n.isString(t)?t.replace(n.format.FORMAT_REGEXP,function(o,d,c){return d==="%"?"%{"+c+"}":String(l[c])}):t},{FORMAT_REGEXP:/(%?)%\{([^\}]+)\}/g}),prettify:function(t){return n.isNumber(t)?t*100%1===0?""+t:parseFloat(Math.round(t*100)/100).toFixed(2):n.isArray(t)?t.map(function(l){return n.prettify(l)}).join(", "):n.isObject(t)?n.isDefined(t.toString)?t.toString():JSON.stringify(t):(t=""+t,t.replace(/([^\s])\.([^\s])/g,"$1 $2").replace(/\\+/g,"").replace(/[_-]/g," ").replace(/([a-z])([A-Z])/g,function(l,o,d){return""+o+" "+d.toLowerCase()}).toLowerCase())},stringifyValue:function(t,l){var o=l&&l.prettify||n.prettify;return o(t)},isString:function(t){return typeof t=="string"},isArray:function(t){return{}.toString.call(t)==="[object Array]"},isHash:function(t){return n.isObject(t)&&!n.isArray(t)&&!n.isFunction(t)},contains:function(t,l){return n.isDefined(t)?n.isArray(t)?t.indexOf(l)!==-1:l in t:!1},unique:function(t){return n.isArray(t)?t.filter(function(l,o,d){return d.indexOf(l)==o}):t},forEachKeyInKeypath:function(t,l,o){if(n.isString(l)){var d="",c,s=!1;for(c=0;c<l.length;++c)switch(l[c]){case".":s?(s=!1,d+="."):(t=o(t,d,!1),d="");break;case"\\":s?(s=!1,d+="\\"):s=!0;break;default:s=!1,d+=l[c];break}return o(t,d,!0)}},getDeepObjectValue:function(t,l){if(n.isObject(t))return n.forEachKeyInKeypath(t,l,function(o,d){if(n.isObject(o))return o[d]})},collectFormValues:function(t,l){var o={},d,c,s,k,g,y;if(n.isJqueryElement(t)&&(t=t[0]),!t)return o;for(l=l||{},k=t.querySelectorAll("input[name], textarea[name]"),d=0;d<k.length;++d)if(s=k.item(d),!n.isDefined(s.getAttribute("data-ignored"))){var h=s.name.replace(/\./g,"\\\\.");y=n.sanitizeFormValue(s.value,l),s.type==="number"?y=y?+y:null:s.type==="checkbox"?s.attributes.value?s.checked||(y=o[h]||null):y=s.checked:s.type==="radio"&&(s.checked||(y=o[h]||null)),o[h]=y}for(k=t.querySelectorAll("select[name]"),d=0;d<k.length;++d)if(s=k.item(d),!n.isDefined(s.getAttribute("data-ignored"))){if(s.multiple){y=[];for(c in s.options)g=s.options[c],g&&g.selected&&y.push(n.sanitizeFormValue(g.value,l))}else{var N=typeof s.options[s.selectedIndex]<"u"?s.options[s.selectedIndex].value:"";y=n.sanitizeFormValue(N,l)}o[s.name]=y}return o},sanitizeFormValue:function(t,l){return l.trim&&n.isString(t)&&(t=t.trim()),l.nullify!==!1&&t===""?null:t},capitalize:function(t){return n.isString(t)?t[0].toUpperCase()+t.slice(1):t},pruneEmptyErrors:function(t){return t.filter(function(l){return!n.isEmpty(l.error)})},expandMultipleErrors:function(t){var l=[];return t.forEach(function(o){n.isArray(o.error)?o.error.forEach(function(d){l.push(n.extend({},o,{error:d}))}):l.push(o)}),l},convertErrorMessages:function(t,l){l=l||{};var o=[],d=l.prettify||n.prettify;return t.forEach(function(c){var s=n.result(c.error,c.value,c.attribute,c.options,c.attributes,c.globalOptions);if(!n.isString(s)){o.push(c);return}s[0]==="^"?s=s.slice(1):l.fullMessages!==!1&&(s=n.capitalize(d(c.attribute))+" "+s),s=s.replace(/\\\^/g,"^"),s=n.format(s,{value:n.stringifyValue(c.value,l)}),o.push(n.extend({},c,{error:s}))}),o},groupErrorsByAttribute:function(t){var l={};return t.forEach(function(o){var d=l[o.attribute];d?d.push(o):l[o.attribute]=[o]}),l},flattenErrorsToArray:function(t){return t.map(function(l){return l.error}).filter(function(l,o,d){return d.indexOf(l)===o})},cleanAttributes:function(t,l){function o(s,k,g){return n.isObject(s[k])?s[k]:s[k]=g?!0:{}}function d(s){var k={},g;for(g in s)s[g]&&n.forEachKeyInKeypath(k,g,o);return k}function c(s,k){if(!n.isObject(s))return s;var g=n.extend({},s),y,h;for(h in s)y=k[h],n.isObject(y)?g[h]=c(g[h],y):y||delete g[h];return g}return!n.isObject(l)||!n.isObject(t)?{}:(l=d(l),c(t,l))},exposeModule:function(t,l,o,d,c){o?(d&&d.exports&&(o=d.exports=t),o.validate=t):(l.validate=t,t.isFunction(c)&&c.amd&&c([],function(){return t}))},warn:function(t){typeof console<"u"&&console.warn&&console.warn("[validate.js] "+t)},error:function(t){typeof console<"u"&&console.error&&console.error("[validate.js] "+t)}}),u.validators={presence:function(t,l){if(l=n.extend({},this.options,l),l.allowEmpty!==!1?!n.isDefined(t):n.isEmpty(t))return l.message||this.message||"can't be blank"},length:function(t,l,o){if(n.isDefined(t)){l=n.extend({},this.options,l);var d=l.is,c=l.maximum,s=l.minimum,k=l.tokenizer||function(N){return N},g,y=[];t=k(t);var h=t.length;if(!n.isNumber(h))return l.message||this.notValid||"has an incorrect length";if(n.isNumber(d)&&h!==d&&(g=l.wrongLength||this.wrongLength||"is the wrong length (should be %{count} characters)",y.push(n.format(g,{count:d}))),n.isNumber(s)&&h<s&&(g=l.tooShort||this.tooShort||"is too short (minimum is %{count} characters)",y.push(n.format(g,{count:s}))),n.isNumber(c)&&h>c&&(g=l.tooLong||this.tooLong||"is too long (maximum is %{count} characters)",y.push(n.format(g,{count:c}))),y.length>0)return l.message||y}},numericality:function(t,l,o,d,c){if(n.isDefined(t)){l=n.extend({},this.options,l);var s=[],k,g,y={greaterThan:function(b,D){return b>D},greaterThanOrEqualTo:function(b,D){return b>=D},equalTo:function(b,D){return b===D},lessThan:function(b,D){return b<D},lessThanOrEqualTo:function(b,D){return b<=D},divisibleBy:function(b,D){return b%D===0}},h=l.prettify||c&&c.prettify||n.prettify;if(n.isString(t)&&l.strict){var N="^-?(0|[1-9]\\d*)";if(l.onlyInteger||(N+="(\\.\\d+)?"),N+="$",!new RegExp(N).test(t))return l.message||l.notValid||this.notValid||this.message||"must be a valid number"}if(l.noStrings!==!0&&n.isString(t)&&!n.isEmpty(t)&&(t=+t),!n.isNumber(t))return l.message||l.notValid||this.notValid||this.message||"is not a number";if(l.onlyInteger&&!n.isInteger(t))return l.message||l.notInteger||this.notInteger||this.message||"must be an integer";for(k in y)if(g=l[k],n.isNumber(g)&&!y[k](t,g)){var r="not"+n.capitalize(k),a=l[r]||this[r]||this.message||"must be %{type} %{count}";s.push(n.format(a,{count:g,type:h(k)}))}if(l.odd&&t%2!==1&&s.push(l.notOdd||this.notOdd||this.message||"must be odd"),l.even&&t%2!==0&&s.push(l.notEven||this.notEven||this.message||"must be even"),s.length)return l.message||s}},datetime:n.extend(function(t,l){if(!n.isFunction(this.parse)||!n.isFunction(this.format))throw new Error("Both the parse and format functions needs to be set to use the datetime/date validator");if(n.isDefined(t)){l=n.extend({},this.options,l);var o,d=[],c=l.earliest?this.parse(l.earliest,l):NaN,s=l.latest?this.parse(l.latest,l):NaN;if(t=this.parse(t,l),isNaN(t)||l.dateOnly&&t%864e5!==0)return o=l.notValid||l.message||this.notValid||"must be a valid date",n.format(o,{value:arguments[0]});if(!isNaN(c)&&t<c&&(o=l.tooEarly||l.message||this.tooEarly||"must be no earlier than %{date}",o=n.format(o,{value:this.format(t,l),date:this.format(c,l)}),d.push(o)),!isNaN(s)&&t>s&&(o=l.tooLate||l.message||this.tooLate||"must be no later than %{date}",o=n.format(o,{date:this.format(s,l),value:this.format(t,l)}),d.push(o)),d.length)return n.unique(d)}},{parse:null,format:null}),date:function(t,l){return l=n.extend({},l,{dateOnly:!0}),n.validators.datetime.call(n.validators.datetime,t,l)},format:function(t,l){(n.isString(l)||l instanceof RegExp)&&(l={pattern:l}),l=n.extend({},this.options,l);var o=l.message||this.message||"is invalid",d=l.pattern,c;if(n.isDefined(t)&&(!n.isString(t)||(n.isString(d)&&(d=new RegExp(l.pattern,l.flags)),c=d.exec(t),!c||c[0].length!=t.length)))return o},inclusion:function(t,l){if(n.isDefined(t)&&(n.isArray(l)&&(l={within:l}),l=n.extend({},this.options,l),!n.contains(l.within,t))){var o=l.message||this.message||"^%{value} is not included in the list";return n.format(o,{value:t})}},exclusion:function(t,l){if(n.isDefined(t)&&(n.isArray(l)&&(l={within:l}),l=n.extend({},this.options,l),!!n.contains(l.within,t))){var o=l.message||this.message||"^%{value} is restricted";return n.isString(l.within[t])&&(t=l.within[t]),n.format(o,{value:t})}},email:n.extend(function(t,l){l=n.extend({},this.options,l);var o=l.message||this.message||"is not a valid email";if(n.isDefined(t)&&(!n.isString(t)||!this.PATTERN.exec(t)))return o},{PATTERN:/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i}),equality:function(t,l,o,d,c){if(n.isDefined(t)){n.isString(l)&&(l={attribute:l}),l=n.extend({},this.options,l);var s=l.message||this.message||"is not equal to %{attribute}";if(n.isEmpty(l.attribute)||!n.isString(l.attribute))throw new Error("The attribute must be a non empty string");var k=n.getDeepObjectValue(d,l.attribute),g=l.comparator||function(h,N){return h===N},y=l.prettify||c&&c.prettify||n.prettify;if(!g(t,k,l,o,d))return n.format(s,{attribute:y(l.attribute)})}},url:function(t,l){if(n.isDefined(t)){l=n.extend({},this.options,l);var o=l.message||this.message||"is not a valid url",d=l.schemes||this.schemes||["http","https"],c=l.allowLocal||this.allowLocal||!1,s=l.allowDataUrl||this.allowDataUrl||!1;if(!n.isString(t))return o;var k="^(?:(?:"+d.join("|")+")://)(?:\\S+(?::\\S*)?@)?(?:",g="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))";if(c?g+="?":k+="(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})",k+="(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+g+")(?::\\d{2,5})?(?:[/?#]\\S*)?$",s){var y="\\w+\\/[-+.\\w]+(?:;[\\w=]+)*",h="[A-Za-z0-9-_.!~\\*'();\\/?:@&=+$,%]*",N="data:(?:"+y+")?(?:;base64)?,"+h;k="(?:"+k+")|(?:^"+N+"$)"}var r=new RegExp(k,"i");if(!r.exec(t))return o}},type:n.extend(function(t,l,o,d,c){if(n.isString(l)&&(l={type:l}),!!n.isDefined(t)){var s=n.extend({},this.options,l),k=s.type;if(!n.isDefined(k))throw new Error("No type was specified");var g;if(n.isFunction(k)?g=k:g=this.types[k],!n.isFunction(g))throw new Error("validate.validators.type.types."+k+" must be a function.");if(!g(t,s,o,d,c)){var y=l.message||this.messages[k]||this.message||s.message||(n.isFunction(k)?"must be of the correct type":"must be of type %{type}");return n.isFunction(y)&&(y=y(t,l,o,d,c)),n.format(y,{attribute:n.prettify(o),type:k})}}},{types:{object:function(t){return n.isObject(t)&&!n.isArray(t)},array:n.isArray,integer:n.isInteger,number:n.isNumber,string:n.isString,date:n.isDate,boolean:n.isBoolean},messages:{}})},u.formatters={detailed:function(t){return t},flat:n.flattenErrorsToArray,grouped:function(t){var l;t=n.groupErrorsByAttribute(t);for(l in t)t[l]=n.flattenErrorsToArray(t[l]);return t},constraint:function(t){var l;t=n.groupErrorsByAttribute(t);for(l in t)t[l]=t[l].map(function(o){return o.validator}).sort();return t}},u.exposeModule(u,this,f,i,p)}).call(te,E,m,null)})(P,P.exports)),P.exports}var ne=le();const J=ee(ne),M=(m,E,f="")=>{const i={};Object.keys(E).forEach(n=>{const t=E[n];J.isString(t)?i[n]={presence:{allowEmpty:!1,message:`^請輸入${t}`}}:i[n]=t});const p={},u=J(m,i);return u&&Object.keys(u).forEach(n=>p[`${f}${n}`]=u[n].join(",")),p},F=O.defineStore("progress",{state:()=>({culture:{}})}),oe={class:"block"},re={class:"mt-4"},ae={class:"table align-middle gray-table side-table"},se={key:0},de={key:1,class:"text-light-gray"},ie={key:0,class:"text-pink"},ce={key:0,class:"text-pink"},me={class:"d-flex gap-2"},fe={key:0,class:"invalid mt-0"},pe={key:0,class:"text-pink"},ue={key:0,class:"text-pink"},Ve={class:"d-flex flex-column gap-2"},Ne={key:0},Ee={key:0,class:"text-pink"},ke={key:0,class:"text-pink"},ge={class:"mt-4"},ye={class:"table align-middle gray-table side-table"},be={key:0,class:"text-pink"},he={class:"row g-3"},$e={class:"col-12 col-xl-2"},Be={class:"text-gray mb-2"},xe={key:0,class:"text-pink"},Ce={class:"col-12 col-xl-3"},Se={class:"text-gray mb-2"},_e={key:0,class:"text-pink"},Te={class:"col-12 col-xl-4"},De={class:"row g-1"},we={class:"col-7"},Ue={class:"col-5"},Me={class:"col-12 col-xl-3"},Ae={class:"text-gray mb-2"},Fe={key:0,class:"text-pink"},Oe={class:"col-12"},Ie={class:"text-gray mb-2"},je={key:0,class:"text-pink"},Pe={class:"mt-4"},Re={class:"table align-middle gray-table side-table"},Le={key:0,class:"text-pink"},qe={key:0,class:"text-pink"},ze={key:0,class:"text-pink"},Ge={key:0,class:"text-pink"},Je={class:"mt-4"},Ye={class:"table align-middle gray-table side-table"},Qe={key:0,class:"table-responsive sub-table mt-3 mb-0"},We={class:"table align-middle gray-table"},Ke={key:0},Xe={key:0},Ze={class:"d-flex gap-2"},He=["onClick"],ve={key:0,class:"block-bottom bg-light-teal"},et={__name:"CultureApplication",props:{id:{type:Number}},setup(m){const E=m,f=e.ref([]),i=e.ref(),p=e.computed(()=>I(o.value.Status)),u=e.ref({}),n=e.ref(null),t=e.ref([]),l=e.computed(()=>c.value.filter(r=>!r.Deleted)),o=e.ref({}),d=e.computed(()=>t.value.filter(r=>!r.ParentCode)),c=e.ref([]),s=e.computed(()=>t.value.filter(r=>r.ParentCode===n.value)),k=e.computed({get:()=>!!l.value.length,set:r=>{r?g():c.value.forEach(a=>a.Deleted=!0)}}),g=()=>c.value.push({}),y=r=>r.Deleted=!0,h=r=>{if(u.value={},r&&!N()){e.nextTick(()=>{var b;return(b=document.querySelector(".invalid"))==null?void 0:b.scrollIntoView({behavior:"smooth",block:"center"})});return}const a={Project:o.value,Contacts:i.value,ReceivedSubsidies:c.value.filter(b=>b.ID||!b.Deleted),Submit:r?"true":"false"};U.culture("saveApplication",a).subscribe(b=>{r?window.location.href=`WorkSchedule.aspx?ID=${b.ID}`:o.value.ID||(window.location.href=`Application.aspx?ID=${b.ID}`)})},N=()=>{let r={ProjectName:"計畫名稱",Field:"徵件類別",OrgName:"申請單位",OrgCategory:"申請單位類別",TaxID:"統一編號",Address:"立案聯絡地址",Target:"計畫目標",Summary:"計畫內容概要",Quantified:"預期效益(量化)",Qualitative:"預期效益(質化)"};return o.value.OrgCategory==="3"&&(r.RegisteredNum="立案登記證字號"),u.value=M(o.value,r),r={Name:"姓名",JobTitle:"職稱",MobilePhone:"手機號碼",EMail:"電子郵件"},i.value.forEach((a,b)=>Object.assign(u.value,M(a,r,`contact-${b}-`))),r={Name:"計畫名稱",Unit:"補助單位",Amount:{presence:{allowEmpty:!1,message:"^請輸入補助金額"},numericality:{greaterThan:0,message:"^補助金額不可為 0"}}},c.value.forEach((a,b)=>Object.assign(u.value,M(a,r,`received-${b}-`))),!Object.keys(u.value).length};return e.onMounted(()=>{rxjs.forkJoin([U.culture("getZgsCodes",{CodeGroup:"CULField"}),U.culture("getZgsCodes",{CodeGroup:"CULOrgCategory"})]).subscribe(r=>{t.value=r[0],f.value=r[1],E.id?U.culture("getApplication",{ID:E.id}).subscribe(a=>{var b;o.value=a.Project,i.value=a.Contacts,c.value=a.ReceivedSubsidies,n.value=((b=t.value.find(D=>D.Code===o.value.Field))==null?void 0:b.ParentCode)||null,o.value.OrgCategory=o.value.OrgCategory||null,F().culture={step:o.value.FormStep,status:o.value.Status}}):U.culture("getEmptyApplication").subscribe(a=>{n.value=null,o.value=Object.assign({Field:null,OrgCategory:null,FormStep:1,Status:1},a),i.value=[{Role:"負責人"},{Role:"聯絡人"}],F().culture={step:o.value.FormStep,status:o.value.Status}})})}),e.watch(n,()=>{n.value?s.value.find(r=>o.value.Field===r.Code)||(o.value.Field=s.value[0].Code):o.value.Field=null}),(r,a)=>{const b=e.resolveComponent("input-text"),D=e.resolveComponent("input-select"),w=e.resolveComponent("input-textarea"),C=e.resolveComponent("input-boolean"),_=e.resolveComponent("input-integer");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",oe,[a[50]||(a[50]=e.createElementVNode("h5",{class:"square-title"},"基本資料",-1)),e.createElementVNode("div",re,[e.createElementVNode("table",ae,[e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[a[15]||(a[15]=e.createElementVNode("th",null,"年度",-1)),e.createElementVNode("td",null,e.toDisplayString(e.unref(o).Year),1)]),e.createElementVNode("tr",null,[a[16]||(a[16]=e.createElementVNode("th",null,"計畫編號",-1)),e.createElementVNode("td",null,[e.unref(o).ProjectID?(e.openBlock(),e.createElementBlock("span",se,e.toDisplayString(e.unref(o).ProjectID),1)):(e.openBlock(),e.createElementBlock("span",de,"儲存後由系統自動產生"))])]),e.createElementVNode("tr",null,[a[17]||(a[17]=e.createElementVNode("th",null,"補助計畫類別",-1)),e.createElementVNode("td",null,e.toDisplayString(e.unref(o).SubsidyPlanType),1)]),e.createElementVNode("tr",null,[e.createElementVNode("th",null,[e.unref(p)?(e.openBlock(),e.createElementBlock("span",ie,"* ")):e.createCommentVNode("",!0),a[18]||(a[18]=e.createTextVNode("計畫名稱",-1))]),e.createElementVNode("td",null,[e.createVNode(b,{error:e.unref(u).ProjectName,modelValue:e.unref(o).ProjectName,"onUpdate:modelValue":a[0]||(a[0]=V=>e.unref(o).ProjectName=V),modelModifiers:{trim:!0}},null,8,["error","modelValue"])])]),e.createElementVNode("tr",null,[e.createElementVNode("th",null,[e.unref(p)?(e.openBlock(),e.createElementBlock("span",ce,"* ")):e.createCommentVNode("",!0),a[19]||(a[19]=e.createTextVNode("徵件類別",-1))]),e.createElementVNode("td",null,[e.createElementVNode("div",me,[e.createVNode(D,{"empty-value":null,options:e.unref(d),"text-name":"Descname","value-name":"Code",modelValue:e.unref(n),"onUpdate:modelValue":a[1]||(a[1]=V=>e.isRef(n)?n.value=V:null)},null,8,["options","modelValue"]),e.createVNode(D,{"empty-value":null,disabled:!e.unref(n),options:e.unref(s),"text-name":"Descname","value-name":"Code",modelValue:e.unref(o).Field,"onUpdate:modelValue":a[2]||(a[2]=V=>e.unref(o).Field=V)},null,8,["disabled","options","modelValue"])]),e.unref(u).Field?(e.openBlock(),e.createElementBlock("div",fe,e.toDisplayString(e.unref(u).Field),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("tr",null,[e.createElementVNode("th",null,[e.unref(p)?(e.openBlock(),e.createElementBlock("span",pe,"* ")):e.createCommentVNode("",!0),a[20]||(a[20]=e.createTextVNode("申請單位",-1))]),e.createElementVNode("td",null,[e.createVNode(b,{error:e.unref(u).OrgName,placeholder:"請輸入名稱",modelValue:e.unref(o).OrgName,"onUpdate:modelValue":a[3]||(a[3]=V=>e.unref(o).OrgName=V),modelModifiers:{trim:!0}},null,8,["error","modelValue"])])]),e.createElementVNode("tr",null,[e.createElementVNode("th",null,[e.unref(p)?(e.openBlock(),e.createElementBlock("span",ue,"* ")):e.createCommentVNode("",!0),a[21]||(a[21]=e.createTextVNode("申請單位類別",-1))]),e.createElementVNode("td",null,[e.createElementVNode("div",Ve,[e.createElementVNode("div",null,[e.createVNode(D,{"empty-value":null,error:e.unref(u).OrgCategory,options:e.unref(f),"text-name":"Descname","value-name":"Code",modelValue:e.unref(o).OrgCategory,"onUpdate:modelValue":a[4]||(a[4]=V=>e.unref(o).OrgCategory=V)},null,8,["error","options","modelValue"])]),e.unref(o).OrgCategory==="3"?(e.openBlock(),e.createElementBlock("div",Ne,[e.createVNode(b,{error:e.unref(u).RegisteredNum,prefix:"立案登記證字號",required:e.unref(p),modelValue:e.unref(o).RegisteredNum,"onUpdate:modelValue":a[5]||(a[5]=V=>e.unref(o).RegisteredNum=V),modelModifiers:{trim:!0}},null,8,["error","required","modelValue"])])):e.createCommentVNode("",!0)])])]),e.createElementVNode("tr",null,[e.createElementVNode("th",null,[e.unref(p)?(e.openBlock(),e.createElementBlock("span",Ee,"* ")):e.createCommentVNode("",!0),a[22]||(a[22]=e.createTextVNode("統一編號",-1)),a[23]||(a[23]=e.createElementVNode("br",null,null,-1)),a[24]||(a[24]=e.createTextVNode("(稅籍)",-1))]),e.createElementVNode("td",null,[e.createVNode(b,{error:e.unref(u).TaxID,modelValue:e.unref(o).TaxID,"onUpdate:modelValue":a[6]||(a[6]=V=>e.unref(o).TaxID=V),modelModifiers:{trim:!0}},null,8,["error","modelValue"])])]),e.createElementVNode("tr",null,[e.createElementVNode("th",null,[e.unref(p)?(e.openBlock(),e.createElementBlock("span",ke,"* ")):e.createCommentVNode("",!0),a[25]||(a[25]=e.createTextVNode("立案聯絡地址",-1))]),e.createElementVNode("td",null,[e.createVNode(b,{error:e.unref(u).Address,placeholder:"請輸入地址",modelValue:e.unref(o).Address,"onUpdate:modelValue":a[7]||(a[7]=V=>e.unref(o).Address=V),modelModifiers:{trim:!0}},null,8,["error","modelValue"])])])])])]),a[51]||(a[51]=e.createElementVNode("h5",{class:"square-title mt-5"},"人員聯絡資訊",-1)),e.createElementVNode("div",ge,[e.createElementVNode("table",ye,[e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(i),(V,B)=>(e.openBlock(),e.createElementBlock("tr",{key:V},[e.createElementVNode("th",null,[e.unref(p)?(e.openBlock(),e.createElementBlock("span",be,"* ")):e.createCommentVNode("",!0),e.createTextVNode(e.toDisplayString(V.Role),1)]),e.createElementVNode("td",null,[e.createElementVNode("div",he,[e.createElementVNode("div",$e,[e.createElementVNode("div",Be,[e.unref(p)?(e.openBlock(),e.createElementBlock("span",xe,"* ")):e.createCommentVNode("",!0),a[26]||(a[26]=e.createTextVNode("姓名",-1))]),e.createVNode(b,{error:e.unref(u)[`contact-${B}-Name`],modelValue:V.Name,"onUpdate:modelValue":x=>V.Name=x,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("div",Ce,[e.createElementVNode("div",Se,[e.unref(p)?(e.openBlock(),e.createElementBlock("span",_e,"* ")):e.createCommentVNode("",!0),a[27]||(a[27]=e.createTextVNode("職稱",-1))]),e.createVNode(b,{error:e.unref(u)[`contact-${B}-JobTitle`],modelValue:V.JobTitle,"onUpdate:modelValue":x=>V.JobTitle=x,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("div",Te,[a[28]||(a[28]=e.createElementVNode("div",{class:"text-gray mb-2"},"電話(分機)",-1)),e.createElementVNode("div",De,[e.createElementVNode("div",we,[e.createVNode(b,{modelValue:V.Phone,"onUpdate:modelValue":x=>V.Phone=x,modelModifiers:{trim:!0}},null,8,["modelValue","onUpdate:modelValue"])]),e.createElementVNode("div",Ue,[e.createVNode(b,{placeholder:"請輸入分機",size:"4",modelValue:V.PhoneExt,"onUpdate:modelValue":x=>V.PhoneExt=x,modelModifiers:{trim:!0}},null,8,["modelValue","onUpdate:modelValue"])])])]),e.createElementVNode("div",Me,[e.createElementVNode("div",Ae,[e.unref(p)?(e.openBlock(),e.createElementBlock("span",Fe,"* ")):e.createCommentVNode("",!0),a[29]||(a[29]=e.createTextVNode("手機號碼",-1))]),e.createVNode(b,{error:e.unref(u)[`contact-${B}-MobilePhone`],modelValue:V.MobilePhone,"onUpdate:modelValue":x=>V.MobilePhone=x,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("div",Oe,[e.createElementVNode("div",Ie,[e.unref(p)?(e.openBlock(),e.createElementBlock("span",je,"* ")):e.createCommentVNode("",!0),a[30]||(a[30]=e.createTextVNode("電子郵件",-1))]),e.createVNode(b,{error:e.unref(u)[`contact-${B}-EMail`],modelValue:V.EMail,"onUpdate:modelValue":x=>V.EMail=x,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])])])])]))),128))])])]),a[52]||(a[52]=e.createElementVNode("h5",{class:"square-title mt-5"},"計畫內容",-1)),e.createElementVNode("div",Pe,[e.createElementVNode("table",Re,[e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[e.createElementVNode("th",null,[e.unref(p)?(e.openBlock(),e.createElementBlock("span",Le,"* ")):e.createCommentVNode("",!0),a[31]||(a[31]=e.createTextVNode("計畫目標",-1)),a[32]||(a[32]=e.createElementVNode("br",null,null,-1)),a[33]||(a[33]=e.createTextVNode("(條列式)",-1))]),e.createElementVNode("td",null,[a[34]||(a[34]=e.createElementVNode("div",{class:"fs-14 mb-2"},"對海洋文化發展、推廣或傳承之期待，包含落實海洋基本法、2020國家海洋政策白皮書與臺灣永續發展目標",-1)),e.createVNode(w,{error:e.unref(u).Target,"max-length":500,placeholder:"請輸入計畫目標",rows:"4",modelValue:e.unref(o).Target,"onUpdate:modelValue":a[8]||(a[8]=V=>e.unref(o).Target=V),modelModifiers:{trim:!0}},null,8,["error","modelValue"])])]),e.createElementVNode("tr",null,[e.createElementVNode("th",null,[e.unref(p)?(e.openBlock(),e.createElementBlock("span",qe,"* ")):e.createCommentVNode("",!0),a[35]||(a[35]=e.createTextVNode("計畫內容概要",-1)),a[36]||(a[36]=e.createElementVNode("br",null,null,-1)),a[37]||(a[37]=e.createTextVNode("(條列式)",-1))]),e.createElementVNode("td",null,[e.createVNode(w,{error:e.unref(u).Summary,"max-length":500,placeholder:"請輸入內容摘要",rows:"4",modelValue:e.unref(o).Summary,"onUpdate:modelValue":a[9]||(a[9]=V=>e.unref(o).Summary=V),modelModifiers:{trim:!0}},null,8,["error","modelValue"])])]),e.createElementVNode("tr",null,[e.createElementVNode("th",null,[e.unref(p)?(e.openBlock(),e.createElementBlock("span",ze,"* ")):e.createCommentVNode("",!0),a[38]||(a[38]=e.createTextVNode("預期效益",-1)),a[39]||(a[39]=e.createElementVNode("br",null,null,-1)),a[40]||(a[40]=e.createTextVNode("(量化)(條列式)",-1))]),e.createElementVNode("td",null,[e.createVNode(w,{error:e.unref(u).Quantified,"max-length":250,placeholder:"請輸入內容摘要",rows:"4",modelValue:e.unref(o).Quantified,"onUpdate:modelValue":a[10]||(a[10]=V=>e.unref(o).Quantified=V),modelModifiers:{trim:!0}},null,8,["error","modelValue"])])]),e.createElementVNode("tr",null,[e.createElementVNode("th",null,[e.unref(p)?(e.openBlock(),e.createElementBlock("span",Ge,"* ")):e.createCommentVNode("",!0),a[41]||(a[41]=e.createTextVNode("預期效益",-1)),a[42]||(a[42]=e.createElementVNode("br",null,null,-1)),a[43]||(a[43]=e.createTextVNode("(質化)(條列式)",-1))]),e.createElementVNode("td",null,[e.createVNode(w,{error:e.unref(u).Qualitative,"max-length":250,placeholder:"請輸入內容摘要",rows:"4",modelValue:e.unref(o).Qualitative,"onUpdate:modelValue":a[11]||(a[11]=V=>e.unref(o).Qualitative=V),modelModifiers:{trim:!0}},null,8,["error","modelValue"])])])])])]),e.createElementVNode("div",Je,[e.createElementVNode("table",Ye,[e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[a[49]||(a[49]=e.createElementVNode("th",null,"最近三年曾獲本會及所屬補助／合作計畫及經費",-1)),e.createElementVNode("td",null,[e.createVNode(C,{modelValue:e.unref(k),"onUpdate:modelValue":a[12]||(a[12]=V=>e.isRef(k)?k.value=V:null)},null,8,["modelValue"]),e.unref(k)?(e.openBlock(),e.createElementBlock("div",Qe,[e.createElementVNode("table",We,[e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[a[44]||(a[44]=e.createElementVNode("th",null,"計畫名稱",-1)),a[45]||(a[45]=e.createElementVNode("th",null,"補助單位",-1)),a[46]||(a[46]=e.createElementVNode("th",null,"補助金額",-1)),e.unref(p)?(e.openBlock(),e.createElementBlock("th",Ke,"功能")):e.createCommentVNode("",!0)])]),e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(l),(V,B)=>(e.openBlock(),e.createElementBlock("tr",{key:V},[e.createElementVNode("td",null,[e.createVNode(b,{error:e.unref(u)[`received-${B}-Name`],modelValue:V.Name,"onUpdate:modelValue":x=>V.Name=x,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("td",null,[e.createVNode(b,{error:e.unref(u)[`received-${B}-Unit`],modelValue:V.Unit,"onUpdate:modelValue":x=>V.Unit=x,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("td",null,[e.createVNode(_,{error:e.unref(u)[`received-${B}-Amount`],modelValue:V.Amount,"onUpdate:modelValue":x=>V.Amount=x},null,8,["error","modelValue","onUpdate:modelValue"])]),e.unref(p)?(e.openBlock(),e.createElementBlock("td",Xe,[e.createElementVNode("div",Ze,[e.unref(l).length>1?(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-sm btn-teal-dark m-0",onClick:x=>y(V),type:"button"},a[47]||(a[47]=[e.createElementVNode("i",{class:"fas fa-trash-alt"},null,-1)]),8,He)):e.createCommentVNode("",!0),B+1===e.unref(l).length?(e.openBlock(),e.createElementBlock("button",{key:1,class:"btn btn-sm btn-teal-dark m-0",onClick:g,type:"button"},a[48]||(a[48]=[e.createElementVNode("i",{class:"fas fa-plus"},null,-1)]))):e.createCommentVNode("",!0)])])):e.createCommentVNode("",!0)]))),128))])])])):e.createCommentVNode("",!0)])])])])])]),e.unref(p)?(e.openBlock(),e.createElementBlock("div",ve,[e.createElementVNode("button",{class:"btn btn-outline-teal me-3",onClick:a[13]||(a[13]=V=>h()),type:"button"},"暫存"),e.createElementVNode("button",{class:"btn btn-teal",onClick:a[14]||(a[14]=V=>h(!0)),type:"button"},a[53]||(a[53]=[e.createElementVNode("i",{class:"fas fa-check"},null,-1),e.createTextVNode("完成本頁，下一步",-1)]))])):e.createCommentVNode("",!0)],64)}}},tt={class:"block"},lt={key:0,class:"text-pink lh-base mt-4"},nt={class:"mt-4"},ot={class:"table align-middle gray-table"},rt={class:"text-center"},at={key:0,width:"180"},st={class:"text-center"},dt={key:0,class:"text-pink"},it={key:0,class:"btn btn-sm btn-teal-dark rounded-pill mt-2",type:"button"},ct={key:0,class:"text-center"},mt={key:0},ft={key:1,class:"text-pink"},pt={key:1,class:"tag-group mt-2 gap-1"},ut={key:0,class:"tag tag-green-light"},Vt=["download","href"],Nt=["onClick"],Et={key:0,class:"block-bottom bg-light-teal"},kt=["disabled"],gt={__name:"CultureAttachment",props:{id:{type:Number}},setup(m){const E=m,f=e.ref([{Type:1,Title:"申請表",Template:!0,Files:[]},{Type:2,Title:"申請捐（補）助計畫書",Template:!0,Files:[]},{Type:3,Title:"執行承諾書",Template:!0,Files:[],Excludes:["1"]},{Type:4,Title:"未違反公職人員利益衝突迴避法切結書及事前揭露表",Comment:"(與本計畫相關之補充資料、如立案證明、配合提案計畫邀集相關合作單位召開討論之會議紀錄等；若有合作對象，請附合作對象同意書)",Template:!0,Files:[]},{Type:5,Title:"附錄",Files:[],Multiple:!0}]),i=e.computed(()=>f.value.some(o=>!o.Files.filter(d=>!d.Deleted).length)),p=e.computed(()=>I(u.value.Status)),u=e.ref({}),n=(o,d)=>{d.Type==="application/pdf"&&o.Files.push({Type:o.Type,Path:d.Path,Name:u.value.ProjectID+"_"+(o.Multiple?d.Name:`${o.Title}.pdf`)})},t=U.download,l=o=>{const d={ID:E.id,Attachments:f.value.reduce((c,s)=>c.concat(s.Files),[]),Submit:o?"true":"false"};U.culture("saveAttachment",d).subscribe(()=>{})};return e.onMounted(()=>{rxjs.forkJoin([U.culture("getAttachment",{ID:E.id})]).subscribe(o=>{const d=o[0];u.value=d.Project,f.value=f.value.filter(c=>{var s;return!((s=c.Excludes)!=null&&s.includes(u.value.OrgCategory))}),f.value.forEach(c=>{c.Files=d.Attachments.filter(s=>s.Type===c.Type),c.Uploaded=e.computed(()=>c.Files.filter(s=>!s.Deleted).length)}),F().culture={step:u.value.FormStep,status:u.value.Status}})}),(o,d)=>{const c=e.resolveComponent("input-file");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",tt,[d[8]||(d[8]=e.createElementVNode("h5",{class:"square-title"},"上傳附件",-1)),e.unref(p)?(e.openBlock(),e.createElementBlock("p",lt,d[2]||(d[2]=[e.createTextVNode(" 請下載附件範本，填寫資料及公文用印後上傳（僅支援PDF格式上傳，每個檔案10MB以內）",-1),e.createElementVNode("br",null,null,-1),e.createTextVNode(" 計畫書請自行留存送審版電子檔，待決審核定經費後請提交修正計畫書以供核定。 ",-1)]))):e.createCommentVNode("",!0),e.createElementVNode("div",nt,[e.createElementVNode("table",ot,[e.createElementVNode("thead",rt,[e.createElementVNode("tr",null,[d[3]||(d[3]=e.createElementVNode("th",{width:"60"},"附件編號",-1)),d[4]||(d[4]=e.createElementVNode("th",null,"附件名稱",-1)),e.unref(p)?(e.openBlock(),e.createElementBlock("th",at,"狀態")):e.createCommentVNode("",!0),d[5]||(d[5]=e.createElementVNode("th",{width:"350"},"上傳附件",-1))])]),e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(f),(s,k)=>(e.openBlock(),e.createElementBlock("tr",{key:s},[e.createElementVNode("td",st,e.toDisplayString(k+1),1),e.createElementVNode("td",null,[e.createElementVNode("div",null,[e.unref(p)?(e.openBlock(),e.createElementBlock("span",dt,"* ")):e.createCommentVNode("",!0),e.createTextVNode(e.toDisplayString(s.Title),1)]),e.unref(p)&&s.Template?(e.openBlock(),e.createElementBlock("button",it,d[6]||(d[6]=[e.createElementVNode("i",{class:"fas fa-file-download me-1"},null,-1),e.createTextVNode("範本下載 ",-1)]))):e.createCommentVNode("",!0)]),e.unref(p)?(e.openBlock(),e.createElementBlock("td",ct,[s.Uploaded?(e.openBlock(),e.createElementBlock("span",mt,"已上傳")):(e.openBlock(),e.createElementBlock("span",ft,"尚未上傳"))])):e.createCommentVNode("",!0),e.createElementVNode("td",null,[e.unref(p)&&(s.Multiple||!s.Uploaded)?(e.openBlock(),e.createBlock(c,{key:0,accept:".pdf",onFile:g=>n(s,g)},null,8,["onFile"])):e.createCommentVNode("",!0),s.Uploaded?(e.openBlock(),e.createElementBlock("div",pt,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.Files,g=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:g},[g.Deleted?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("span",ut,[e.createElementVNode("a",{class:"tag-link my-1",download:g.Name,href:e.unref(t)(g.Path)},e.toDisplayString(g.Name),9,Vt),e.unref(p)?(e.openBlock(),e.createElementBlock("button",{key:0,class:"tag-btn",onClick:y=>g.Deleted=!0,type:"button"},d[7]||(d[7]=[e.createElementVNode("i",{class:"fa-solid fa-circle-xmark"},null,-1)]),8,Nt)):e.createCommentVNode("",!0)]))],64))),128))])):e.createCommentVNode("",!0)])]))),128))])])])]),e.unref(p)?(e.openBlock(),e.createElementBlock("div",Et,[e.createElementVNode("button",{class:"btn btn-outline-teal me-3",onClick:d[0]||(d[0]=s=>l()),type:"button"},"暫存"),e.createElementVNode("button",{class:"btn btn-teal",onClick:d[1]||(d[1]=s=>l(!0)),disabled:e.unref(i),type:"button"},d[9]||(d[9]=[e.createElementVNode("i",{class:"fas fa-check"},null,-1),e.createTextVNode("全部完成，提送申請",-1)]),8,kt)])):e.createCommentVNode("",!0)],64)}}},yt={class:"block"},bt={class:"mt-4"},ht={class:"table-responsive mt-3 mb-0"},$t={class:"table align-middle gray-table"},Bt={class:"text-end"},xt={class:"text-end"},Ct={class:"table-responsive"},St={class:"table align-middle gray-table"},_t={key:0,width:"1"},Tt={key:0},Dt={class:"d-flex gap-2"},wt=["onClick"],Ut={class:"mt-4"},Mt={class:"table-responsive mt-3 mb-0"},At={class:"table align-middle gray-table"},Ft={key:0,width:"1"},Ot={class:"text-end"},It={key:0},jt={class:"d-flex gap-2"},Pt=["onClick"],Rt={key:0,class:"block-bottom bg-light-teal"},Lt={__name:"CultureFunding",props:{id:{type:Number}},setup(m){const E=m,f=e.computed(()=>I(n.value.Status)),i=e.ref({}),p=e.computed(()=>l.value.filter(N=>!N.Deleted)),u=e.computed(()=>o.value.filter(N=>!N.Deleted)),n=e.ref({}),t=e.ref([]),l=e.ref([]),o=e.ref([]),d=e.ref(0),c=()=>l.value.push({}),s=()=>o.value.push({ItemID:0}),k=N=>N.Deleted=!0,g=N=>N.Deleted=!0,y=N=>{if(i.value={},N&&!h()){e.nextTick(()=>{var a;return(a=document.querySelector(".invalid"))==null?void 0:a.scrollIntoView({behavior:"smooth",block:"center"})});return}const r={Project:n.value,OtherSubsidies:l.value,BudgetPlans:o.value,Submit:N?"true":"false"};U.culture("saveFunding",r).subscribe(()=>{N&&(window.location.href=`Other.aspx?ID=${E.id}`)})},h=()=>{let N={ApplyAmount:{presence:{allowEmpty:!1,message:"^請輸入申請金額"},numericality:{greaterThan:0,message:"^申請金額不可為 0"}},SelfAmount:"自籌款"};return i.value=M(n.value,N),N={Unit:"單位名稱",Amount:{presence:{allowEmpty:!1,message:"^請輸入申請金額"},numericality:{greaterThan:0,message:"^申請金額不可為 0"}}},l.value.forEach((r,a)=>Object.assign(i.value,M(r,N,`other-${a}-`))),N={ItemID:{numericality:{greaterThan:0,message:"^請選擇工作項目"}},Title:"預算項目",Amount:"海委會經費",OtherAmount:"其他經費",Description:"計算方式及說明"},o.value.forEach((r,a)=>Object.assign(i.value,M(r,N,`plan-${a}-`))),!Object.keys(i.value).length};return e.onMounted(()=>{rxjs.forkJoin([U.culture("getFunding",{ID:E.id})]).subscribe(N=>{const r=N[0];n.value=r.Project,l.value=r.OtherSubsidies,o.value=r.BudgetPlans,t.value=r.Items,l.value.length||c(),o.value.length||s(),F().culture={step:n.value.FormStep,status:n.value.Status}})}),e.watchEffect(()=>{n.value.OtherAmount=l.value.reduce((N,r)=>N+(r.Deleted?0:j(r.Amount)),0),d.value=j(n.value.ApplyAmount)+j(n.value.SelfAmount)+j(n.value.OtherAmount),o.value.forEach(N=>N.sum=j(N.Amount)+j(N.OtherAmount))}),(N,r)=>{var w;const a=e.resolveComponent("input-integer"),b=e.resolveComponent("input-text"),D=e.resolveComponent("input-select");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",yt,[r[21]||(r[21]=e.createElementVNode("h5",{class:"square-title"},"申請經費",-1)),e.createElementVNode("div",bt,[e.createElementVNode("div",ht,[e.createElementVNode("table",$t,[r[4]||(r[4]=e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[e.createElementVNode("th",{class:"text-end"},"申請海委會補助／合作金額 (A)"),e.createElementVNode("th",{class:"text-end"},"申請單位自籌款 (B)"),e.createElementVNode("th",{class:"text-end"},"其他機關補助／合作總金額 (C)"),e.createElementVNode("th",{class:"text-end"},"計畫總經費 (A+B+C)")])],-1)),e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[e.createElementVNode("td",null,[e.createVNode(a,{error:e.unref(i).ApplyAmount,modelValue:e.unref(n).ApplyAmount,"onUpdate:modelValue":r[0]||(r[0]=C=>e.unref(n).ApplyAmount=C)},null,8,["error","modelValue"])]),e.createElementVNode("td",null,[e.createVNode(a,{error:e.unref(i).SelfAmount,modelValue:e.unref(n).SelfAmount,"onUpdate:modelValue":r[1]||(r[1]=C=>e.unref(n).SelfAmount=C)},null,8,["error","modelValue"])]),e.createElementVNode("td",Bt,e.toDisplayString((w=e.unref(n).OtherAmount)==null?void 0:w.toLocaleString()),1),e.createElementVNode("td",xt,e.toDisplayString(e.unref(d).toLocaleString()),1)])])])]),r[11]||(r[11]=e.createElementVNode("ul",{class:"list-unstyled lh-base mb-3"},[e.createElementVNode("li",null,"補助申請單位為民間團體或學校者，配合款比例應為計畫總經費之 5％以上；"),e.createElementVNode("li",null,"合作申請單位之分攤比例應為計畫總經費之 20％以上。")],-1)),e.createElementVNode("div",Ct,[e.createElementVNode("table",St,[e.createElementVNode("thead",null,[r[8]||(r[8]=e.createElementVNode("tr",null,[e.createElementVNode("th",{colspan:"4",style:{"border-bottom-width":"1px"}},"其他機關補助／合作金額 (C)")],-1)),e.createElementVNode("tr",null,[r[5]||(r[5]=e.createElementVNode("th",{width:"1"},null,-1)),r[6]||(r[6]=e.createElementVNode("th",null,"單位名稱",-1)),r[7]||(r[7]=e.createElementVNode("th",{class:"text-end"},"申請／分攤補助金額（含尚未核定者）",-1)),e.unref(f)?(e.openBlock(),e.createElementBlock("th",_t,"功能")):e.createCommentVNode("",!0)])]),e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(p),(C,_)=>(e.openBlock(),e.createElementBlock("tr",{key:C},[e.createElementVNode("td",null,e.toDisplayString(_+1),1),e.createElementVNode("td",null,[e.createVNode(b,{error:e.unref(i)[`other-${_}-Unit`],modelValue:C.Unit,"onUpdate:modelValue":V=>C.Unit=V,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("td",null,[e.createVNode(a,{error:e.unref(i)[`other-${_}-Amount`],modelValue:C.Amount,"onUpdate:modelValue":V=>C.Amount=V},null,8,["error","modelValue","onUpdate:modelValue"])]),e.unref(f)?(e.openBlock(),e.createElementBlock("td",Tt,[e.createElementVNode("div",Dt,[e.unref(p).length>1?(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-sm btn-teal-dark m-0",onClick:V=>k(C),type:"button"},r[9]||(r[9]=[e.createElementVNode("i",{class:"fas fa-trash-alt"},null,-1)]),8,wt)):e.createCommentVNode("",!0),_+1===e.unref(p).length?(e.openBlock(),e.createElementBlock("button",{key:1,class:"btn btn-sm btn-teal-dark m-0",onClick:c,type:"button"},r[10]||(r[10]=[e.createElementVNode("i",{class:"fas fa-plus"},null,-1)]))):e.createCommentVNode("",!0)])])):e.createCommentVNode("",!0)]))),128))])])])]),r[22]||(r[22]=e.createElementVNode("h5",{class:"square-title"},"經費預算規劃",-1)),e.createElementVNode("div",Ut,[e.createElementVNode("div",Mt,[e.createElementVNode("table",At,[e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[r[12]||(r[12]=e.createElementVNode("th",null,"重要工作項目",-1)),r[13]||(r[13]=e.createElementVNode("th",null,"預算項目",-1)),r[14]||(r[14]=e.createElementVNode("th",{class:"text-end"},[e.createTextVNode("預算金額"),e.createElementVNode("br"),e.createTextVNode("海洋委員會經費")],-1)),r[15]||(r[15]=e.createElementVNode("th",{class:"text-end"},[e.createTextVNode("預算金額"),e.createElementVNode("br"),e.createTextVNode("其他配合經費")],-1)),r[16]||(r[16]=e.createElementVNode("th",{class:"text-end"},"預算金額小計",-1)),r[17]||(r[17]=e.createElementVNode("th",null,"計算方式及說明",-1)),e.unref(f)?(e.openBlock(),e.createElementBlock("th",Ft,"功能")):e.createCommentVNode("",!0)])]),e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(u),(C,_)=>(e.openBlock(),e.createElementBlock("tr",{key:C},[e.createElementVNode("td",null,[e.createVNode(D,{"empty-value":0,error:e.unref(i)[`plan-${_}-ItemID`],options:e.unref(t),"text-name":"Title","value-name":"ID",modelValue:C.ItemID,"onUpdate:modelValue":V=>C.ItemID=V},null,8,["error","options","modelValue","onUpdate:modelValue"])]),e.createElementVNode("td",null,[e.createVNode(b,{error:e.unref(i)[`plan-${_}-Title`],modelValue:C.Title,"onUpdate:modelValue":V=>C.Title=V,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("td",null,[e.createVNode(a,{error:e.unref(i)[`plan-${_}-Amount`],modelValue:C.Amount,"onUpdate:modelValue":V=>C.Amount=V},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("td",null,[e.createVNode(a,{error:e.unref(i)[`plan-${_}-OtherAmount`],modelValue:C.OtherAmount,"onUpdate:modelValue":V=>C.OtherAmount=V},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("td",Ot,e.toDisplayString(C.sum.toLocaleString()),1),e.createElementVNode("td",null,[e.createVNode(b,{error:e.unref(i)[`plan-${_}-Description`],modelValue:C.Description,"onUpdate:modelValue":V=>C.Description=V,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])]),e.unref(f)?(e.openBlock(),e.createElementBlock("td",It,[e.createElementVNode("div",jt,[e.unref(u).length>1?(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-sm btn-teal-dark m-0",onClick:V=>g(C),type:"button"},r[18]||(r[18]=[e.createElementVNode("i",{class:"fas fa-trash-alt"},null,-1)]),8,Pt)):e.createCommentVNode("",!0),_+1===e.unref(u).length?(e.openBlock(),e.createElementBlock("button",{key:1,class:"btn btn-sm btn-teal-dark m-0",onClick:s,type:"button"},r[19]||(r[19]=[e.createElementVNode("i",{class:"fas fa-plus"},null,-1)]))):e.createCommentVNode("",!0)])])):e.createCommentVNode("",!0)]))),128))])])]),r[20]||(r[20]=e.createElementVNode("ul",{class:"list-unstyled lh-base mb-3"},[e.createElementVNode("li",null,"【計算方式及說明－範例】口訪工作人員之交通費：2,980（高雄─臺北）×2人=5,960元。")],-1))])]),e.unref(f)?(e.openBlock(),e.createElementBlock("div",Rt,[e.createElementVNode("button",{class:"btn btn-outline-teal me-3",onClick:r[2]||(r[2]=C=>y()),type:"button"},"暫存"),e.createElementVNode("button",{class:"btn btn-teal",onClick:r[3]||(r[3]=C=>y(!0)),type:"button"},r[23]||(r[23]=[e.createElementVNode("i",{class:"fas fa-check"},null,-1),e.createTextVNode("完成本頁，下一步",-1)]))])):e.createCommentVNode("",!0)],64)}}},qt={class:"block"},zt={key:0,class:"text-pink lh-base mt-3"},Gt={class:"border"},Jt={class:"bg-light-teal p-3 text-gray d-flex align-items-center gap-3"},Yt={class:"d-flex gap-2 align-items-center flex-grow-1"},Qt={class:"text-nowrap"},Wt={key:0,class:"text-pink"},Kt={class:"flex-grow-1"},Xt={class:"d-flex gap-2"},Zt=["onClick"],Ht=["href"],vt=["id"],el={class:"table align-middle gray-table side-table mb-0"},tl={key:0,class:"text-pink"},ll={key:0,class:"text-pink"},nl={key:0,class:"text-pink"},ol={key:0,class:"text-pink"},rl={key:0,class:"text-pink"},al={key:0,class:"block-bottom bg-light-teal"},sl={__name:"CultureOther",props:{id:{type:Number}},setup(m){const E=m,f=e.computed(()=>I(p.value.Status)),i=e.ref({}),p=e.ref({}),u=e.ref([]),n=e.computed(()=>u.value.filter(c=>!c.Deleted)),t=()=>u.value.push({}),l=c=>c.Deleted=!0,o=c=>{if(i.value={},c&&!d()){e.nextTick(()=>{var k;return(k=document.querySelector(".invalid"))==null?void 0:k.scrollIntoView({behavior:"smooth",block:"center"})});return}const s={ID:E.id,Projects:u.value,Submit:c?"true":"false"};U.culture("saveRelatedProject",s).subscribe(()=>{c&&(window.location.href=`Attachment.aspx?ID=${E.id}`)})},d=()=>{i.value={};const c={Title:"相關計畫名稱",Year:"執行年度",OrgName:"執行單位",Amount:{presence:{allowEmpty:!1,message:"^請輸入計畫經費"},numericality:{greaterThan:0,message:"^計畫經費不可為 0"}},Description:"內容摘述",Benefit:"執行效益"};return n.value.forEach((s,k)=>Object.assign(i.value,M(s,c,`project-${k}-`))),!Object.keys(i.value).length};return e.onMounted(()=>{rxjs.forkJoin([U.culture("getRelatedProject",{ID:E.id})]).subscribe(c=>{const s=c[0];p.value=s.Project,u.value=s.Projects,F().culture={step:p.value.FormStep,status:p.value.Status}})}),(c,s)=>{const k=e.resolveComponent("input-text"),g=e.resolveComponent("input-integer"),y=e.resolveComponent("input-textarea");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",qt,[s[9]||(s[9]=e.createElementVNode("h5",{class:"square-title"}," 提案單位近三年執行相關計畫之成效及與本計畫之關聯性與差異性 ",-1)),e.unref(f)?(e.openBlock(),e.createElementBlock("p",zt," 若無相關計畫可不填寫 ")):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(n),(h,N)=>(e.openBlock(),e.createElementBlock("div",{class:"mt-3",key:h},[e.createElementVNode("div",Gt,[e.createElementVNode("div",Jt,[e.createElementVNode("div",Yt,[e.createElementVNode("label",Qt,[e.unref(f)?(e.openBlock(),e.createElementBlock("span",Wt,"* ")):e.createCommentVNode("",!0),s[2]||(s[2]=e.createTextVNode("相關計畫名稱",-1))]),e.createElementVNode("div",Kt,[e.createVNode(k,{error:e.unref(i)[`project-${N}-Title`],modelValue:h.Title,"onUpdate:modelValue":r=>h.Title=r,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])])]),e.createElementVNode("div",Xt,[e.unref(f)?(e.openBlock(),e.createElementBlock("a",{key:0,class:"link-teal",onClick:e.withModifiers(r=>l(h),["prevent"]),href:"#"},"刪除",8,Zt)):e.createCommentVNode("",!0),e.createElementVNode("a",{"aria-expanded":"true",class:"link-teal","data-bs-toggle":"collapse",href:`#collapse-${N}`,role:"button"},"收合",8,Ht)])]),e.createElementVNode("div",{class:"collapse show",id:`collapse-${N}`},[e.createElementVNode("table",el,[e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[e.createElementVNode("th",null,[e.unref(f)?(e.openBlock(),e.createElementBlock("span",tl,"* ")):e.createCommentVNode("",!0),s[3]||(s[3]=e.createTextVNode("執行年度",-1))]),e.createElementVNode("td",null,[e.createVNode(g,{class:"text-start w-auto",error:e.unref(i)[`project-${N}-Year`],modelValue:h.Year,"onUpdate:modelValue":r=>h.Year=r},null,8,["error","modelValue","onUpdate:modelValue"])])]),e.createElementVNode("tr",null,[e.createElementVNode("th",null,[e.unref(f)?(e.openBlock(),e.createElementBlock("span",ll,"* ")):e.createCommentVNode("",!0),s[4]||(s[4]=e.createTextVNode("執行單位",-1))]),e.createElementVNode("td",null,[e.createVNode(k,{error:e.unref(i)[`project-${N}-OrgName`],modelValue:h.OrgName,"onUpdate:modelValue":r=>h.OrgName=r,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])])]),e.createElementVNode("tr",null,[e.createElementVNode("th",null,[e.unref(f)?(e.openBlock(),e.createElementBlock("span",nl,"* ")):e.createCommentVNode("",!0),s[5]||(s[5]=e.createTextVNode("計畫經費(元)",-1))]),e.createElementVNode("td",null,[e.createVNode(g,{class:"w-auto",error:e.unref(i)[`project-${N}-Amount`],modelValue:h.Amount,"onUpdate:modelValue":r=>h.Amount=r},null,8,["error","modelValue","onUpdate:modelValue"])])]),e.createElementVNode("tr",null,[e.createElementVNode("th",null,[e.unref(f)?(e.openBlock(),e.createElementBlock("span",ol,"* ")):e.createCommentVNode("",!0),s[6]||(s[6]=e.createTextVNode("內容摘述",-1))]),e.createElementVNode("td",null,[e.createVNode(y,{error:e.unref(i)[`project-${N}-Description`],rows:"4",modelValue:h.Description,"onUpdate:modelValue":r=>h.Description=r,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])])]),e.createElementVNode("tr",null,[e.createElementVNode("th",null,[e.unref(f)?(e.openBlock(),e.createElementBlock("span",rl,"* ")):e.createCommentVNode("",!0),s[7]||(s[7]=e.createTextVNode("執行效益",-1))]),e.createElementVNode("td",null,[e.createVNode(y,{error:e.unref(i)[`project-${N}-Benefit`],rows:"4",modelValue:h.Benefit,"onUpdate:modelValue":r=>h.Benefit=r,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])])])])])],8,vt)])]))),128)),e.unref(f)?(e.openBlock(),e.createElementBlock("button",{key:1,class:"btn btn-teal-dark mt-3",onClick:t,type:"button"},s[8]||(s[8]=[e.createElementVNode("i",{class:"fas fa-plus"},null,-1),e.createTextVNode("新增計畫目標",-1)]))):e.createCommentVNode("",!0)]),e.unref(f)?(e.openBlock(),e.createElementBlock("div",al,[e.createElementVNode("button",{class:"btn btn-outline-teal me-3",onClick:s[0]||(s[0]=h=>o()),type:"button"},"暫存"),e.createElementVNode("button",{class:"btn btn-teal",onClick:s[1]||(s[1]=h=>o(!0)),type:"button"},s[10]||(s[10]=[e.createElementVNode("i",{class:"fas fa-check"},null,-1),e.createTextVNode("完成本頁，下一步",-1)]))])):e.createCommentVNode("",!0)],64)}}},dl={class:"application-step"},il=["onClick"],cl={class:"step-content"},ml={class:"step-label"},fl={key:0,class:"step-status edit"},pl={key:1,class:"step-status"},ul={__name:"CultureProgressBar",props:{id:{type:Number},review:{default:!1,type:Boolean},step:{required:!0,type:Number}},emits:["click"],setup(m,{emit:E}){const f=e.computed(()=>I(i.culture.status,p.step)),i=F(),p=m,u=[{step:1,title:"申請表／計畫書",url:"Application"},{step:2,title:"期程／工作項目／查核",url:"WorkSchedule"},{step:3,title:"經費",url:"Funding"},{step:4,title:"其他",url:"Other"},{step:5,title:"上傳附件／提送申請",url:"Attachment"}],n=l=>{p.review?t("click",l.step):l.step<=i.culture.step&&(location.href=`${l.url}.aspx?ID=${p.id}`)},t=E;return(l,o)=>(e.openBlock(),e.createElementBlock("div",dl,[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(u,d=>e.createElementVNode("div",{class:e.normalizeClass(["step-item",{active:e.unref(f)&&(d.step<e.unref(i).culture.step||d.step===m.step)}]),onClick:c=>n(d),key:d,role:"button"},[e.createElementVNode("div",cl,[e.createElementVNode("div",ml,e.toDisplayString(d.title),1),e.unref(f)&&d.step===m.step?(e.openBlock(),e.createElementBlock("div",fl,"編輯中")):d.step<e.unref(i).culture.step?(e.openBlock(),e.createElementBlock("div",pl,"已完成")):e.createCommentVNode("",!0)])],10,il)),64))]))}},Vl=(m,E)=>{const f=m.__vccOpts||m;for(const[i,p]of E)f[i]=p;return f},Nl={class:"block"},El={class:"mt-4"},kl={class:"table align-middle gray-table side-table"},gl={key:0,class:"text-pink"},yl={class:"d-flex align-items-center gap-2"},bl={class:"input-group w-auto"},hl={key:0,class:"invalid mt-0"},$l={class:"square-title mt-4"},Bl={class:"mt-4"},xl=["onClick"],Cl={class:"d-flex flex-column gap-2"},Sl={class:"mt-4 d-flex flex-column gap-2"},_l={class:"d-flex flex-column gap-3 mt-4"},Tl={class:"bg-light-teal p-3 text-gray d-flex align-items-center gap-3"},Dl={class:"d-flex gap-2 align-items-center flex-grow-1"},wl={class:"text-nowrap"},Ul={key:0,class:"text-pink"},Ml={class:"flex-grow-1"},Al={class:"d-flex gap-2"},Fl=["onClick"],Ol=["href"],Il=["id"],jl={class:"table align-middle gray-table side-table mb-0"},Pl={key:0,class:"text-pink"},Rl={class:"p-0"},Ll={class:"item-list"},ql={class:"mt-2 align-self-start text-center"},zl={class:"input-group"},Gl={key:0,class:"invalid mt-0"},Jl={key:0,class:"d-flex gap-2 mt-1 align-self-start"},Yl=["onClick"],Ql=["onClick"],Wl={key:0,class:"text-pink"},Kl={key:0,class:"text-pink"},Xl={class:"row"},Zl={class:"col"},Hl=["value"],vl={key:0,class:"col-2 d-flex gap-2 mt-1 align-self-start"},en=["onClick"],tn=["onClick"],ln={class:"col"},nn=["value"],on={key:0,class:"col-2 d-flex gap-2 mt-1 align-self-start"},rn=["onClick"],an=["onClick"],sn=["onClick"],dn={key:0,class:"block-bottom bg-light-teal"},cn=Vl({__name:"CultureWorkSchedule",props:{id:{type:Number}},setup(m){const E=m,f=e.computed(()=>I(u.value.Status)),i=e.ref({}),p=e.computed(()=>n.value.filter(N=>!N.Deleted)),u=e.ref({}),n=e.ref([]),t=()=>{const N={Items:[]};l(N),n.value.push(N)},l=N=>{const r={Steps:[],Schedules:[]};d(r),d(r),d(r),o(r,1),o(r,2),N.Items.push(r)},o=(N,r)=>N.Schedules.push({Type:r,Month:0,StepID:0}),d=N=>N.Steps.push({Begin:0,End:0}),c=N=>N.Deleted=!0,s=N=>N.Deleted=!0,k=N=>N.Deleted=!0,g=N=>N.Deleted=!0,y=N=>{if(i.value={},N&&!h()){e.nextTick(()=>{var a;return(a=document.querySelector(".invalid"))==null?void 0:a.scrollIntoView({behavior:"smooth",block:"center"})});return}const r={Project:u.value,Goals:n.value,Submit:N?"true":"false"};U.culture("saveWorkSchedule",r).subscribe(()=>{N&&(window.location.href=`Funding.aspx?ID=${E.id}`)})},h=()=>{const N={StartTime:"計畫期程",EndTime:"計畫期程"};i.value=M(u.value,N);const r={Title:"計畫目標",Content:"預期效益"},a={Title:"重要工作項目",Indicator:"績效指標"},b={Title:"實施步驟",Begin:{numericality:{greaterThan:0,message:"^請選擇起迄月份"}},End:{numericality:{greaterThan:0,message:"^請選擇起迄月份"}}},D={Month:{numericality:{greaterThan:0,message:"^請選擇月份"}},StepID:{numericality:{greaterThan:0,message:"^請選擇實施步驟"}}};return n.value.filter(w=>!w.Deleted).forEach((w,C)=>{Object.assign(i.value,M(w,r,`goal-${C}-`)),w.Items.filter(_=>!_.Deleted).forEach((_,V)=>{Object.assign(i.value,M(_,a,`item-${C}-${V}-`)),_.Steps.filter(B=>!B.Deleted).forEach((B,x)=>Object.assign(i.value,M(B,b,`step-${C}-${V}-${x}-`))),_.Schedules.filter(B=>B.Type===1&&!B.Deleted).forEach((B,x)=>Object.assign(i.value,M(B,D,`schedule-${C}-${V}-1-${x}-`))),_.Schedules.filter(B=>B.Type===2&&!B.Deleted).forEach((B,x)=>Object.assign(i.value,M(B,D,`schedule-${C}-${V}-2-${x}-`)))})}),!Object.keys(i.value).length};return e.onMounted(()=>{rxjs.forkJoin([U.culture("getWorkSchedule",{ID:E.id})]).subscribe(N=>{const r=N[0];u.value=r.Project,n.value=r.Goals,n.value.length||t(),F().culture={step:u.value.FormStep,status:u.value.Status}})}),(N,r)=>{const a=e.resolveComponent("input-tw-date"),b=e.resolveComponent("input-text"),D=e.resolveComponent("input-textarea"),w=e.resolveComponent("input-month"),C=e.resolveComponent("input-select");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",Nl,[r[26]||(r[26]=e.createElementVNode("h5",{class:"square-title"},"期程",-1)),e.createElementVNode("div",El,[e.createElementVNode("table",kl,[e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[e.createElementVNode("th",null,[e.unref(f)?(e.openBlock(),e.createElementBlock("span",gl,"* ")):e.createCommentVNode("",!0),r[4]||(r[4]=e.createTextVNode("計畫期程",-1))]),e.createElementVNode("td",null,[e.createElementVNode("div",yl,[e.createElementVNode("div",bl,[e.createVNode(a,{class:"w-auto",modelValue:e.unref(u).StartTime,"onUpdate:modelValue":r[0]||(r[0]=_=>e.unref(u).StartTime=_)},null,8,["modelValue"]),r[5]||(r[5]=e.createElementVNode("span",{class:"input-group-text"},"至",-1)),e.createVNode(a,{class:"w-auto",modelValue:e.unref(u).EndTime,"onUpdate:modelValue":r[1]||(r[1]=_=>e.unref(u).EndTime=_)},null,8,["modelValue"])]),r[6]||(r[6]=e.createElementVNode("span",{class:"text-teal-dark"},"(期程不可超過 115/04/30)",-1))]),e.unref(i).StartTime||e.unref(i).EndTime?(e.openBlock(),e.createElementBlock("div",hl,e.toDisplayString(e.unref(i).StartTime||e.unref(i).EndTime),1)):e.createCommentVNode("",!0)])])])])]),e.createElementVNode("h5",$l,[r[8]||(r[8]=e.createTextVNode(" 計畫目標與內容 ",-1)),e.unref(f)?(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-teal-dark ms-3",onClick:t,type:"button"},r[7]||(r[7]=[e.createElementVNode("i",{class:"fas fa-plus"},null,-1),e.createTextVNode("新增計畫目標",-1)]))):e.createCommentVNode("",!0)]),e.createElementVNode("div",Bl,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(p),(_,V)=>(e.openBlock(),e.createElementBlock("div",{class:"block-form mt-3",key:_},[e.unref(f)&&e.unref(p).length>1?(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-teal del",onClick:B=>c(_),type:"button"},"刪除",8,xl)):e.createCommentVNode("",!0),e.createElementVNode("div",Cl,[r[9]||(r[9]=e.createElementVNode("label",{class:"text-teal-dark"},"計畫目標",-1)),e.createElementVNode("div",null,[e.createVNode(b,{error:e.unref(i)[`goal-${V}-Title`],modelValue:_.Title,"onUpdate:modelValue":B=>_.Title=B,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])])]),e.createElementVNode("div",Sl,[r[10]||(r[10]=e.createElementVNode("label",{class:"text-teal-dark"},"預期效益（含量化或質化說明）",-1)),e.createElementVNode("div",null,[e.createVNode(D,{error:e.unref(i)[`goal-${V}-Content`],rows:"4",modelValue:_.Content,"onUpdate:modelValue":B=>_.Content=B,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])])]),e.createElementVNode("div",_l,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(_.Items.filter(B=>!B.Deleted),(B,x)=>(e.openBlock(),e.createElementBlock("div",{class:"border",key:B},[e.createElementVNode("div",Tl,[e.createElementVNode("div",Dl,[e.createElementVNode("label",wl,[e.unref(f)?(e.openBlock(),e.createElementBlock("span",Ul,"* ")):e.createCommentVNode("",!0),r[11]||(r[11]=e.createTextVNode("重要工作項目",-1))]),e.createElementVNode("div",Ml,[e.createVNode(b,{error:e.unref(i)[`item-${V}-${x}-Title`],modelValue:B.Title,"onUpdate:modelValue":S=>B.Title=S,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])])]),e.createElementVNode("div",Al,[e.unref(f)&&_.Items.filter(S=>!S.Deleted).length>1?(e.openBlock(),e.createElementBlock("a",{key:0,class:"link-teal",onClick:e.withModifiers(S=>s(B),["prevent"]),href:"#"},"刪除",8,Fl)):e.createCommentVNode("",!0),e.createElementVNode("a",{"aria-expanded":"true",class:"link-teal","data-bs-toggle":"collapse",href:`#collapse-${x}`,role:"button"},"收合",8,Ol)])]),e.createElementVNode("div",{class:"collapse show",id:`collapse-${x}`},[e.createElementVNode("table",jl,[e.createElementVNode("tbody",null,[e.createElementVNode("tr",null,[e.createElementVNode("th",null,[e.unref(f)?(e.openBlock(),e.createElementBlock("span",Pl,"* ")):e.createCommentVNode("",!0),r[12]||(r[12]=e.createTextVNode("實施步驟",-1)),r[13]||(r[13]=e.createElementVNode("br",null,null,-1)),r[14]||(r[14]=e.createTextVNode("及起迄月份",-1))]),e.createElementVNode("td",Rl,[e.createElementVNode("ul",Ll,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(B.Steps.filter(S=>!S.Deleted),(S,A)=>(e.openBlock(),e.createElementBlock("li",{class:e.normalizeClass(["step-item section-wrapper",{disabled:!e.unref(f)}]),key:S},[e.createElementVNode("div",ql,e.toDisplayString(String.fromCharCode(65+A)),1),e.createElementVNode("div",null,[e.createVNode(b,{error:e.unref(i)[`step-${V}-${x}-${A}-Title`],placeholder:"如:進行口訪紀錄",modelValue:S.Title,"onUpdate:modelValue":T=>S.Title=T,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])]),e.createElementVNode("div",null,[e.createElementVNode("div",zl,[e.createVNode(w,{"empty-value":0,modelValue:S.Begin,"onUpdate:modelValue":T=>S.Begin=T},null,8,["modelValue","onUpdate:modelValue"]),r[15]||(r[15]=e.createElementVNode("span",{class:"input-group-text"},"至",-1)),e.createVNode(w,{"empty-value":0,modelValue:S.End,"onUpdate:modelValue":T=>S.End=T},null,8,["modelValue","onUpdate:modelValue"])]),e.unref(i)[`step-${V}-${x}-${A}-Begin`]||e.unref(i)[`step-${V}-${x}-${A}-End`]?(e.openBlock(),e.createElementBlock("div",Gl,e.toDisplayString(e.unref(i)[`step-${V}-${x}-${A}-Begin`]||e.unref(i)[`step-${V}-${x}-${A}-End`]),1)):e.createCommentVNode("",!0)]),e.unref(f)?(e.openBlock(),e.createElementBlock("div",Jl,[B.Steps.filter(T=>!T.Deleted).length>1?(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-sm btn-teal-dark m-0",onClick:T=>g(S),type:"button"},r[16]||(r[16]=[e.createElementVNode("i",{class:"fas fa-trash-alt"},null,-1)]),8,Yl)):e.createCommentVNode("",!0),e.createElementVNode("button",{class:"btn btn-sm btn-teal-dark m-0 add-btn",onClick:T=>d(B),type:"button"},r[17]||(r[17]=[e.createElementVNode("i",{class:"fas fa-plus"},null,-1)]),8,Ql)])):e.createCommentVNode("",!0)],2))),128))])])]),e.createElementVNode("tr",null,[e.createElementVNode("th",null,[e.unref(f)?(e.openBlock(),e.createElementBlock("span",Wl,"* ")):e.createCommentVNode("",!0),r[18]||(r[18]=e.createTextVNode("績效指標",-1))]),e.createElementVNode("td",null,[e.createVNode(b,{error:e.unref(i)[`item-${V}-${x}-Indicator`],placeholder:"如:完成口訪資料1篇",modelValue:B.Indicator,"onUpdate:modelValue":S=>B.Indicator=S,modelModifiers:{trim:!0}},null,8,["error","modelValue","onUpdate:modelValue"])])]),e.createElementVNode("tr",null,[e.createElementVNode("th",null,[e.unref(f)?(e.openBlock(),e.createElementBlock("span",Kl,"* ")):e.createCommentVNode("",!0),r[19]||(r[19]=e.createTextVNode("工作進度",-1))]),e.createElementVNode("td",null,[e.createElementVNode("div",Xl,[e.createElementVNode("div",Zl,[r[22]||(r[22]=e.createElementVNode("div",{class:"fs-16 text-gray"},"工作進度達 50% 應檢核工作",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(B.Schedules.filter(S=>S.Type===1&&!S.Deleted),(S,A)=>(e.openBlock(),e.createElementBlock("div",{class:"row g-2 align-items-center mt-2 section-wrapper",key:S},[e.createElementVNode("div",{class:e.normalizeClass(["mt-0",`col-${e.unref(f)?3:4}`])},[e.createVNode(w,{error:e.unref(i)[`schedule-${V}-${x}-1-${A}-Month`],"empty-value":0,modelValue:S.Month,"onUpdate:modelValue":T=>S.Month=T},null,8,["error","modelValue","onUpdate:modelValue"])],2),e.createElementVNode("div",{class:e.normalizeClass(["mt-0",`col-${e.unref(f)?7:8}`])},[e.createVNode(C,{"empty-value":0,error:e.unref(i)[`schedule-${V}-${x}-1-${A}-StepID`],options:B.Steps.filter(T=>!T.Deleted),modelValue:S.StepID,"onUpdate:modelValue":T=>S.StepID=T},{default:e.withCtx(({index:T,option:R})=>[e.createElementVNode("option",{value:R.ID},e.toDisplayString(String.fromCharCode(65+T))+"."+e.toDisplayString(R.Title),9,Hl)]),_:2},1032,["error","options","modelValue","onUpdate:modelValue"])],2),e.unref(f)?(e.openBlock(),e.createElementBlock("div",vl,[B.Schedules.filter(T=>T.Type===1&&!T.Deleted).length>1?(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-sm btn-teal-dark m-0",onClick:T=>k(S),type:"button"},r[20]||(r[20]=[e.createElementVNode("i",{class:"fas fa-trash-alt"},null,-1)]),8,en)):e.createCommentVNode("",!0),e.createElementVNode("button",{class:"btn btn-sm btn-teal-dark m-0 add-btn",onClick:T=>o(B,1),type:"button"},r[21]||(r[21]=[e.createElementVNode("i",{class:"fas fa-plus"},null,-1)]),8,tn)])):e.createCommentVNode("",!0)]))),128))]),e.createElementVNode("div",ln,[r[25]||(r[25]=e.createElementVNode("div",{class:"fs-16 text-gray"},"工作進度達 100% 應檢核工作",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(B.Schedules.filter(S=>S.Type===2&&!S.Deleted),(S,A)=>(e.openBlock(),e.createElementBlock("div",{class:"row g-2 align-items-center mt-2 section-wrapper",key:S},[e.createElementVNode("div",{class:e.normalizeClass(["mt-0",`col-${e.unref(f)?3:4}`])},[e.createVNode(w,{error:e.unref(i)[`schedule-${V}-${x}-2-${A}-Month`],"empty-value":0,modelValue:S.Month,"onUpdate:modelValue":T=>S.Month=T},null,8,["error","modelValue","onUpdate:modelValue"])],2),e.createElementVNode("div",{class:e.normalizeClass(["mt-0",`col-${e.unref(f)?7:8}`])},[e.createVNode(C,{"empty-value":0,error:e.unref(i)[`schedule-${V}-${x}-2-${A}-StepID`],options:B.Steps.filter(T=>!T.Deleted),modelValue:S.StepID,"onUpdate:modelValue":T=>S.StepID=T},{default:e.withCtx(({index:T,option:R})=>[e.createElementVNode("option",{value:R.ID},e.toDisplayString(String.fromCharCode(65+T))+"."+e.toDisplayString(R.Title),9,nn)]),_:2},1032,["error","options","modelValue","onUpdate:modelValue"])],2),e.unref(f)?(e.openBlock(),e.createElementBlock("div",on,[B.Schedules.filter(T=>T.Type===2&&!T.Deleted).length>1?(e.openBlock(),e.createElementBlock("button",{key:0,class:"btn btn-sm btn-teal-dark m-0",onClick:T=>k(S),type:"button"},r[23]||(r[23]=[e.createElementVNode("i",{class:"fas fa-trash-alt"},null,-1)]),8,rn)):e.createCommentVNode("",!0),e.createElementVNode("button",{class:"btn btn-sm btn-teal-dark m-0 add-btn",onClick:T=>o(B,2),type:"button"},r[24]||(r[24]=[e.createElementVNode("i",{class:"fas fa-plus"},null,-1)]),8,an)])):e.createCommentVNode("",!0)]))),128))])])])])])])],8,Il)]))),128))]),e.unref(f)?(e.openBlock(),e.createElementBlock("button",{key:1,class:"btn btn-teal mt-3",onClick:B=>l(_),type:"button"},"新增工作項目",8,sn)):e.createCommentVNode("",!0)]))),128))])]),e.unref(f)?(e.openBlock(),e.createElementBlock("div",dn,[e.createElementVNode("button",{class:"btn btn-outline-teal me-3",onClick:r[2]||(r[2]=_=>y()),type:"button"},"暫存"),e.createElementVNode("button",{class:"btn btn-teal",onClick:r[3]||(r[3]=_=>y(!0)),type:"button"},r[27]||(r[27]=[e.createElementVNode("i",{class:"fas fa-check"},null,-1),e.createTextVNode("完成本頁，下一步",-1)]))])):e.createCommentVNode("",!0)],64)}}},[["__scopeId","data-v-eca22b5f"]]),mn={class:"modal-dialog modal-dialog-centered modal-md"},fn={class:"modal-content"},pn={class:"modal-body"},un={class:"d-flex flex-column align-items-center mb-5 gap-3"},Vn={class:"fs-18"},Nn={__name:"ErrorModal",setup(m){const E=q(),f=e.ref();return e.onMounted(()=>f.value.addEventListener("hidden.bs.modal",()=>E.error=null)),e.watch(()=>E.error,()=>{E.error&&bootstrap.Modal.getOrCreateInstance(f.value).show()}),(i,p)=>(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.createElementVNode("div",{"aria-hidden":"true",class:"modal fade","data-bs-backdrop":"static",ref_key:"modal",ref:f,tabindex:"-1"},[e.createElementVNode("div",mn,[e.createElementVNode("div",fn,[p[2]||(p[2]=e.createElementVNode("div",{class:"modal-header"},[e.createElementVNode("button",{"aria-label":"Close",class:"btn-close","data-bs-dismiss":"modal",type:"button"},[e.createElementVNode("i",{class:"fa-solid fa-circle-xmark"})])],-1)),e.createElementVNode("div",pn,[e.createElementVNode("div",un,[p[0]||(p[0]=e.createElementVNode("h4",{class:"text-danger fw-bold"},"錯誤",-1)),e.createElementVNode("div",Vn,e.toDisplayString(e.unref(E).error),1)]),p[1]||(p[1]=e.createElementVNode("div",{class:"d-flex gap-4 flex-wrap justify-content-center"},[e.createElementVNode("button",{class:"btn btn-danger","data-bs-dismiss":"modal",type:"button"}," 確認 ")],-1))])])])],512)]))}},En={__name:"InputBoolean",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(m){const E=e.useModel(m,"modelValue"),f=[{value:!0,text:"是"},{value:!1,text:"否"}];return(i,p)=>{const u=e.resolveComponent("input-radio-group");return e.openBlock(),e.createBlock(u,{options:f,modelValue:E.value,"onUpdate:modelValue":p[0]||(p[0]=n=>E.value=n)},null,8,["modelValue"])}}},kn=Object.assign({inheritAttrs:!1},{__name:"InputFile",emits:["file"],setup(m,{emit:E}){const f=e.ref(),i=()=>{Array.from(f.value.files).forEach(u=>U.upload(u).subscribe(n=>p("file",n))),f.value.value=""},p=E;return(u,n)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("button",{class:"btn btn-teal-dark",onClick:n[0]||(n[0]=t=>e.unref(f).click()),type:"button"},n[1]||(n[1]=[e.createElementVNode("i",{class:"fas fa-file-upload me-1"},null,-1),e.createTextVNode("上傳",-1)])),e.createElementVNode("input",e.mergeProps({onChange:i,class:"d-none",ref_key:"input",ref:f,type:"file"},u.$attrs),null,16)],64))}}),gn=["placeholder","type"],yn={key:0,class:"invalid mt-0"},bn=Object.assign({inheritAttrs:!1},{__name:"InputInteger",props:e.mergeModels({error:{type:String},placeholder:{default:"請輸入",type:String},type:{default:"text",type:String}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(m){const E=e.useModel(m,"modelValue");return e.watch(E,f=>{if(f){const i=(parseInt(f)||0).toString();f.toString()!==i&&(E.value=i)}}),(f,i)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.withDirectives(e.createElementVNode("input",e.mergeProps({class:"form-control",placeholder:m.placeholder,style:{"text-align":"right"},type:m.type},f.$attrs,{"onUpdate:modelValue":i[0]||(i[0]=p=>E.value=p)}),null,16,gn),[[e.vModelDynamic,E.value]]),m.error?(e.openBlock(),e.createElementBlock("div",yn,e.toDisplayString(m.error),1)):e.createCommentVNode("",!0)],64))}}),hn={__name:"InputMonth",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(m){const E=e.useModel(m,"modelValue"),f=[];for(let i=1;i<=12;i++)f.push({value:i,text:`${i}月`});return(i,p)=>{const u=e.resolveComponent("input-select");return e.openBlock(),e.createBlock(u,{options:f,modelValue:E.value,"onUpdate:modelValue":p[0]||(p[0]=n=>E.value=n)},null,8,["modelValue"])}}},$n=["onChange","checked","id","value"],Bn=["for"],xn={__name:"InputRadioGroup",props:e.mergeModels({id:{default:()=>W(),type:String},options:{default:[],type:Array},textName:{default:"text",type:String},valueName:{default:"value",type:String}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(m){const E=e.useModel(m,"modelValue"),f=i=>{E.value=i};return(i,p)=>(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.options,u=>(e.openBlock(),e.createElementBlock("div",{class:"form-check form-check-inline mb-0",key:u},[e.createElementVNode("input",{onChange:n=>f(u[m.valueName]),checked:u[m.valueName]===E.value,class:"form-check-input",id:`${m.id}-${u[m.valueName]}`,type:"radio",value:u[m.valueName]},null,40,$n),e.createElementVNode("label",{class:"form-check-label",for:`${m.id}-${u[m.valueName]}`},e.toDisplayString(u[m.textName]),9,Bn)]))),128))}},Cn=["value"],Sn=["value"],_n={key:0,class:"invalid mt-0"},Tn=Object.assign({inheritAttrs:!1},{__name:"InputSelect",props:e.mergeModels({emptyValue:{type:[Number,String]},error:{type:String},options:{default:[],type:Array},placeholder:{default:"請選擇",type:String},textName:{default:"text",type:String},valueName:{default:"value",type:String}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(m){const E=e.useModel(m,"modelValue");return(f,i)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.withDirectives(e.createElementVNode("select",e.mergeProps({class:"form-select"},f.$attrs,{"onUpdate:modelValue":i[0]||(i[0]=p=>E.value=p)}),[E.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("option",{key:0,value:m.emptyValue},e.toDisplayString(m.placeholder),9,Cn)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.options,(p,u)=>e.renderSlot(f.$slots,"default",{key:p,index:u,option:p},()=>[e.createElementVNode("option",{value:p[m.valueName]},e.toDisplayString(p[m.textName]),9,Sn)])),128))],16),[[e.vModelSelect,E.value]]),m.error?(e.openBlock(),e.createElementBlock("div",_n,e.toDisplayString(m.error),1)):e.createCommentVNode("",!0)],64))}}),Dn={class:"input-group"},wn={key:0,class:"input-group-text"},Un={key:0,class:"text-pink"},Mn=["placeholder","type"],An={key:0,class:"invalid mt-0"},Fn=Object.assign({inheritAttrs:!1},{__name:"InputText",props:e.mergeModels({error:{type:String},placeholder:{default:"請輸入",type:String},prefix:{type:String},readonly:{default:!1,type:Boolean},required:{default:!1,type:Boolean},type:{default:"text",type:String}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(m){const E=e.useModel(m,"modelValue");return(f,i)=>m.readonly?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode(e.toDisplayString(E.value),1)],64)):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createElementVNode("div",Dn,[m.prefix?(e.openBlock(),e.createElementBlock("span",wn,[m.required?(e.openBlock(),e.createElementBlock("span",Un,"* ")):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(m.prefix),1)])):e.createCommentVNode("",!0),e.withDirectives(e.createElementVNode("input",e.mergeProps({class:"form-control",placeholder:m.placeholder,type:m.type},f.$attrs,{"onUpdate:modelValue":i[0]||(i[0]=p=>E.value=p)}),null,16,Mn),[[e.vModelDynamic,E.value]])]),m.error?(e.openBlock(),e.createElementBlock("div",An,e.toDisplayString(m.error),1)):e.createCommentVNode("",!0)],64))}}),On=["placeholder"],In={key:0,class:"fs-14 text-gray mt-2"},jn={class:"text-pink"},Pn={key:1,class:"invalid mt-0"},Rn=Object.assign({inheritAttrs:!1},{__name:"InputTextarea",props:e.mergeModels({error:{type:String},maxLength:{type:Number},placeholder:{default:"請輸入",type:String}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(m){const E=e.useModel(m,"modelValue"),f=m;return f.maxLength&&e.watch(E,()=>{var i;((i=E.value)==null?void 0:i.length)>f.maxLength&&(E.value=E.value.substring(0,f.maxLength))}),(i,p)=>{var u;return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.withDirectives(e.createElementVNode("textarea",e.mergeProps({class:"form-control",placeholder:m.placeholder},i.$attrs,{"onUpdate:modelValue":p[0]||(p[0]=n=>E.value=n)}),null,16,On),[[e.vModelText,E.value]]),m.maxLength?(e.openBlock(),e.createElementBlock("div",In,[p[1]||(p[1]=e.createTextVNode(" 已輸入 ",-1)),e.createElementVNode("span",jn,e.toDisplayString(((u=E.value)==null?void 0:u.length)||0),1),e.createTextVNode(" 個字數(限"+e.toDisplayString(m.maxLength)+"字數) ",1)])):e.createCommentVNode("",!0),m.error?(e.openBlock(),e.createElementBlock("div",Pn,e.toDisplayString(m.error),1)):e.createCommentVNode("",!0)],64)}}}),Ln={key:0,class:"invalid"},Y={CultureApplication:et,CultureAttachment:gt,CultureFunding:Lt,CultureOther:sl,CultureProgressBar:ul,CultureWorkSchedule:cn,ErrorModal:Nn,InputBoolean:En,InputFile:kn,InputInteger:bn,InputMonth:hn,InputRadioGroup:xn,InputSelect:Tn,InputText:Fn,InputTextarea:Rn,InputTwDate:Object.assign({inheritAttrs:!1},{__name:"InputTwDate",props:{displayFormat:{default:"tYY/MM/DD",type:String},drops:{default:"down",type:String},error:{type:String},format:{default:"YYYY-MM-DD",type:String},modelValue:{default:"",type:String},noFuture:{default:!1,type:Boolean}},emits:["update:modelValue"],setup(m,{emit:E}){let f;const i=m,p=e.ref(),u=e.ref(),n=E,t=l=>{!l&&i.modelValue&&(l=moment(new Date(i.modelValue))),l?(p.value=l.format(i.displayFormat),n("update:modelValue",l.format(i.format))):(p.value="",n("update:modelValue","")),f.setStartDate(p.value||void 0)};return e.onMounted(()=>{const l=$(u.value);l.daterangepicker({autoApply:!0,autoUpdateInput:!1,drops:i.drops,locale:{format:i.displayFormat},maxDate:i.noFuture?new Date:void 0,showDropdowns:!0,singleDatePicker:!0}).on("apply.daterangepicker",(o,d)=>t(d.startDate)),f=l.data("daterangepicker"),t()}),e.onUnmounted(()=>f.remove()),e.watch(()=>i.modelValue,()=>t()),(l,o)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.withDirectives(e.createElementVNode("input",e.mergeProps({class:"form-control",ref_key:"element",ref:u,type:"text"},l.$attrs,{"onUpdate:modelValue":o[0]||(o[0]=d=>e.isRef(p)?p.value=d:null)}),null,16),[[e.vModelText,e.unref(p)]]),m.error?(e.openBlock(),e.createElementBlock("div",Ln,e.toDisplayString(m.error),1)):e.createCommentVNode("",!0)],64))}})};return{install:m=>{for(const E in Y)m.component(E,Y[E])}}}));
//# sourceMappingURL=ocean-subsidy-components.umd.js.map
